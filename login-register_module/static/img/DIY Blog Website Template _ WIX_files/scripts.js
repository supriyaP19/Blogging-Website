var mod;mod=angular.module("infinite-scroll",[]),mod.value("THROTTLE_MILLISECONDS",null),mod.directive("infiniteScroll",["$rootScope","$window","$timeout","THROTTLE_MILLISECONDS",function(a,b,c,d){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"="},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t;return b=angular.element(b),q=null,r=null,i=null,j=null,p=!0,t=!1,o=function(){var c,d,g,h,k;return j===b?(c=j.height()+j.scrollTop(),g=f.offset().top+f.height()):(c=j.height(),d=0,void 0!==j.offset()&&(d=j.offset().top),g=f.offset().top-d+f.height()),t&&(g=$(document).height()),h=g-c,k=h<=j.height()*q+1,k?(i=!0,r?e.$$phase||a.$$phase?e.infiniteScroll():e.$apply(e.infiniteScroll):void 0):i=!1},s=function(a,b){var d,e,f;return f=null,e=0,d=function(){var b;return e=(new Date).getTime(),c.cancel(f),f=null,a.call(),b=null},function(){var g,h;return g=(new Date).getTime(),h=b-(g-e),0>=h?(clearTimeout(f),c.cancel(f),f=null,e=g,a.call()):f?void 0:f=c(d,h)}},null!=d&&(o=s(o,d)),e.$on("$destroy",function(){return j.off("scroll",o)}),m=function(a){return q=parseInt(a,10)||0},e.$watch("infiniteScrollDistance",m),m(e.infiniteScrollDistance),l=function(a){return r=!a,r&&i?(i=!1,o()):void 0},e.$watch("infiniteScrollDisabled",l),l(e.infiniteScrollDisabled),n=function(a){return t=a},e.$watch("infiniteScrollUseDocumentBottom",n),n(e.infiniteScrollUseDocumentBottom),h=function(a){return null!=j&&j.off("scroll",o),j="function"==typeof a.last&&a!==b?a.last():a,null!=a?j.on("scroll",o):void 0},h(b),k=function(a){if(null!=a&&0!==a.length){if(a=angular.element(a),null!=a)return h(a);throw new Exception("invalid infinite-scroll-container attribute.")}},e.$watch("infiniteScrollContainer",k),k(e.infiniteScrollContainer||[]),null!=g.infiniteScrollParent&&h(angular.element(f.parent())),null!=g.infiniteScrollImmediateCheck&&(p=e.$eval(g.infiniteScrollImmediateCheck)),c(function(){return p?o():void 0},0)}}}]),angular.module("wix.common.bi",[]).factory("Logger",function(){return W.BI.Logger}).factory("DomEventHandler",function(){return W.BI.DomEventHandler}).run(["biBrowsingSession",function(a){a.track()}]);var W=W||{};W.BI=W.BI||{},W.BI.ErrorSeverity={RECOVERABLE:10,WARNING:20,ERROR:30,FATAL:40},W.BI.Categories={EDITOR:1,VIEWER:2,TIMEOUTS:3,SERVER:4},W.BI.initialLoadIsReported=!1,W.BI.Logger=function(){function a(){return(new Date).getTime()}function b(){return""+a()+f++}function c(){var a=window.performance&&window.performance.now?window.performance.now():-1;return Math.round(a)}function d(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function e(a){function b(a,b){var c={src:{type:"number"},evid:{type:"number"}},e=d({},h,p.defaultEventArgs,a),f=p.schemaValidators||[],i=f.length>0?f.some(function(a){return a.match(e)&&(a.execute(e)||!0)}):!0;if(!i)throw new Error("No validator accepted the event");g(e,["evid"],c)&&o(e,b)}function c(a,b){var c=["evid","cat","iss","sev","errc","ver"],e={src:{type:"number"},evid:{type:"number",values:[k.ERROR]},cat:{type:"number",values:[W.BI.Categories.EDITOR,W.BI.Categories.VIEWER,W.BI.Categories.TIMEOUTS,W.BI.Categories.SERVER]},iss:{type:"number"},sev:{type:"number",values:[W.BI.ErrorSeverity.RECOVERABLE,W.BI.ErrorSeverity.WARNING,W.BI.ErrorSeverity.ERROR,W.BI.ErrorSeverity.FATAL]},errc:{type:"number"},httpc:{type:"number"},ver:{type:"string",maxLength:16},errscp:{type:"string",subStr:64},trgt:{type:"string",subStr:64},gsi:{type:"string",length:36},ts:{type:"number"},uid:{type:"number"},ut:{type:"string",maxLength:16},did:{type:"string",maxLength:36},cid:{type:"string",length:36},lng:{type:"string",maxLength:5},dsc:{type:"string",subStr:512}},f=d({},i,p.defaultErrorArgs,a,{evid:k.ERROR});g(f,c,e)&&o(f,b)}function e(a,c,e){var f={view:{type:"string"}},h=d({},c,{evid:k.ON_READY,view:a});g(h,["view"],f)&&b(h,e)}function f(a,c,e){var f={view:{type:"string"}},h=d({},c,{evid:k.ROUTE_CHANGE,view:a});g(h,["view"],f)&&b(h,e)}function g(a,b,c){var d=b.slice(0);for(var e in a){var f=c[e]||{};if(a[e]=r.parse(a[e],f),!r.valid(a[e],f))return void p.error("Bad event param (key: "+e+", value: "+a[e]+")");var g;(g=d.indexOf(e))>-1&&d.splice(g,1)}return d.length>0?(p.error("Missing required params: "+d.join(", ")),!1):!0}function l(a,b){var c=a.match(/\?./)?"&":"?";return a.replace(/\?$/,"")+c+Object.keys(b).filter(function(a){return!p.removeUndefinedValues||void 0!==b[a]}).map(function(a){return[encodeURIComponent(a),"=",encodeURIComponent(b[a])].join("")}).join("&")}function m(a,b,c){var d=function(){c("pixel")},e=b||new Image(0,0);e.onload=d,e.onerror=d,e.src=a}function n(a,b){return window.navigator&&window.navigator.sendBeacon?window.navigator.sendBeacon(a)&&setTimeout(function(){b("beacon")},0):!1}function o(a,b){var c=a.adapter||p.adapter;delete a.adapter;var d=l(p.biUrl+c,a),e=b||function(){};W.BI.DryRun?setTimeout(e,0):p.useBeacon&&n(d,e)||m(d,p.image,e),q.url=d,q.callback=b}var p,q={url:void 0,assertEmpty:function(){if(void 0!==this.url)throw"last bi is not empty!!!"},resolve:function(){this.callback()},clear:function(){this.url=void 0}},r=new W.BI.FieldParsers(a.injector);return a.hostName&&(a.biUrl="//"+a.hostName+"/"),p=d({},j,a),{log:b,reportOnReady:e,reportRouteChange:f,error:c,getLastBiUrl:function(){return q}}}var f=0,g=a(),h={_:b,ms:c},i={_:b,ts:function(){return a()-g},cat:W.BI.Categories.VIEWER,sev:W.BI.ErrorSeverity.WARNING,iss:1,ver:"1"},j={hostName:"frog.wix.com",defaultEventArgs:{},defaultErrorArgs:{},biUrl:"//frog.wix.com/",schemaValidators:[],adapter:"",error:function(a){throw a}},k={ERROR:10,ON_READY:302,ROUTE_CHANGE:300};return e}();var W=W||{};W.BI=W.BI||{},W.BI.DomEventHandler=function(){function _extend(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function eventHandler(biLogger,args){function _safeGetEventParams(a,b,c){var d;return b&&b[a]?d=b[a]:(_options.error("Invalid event name"),d={}),_extend({},d,c)}function _log(a,b,c){var d=_safeGetEventParams(a,_options.eventMap,b);_biLogger.log(d,c)}function _error(a,b,c){var d=_safeGetEventParams(a,_options.errorMap,b);_biLogger.error(d,c)}function _getAttr(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return a.attributes[c].value}function _handleTriggeredBiEvent(event){var eventName=_getAttr(event.target,_wixBiAttributeSelector);if(eventName){var eventArgsStr=_getAttr(event.target,_wixBiArgsAttribute),eventArgs=eventArgsStr?eval("eventArgs = "+eventArgsStr):{};_log(eventName,eventArgs)}}function _bind(){document.body.addEventListener("click",_handleTriggeredBiEvent)}function _unbind(){document.body.removeEventListener("click",_handleTriggeredBiEvent)}var _options,_biLogger=biLogger;return _options=_extend({},_initOptions,args),{bind:_bind,unbind:_unbind,log:_log,error:_error}}var _wixBiAttributeSelector="wix-bi",_wixBiArgsAttribute="wix-bi-args",_initOptions={eventMap:{},errorMap:{},error:function(a){throw a}};return eventHandler}();var W=W||{};W.BI=W.BI||{},W.BI.FieldParsers=function(a){var b={length:function(a,b){return a&&void 0!==a.length&&a.length===b},maxLength:function(a,b){return a&&void 0!==a.length&&a.length<=b},values:function(a,b){return b&&-1!==b.indexOf(a)},type:function(a,b){return a&&typeof a===b}},c={subStr:function(a,b){return a&&a.substr?a.substr(0,Math.min(a.length,b)):a}};this.valid=function(a,c){for(var d in c)if(b[d]&&!b[d](a,c[d]))return!1;return!0},this.parse=function(b,d){"function"==typeof b&&(b=a?a.invoke(b):b());for(var e in d)b=c[e]?c[e](b,d[e]):b;return b}},angular.module("wix.common.bi").directive("wixBi",["domBiLogger","$window",function(a,b){function c(a){return a.replace(/-/g,"_").toUpperCase()}return{restrict:"A",priority:1,link:{pre:function(d,e,f){var g=f.wixBiEvent||"click";e.bind(g,function(e){var h=c(f.wixBi),i=d.$eval(f.wixBiArgs)||{};if("click"===g&&e.target.href&&void 0!==f.delayHref){var j=e.target.href;e.preventDefault(),a.log(h,i,function(){b.location=j})}else a.log(h,i)})}}}}]),angular.module("wix.common.bi").provider("biLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["Logger","$injector",function(a,c){function d(){var a={};return a.ownerId=function(a){return a.$$getOwnerId()},a.ownerId.$inject=["permissionsManager"],a.roles=function(a){return a.$$getRoles().join(",")},a.roles.$inject=["permissionsManager"],a}if(b.injector=c,c.has("permissionsManager")){var e=d();b.defaultEventArgs=angular.extend({},b.defaultEventArgs,e),b.defaultErrorArgs=angular.extend({},b.defaultErrorArgs,e)}return angular.extend(new a(b),{getConfig:function(){return b}})}],this.$get.$inject=["Logger","$injector"]}]),angular.module("wix.common.bi").provider("domBiLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["biLogger","DomEventHandler",function(a,c){return angular.extend(new c(a,b),{getConfig:function(){return b}})}],this.$get.$inject=["biLogger","DomEventHandler"]}]),angular.module("wix.common.bi").constant("recursiveExtend",function(){function a(a){return null!==a&&"object"==typeof a&&a.constructor!==Array}function b(c,d){for(var e in d)d.hasOwnProperty(e)&&(a(d[e])?(c[e]=c[e]||{},b(c[e],d[e])):c[e]=d[e])}return b}()),function(){function a(a){if("undefined"!=typeof window&&window)try{return window.top===window.self?a?a(window):window:null}catch(b){return null}return null}function b(a,b,c){if(a&&a[b]){var d=a[b];a[b]=function(){return c.apply(null,arguments),d.apply(a,arguments)}}}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}angular.module("wix.common.bi").provider("biBrowsingSession",function(){var d,e="__isTrackingBiBrowsingSession__",f="p",g=19,h=3;this.setHost=function(a){d=a},this.$get=["$window","Logger",function(i,j){function k(a){var b=a.screen&&a.screen.width||0,c=a.screen&&a.screen.height||0;return[b,c].join("x")}function l(a){var b=0,c=0;return a.innerWidth?(b=a.innerWidth,c=a.innerHeight):a.document&&(a.document.documentElement&&a.document.documentElement.clientWidth?(b=a.document.documentElement.clientWidth,c=a.document.documentElement.clientHeight):a.document.body&&a.document.body.clientWidth&&(b=a.document.body.clientWidth,c=a.document.body.clientHeight)),[b,c].join("x")}function m(b){a(function(a){b(a.location.href)})}function n(c){a(function(a){["pushState","replaceState"].forEach(function(d){b(a.history,d,function(a,b,d){c(d)})})})}function o(b){a(function(a){a.addEventListener("popstate",function(){b(a.location.href)})})}function p(a){var b=window.document.referrer;[m,n,o].forEach(function(c){c(function(c){a(b,c),b=c})})}function q(){return a(function(a){return a&&!a[e]})}function r(){a(function(a){a[e]=!0})}function s(){if(q()){r();var b=1;p(function(c,d){var e=a(function(a){return{sr:k(a),wr:l(a)}});t.log({from:c,to:d,fis:b,sr:e.sr,wr:e.wr}),b=0})}}var t=new j({hostName:d,adapter:f,useBeacon:!0,defaultEventArgs:{src:g,evid:h,vsi:c()}});return{track:s,logger:t}}],this.$get.$inject=["$window","Logger"]})}(),angular.module("wix.common.bi").value("nowWrapper",function(){return Date.now()}).provider("wixBiLogger",["biLoggerProvider","domBiLoggerProvider","biBrowsingSessionProvider",function(a,b,c){this.setConfig=function(d){a.setConfig(d),b.setConfig(d),c.setHost(d.hostName)},this.$get=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper",function(a,b,c,d,e,f,g){function h(a){return function(){d.$$phase?a.resolve():d.$apply(function(){a.resolve()})}}function i(a){return Object.keys(k[a]||[]).reduce(function(a,b){return a[b]=b,a},{})}function j(){return"undefined"!=typeof e.NREUM}var k=angular.extend({},a.getConfig(),b.getConfig());return{log:function(d,e){var f=c.defer();return"string"!=typeof d&&d?a.log(d,h(f)):b.log(d,e,h(f)),f.promise},error:function(d,e){var f=c.defer();return"string"==typeof d?b.error(d,e,h(f)):a.error(d,h(f)),f.promise},reportOnReady:function(b,d){var i=c.defer();if(!W.BI.initialLoadIsReported){j()&&e.NREUM.finished(),void 0===d&&(d={});var k=f("performance.timing.navigationStart")(e);k&&(d.loading_time=g()-k),d.initial_load=!0,W.BI.initialLoadIsReported=!0}return a.reportOnReady(b,d,h(i)),i.promise},reportRouteChange:function(b,d){var e=c.defer();return a.reportRouteChange(b,d,h(e)),e.promise},getLastBiUrl:function(){return a.getLastBiUrl()},events:i("eventMap"),errors:i("errorMap"),getConfig:function(){return angular.extend({},a.getConfig(),b.getConfig())}}}],this.$get.$inject=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper"]}]),angular.module("angularWidgetInternal",[]),angular.module("angularWidget",["angularWidgetInternal"]).config(["$provide","$injector",function(a,b){b.has("$routeProvider")&&a.decorator("$rootScope",["$delegate","$injector",function(a,b){function c(a,b){h=!0;var c=b.absUrl();a.notifyWidgets("$locationChangeStart",c,g),a.notifyWidgets("$locationChangeSuccess",c,g),g=c,h=!1}var d,e,f=a.$broadcast,g="",h=!1;return a.$broadcast=function(a){var g=!1;return"$routeChangeSuccess"===a&&b.invoke(["$route","widgets","$location",function(a,b,f){e=d,d=a.current,d&&e&&d.$$route===e.$$route&&!d.$$route.reloadOnSearch&&d.locals&&d.locals.$template&&-1!==d.locals.$template.indexOf("<ng-widget")&&(c(b,f),g=!0)}]),g&&(arguments[0]="$routeChangeMuted"),f.apply(this,arguments)},a.$on("$routeUpdate",function(){h||b.invoke(["widgets","$location",function(a,b){c(a,b)}])}),a}])}]).config(["$provide",function(a){a.decorator("$browser",["$delegate",function(a){return a.$$applicationDestroyed=angular.noop,a}])}]).config(["widgetsProvider",function(a){a.addServiceToShare("$browser"),a.addServiceToShare("$location",{url:1,path:1,search:1,hash:1,$$parse:1}),a.addEventToForward("$locationChangeStart")}]),angular.module("angularWidgetOnly",[]).run(["$rootScope","$location",function(a,b){a.$evalAsync(function(){var c=a.$broadcast("$locationChangeStart",b.absUrl(),"");c.defaultPrevented||a.$broadcast("$locationChangeSuccess",b.absUrl(),"")})}]),angular.module("angularWidgetInternal").directive("ngWidget",["$http","$templateCache","$q","$timeout","fileLoader","widgets","$rootScope","$log","$browser",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",priority:999,terminal:!0,scope:{src:"=",options:"=",delay:"@"},link:function(j,k){function l(a,b){angular.forEach(f.getServicesToShare(),function(b,c){a.constant(c,b)}),b.setParentInjectorScope(j),b.setOptions(j.options)}function m(a,b){return b?d(function(){return a},b):a}function n(a,b){return c.when(a).then(function(a){return m(a,b)},function(a){return m(c.reject(a),b)})}function o(a){try{return!!angular.module(a).requires.length}catch(b){return!1}}function p(d,f,g){var h=[a.get(f,{cache:b})];return o(d)||h.push(e.loadFiles(g)),c.all(h).then(function(a){return a[0].data})}function q(a,b,c,d){var e=d?c.$emit:c.$broadcast;return b.$on(a,function(b){if(!d&&!b.stopPropagation||d&&b.stopPropagation){var f=Array.prototype.slice.call(arguments);f[0]=a,c.$root.$$phase?r(e,c,f,b):c.$apply(function(){r(e,c,f,b)})}})}function r(a,b,c,d){a.apply(b,c).defaultPrevented&&d.preventDefault()}function s(){var a=w.get("widgetConfig"),b=w.get("$rootScope");x=[],f.getEventsToForward().forEach(function(a){x.push(q(a,g,b,!1)),x.push(q(a,b,j,!0))}),x.push(j.$watch("options",function(c){b.$apply(function(){a.setOptions(c)})},!0));var c=a.exportProperties();if(c.loading){var d=j.$on("exportPropertiesUpdated",function(a,b){b.loading||(d(),j.$emit("widgetLoaded",j.src))});x.push(d)}else j.$emit("widgetLoaded",j.src);f.registerWidget(w)}function t(a,b){var d=++y;c.when(f.getWidgetManifest(a)).then(function(a){i.$$incOutstandingRequestCount(),n(p(a.module,a.html,a.files),b).then(function(b){if(d===y)try{var c=angular.element(b),e=["angularWidgetOnly","angularWidget",l,a.module].concat(a.config||[]);j.$emit("widgetLoading"),w=angular.bootstrap(c,e),s(),k.append(c)}catch(f){h.error(f),j.$emit("widgetError")}})["catch"](function(){d===y&&j.$emit("widgetError")})["finally"](function(){i.$$completeOutstandingRequest(angular.noop)})})}function u(){w&&(x.forEach(function(a){a()}),f.unregisterWidget(w),w=null,x=[])}function v(){u(),k.html(""),j.src&&t(j.src,j.delay)}l.$inject=["$provide","widgetConfigProvider"];var w,x,y=0;j.$watch("src",v),j.$on("reloadWidget",v),j.$on("$destroy",function(){y++,u(),k.html("")})}}}]),function(){function a(a,b){function c(c){return c.reduce(function(b,c){return b.then(function(){return a(c,c.split(".").reverse()[0])})},b.when())}this.loadFiles=function(d){return b.all(d.map(function(b){return Array.isArray(b)?c(b):a(b,b.split(".").reverse()[0])}))}}a.$inject=["tagAppender","$q"],angular.module("angularWidgetInternal").service("fileLoader",a)}(),angular.module("angularWidgetInternal").value("headElement",document.getElementsByTagName("head")[0]).factory("requirejs",function(){return window.requirejs||null}).value("navigator",navigator).factory("tagAppender",["$q","$rootScope","headElement","$interval","navigator","$document","requirejs","$browser",function(a,b,c,d,e,f,g,h){function i(a){return a.replace(/^.*:\/\//,"//")}var j={},k=f[0].styleSheets;return function(f,l){var m=a.defer();if(m.promise["finally"](function(){h.$$completeOutstandingRequest(angular.noop)}),h.$$incOutstandingRequestCount(),g&&"js"===l)return g([f],function(a){b.$apply(function(){m.resolve(a)})},function(a){b.$apply(function(){m.reject(a)})}),m.promise;if(f in j)return j[f].then(function(a){m.resolve(a)},function(a){m.reject(a)}),m.promise;j[f]=m.promise;var n;"css"===l?(n=angular.element("<link></link>")[0],n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",f)):(n=angular.element("<script></script>")[0],n.setAttribute("type","text/javascript"),n.setAttribute("src",f));var o=!1;if(c.appendChild(n),n.onerror=function(){n.onerror=n.onload=n.onreadystatechange=null,delete j[f],b.$$phase?m.reject():b.$apply(function(){m.reject()})},n.onload=n.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,n.onerror=n.onload=n.onreadystatechange=null,b.$$phase?m.resolve():b.$apply(function(){m.resolve()}))},"css"===l&&e.userAgent.match(" Safari/")&&!e.userAgent.match(" Chrom")&&e.userAgent.match(" Version/5."))var p=20,q=d(function(){for(var a=0;a<k.length;a++)if(i(k[a].href+"")===i(f))return d.cancel(q),void n.onload();0===--p&&(d.cancel(q),n.onerror())},50,0);return m.promise}}]),angular.module("angularWidgetInternal").provider("widgetConfig",function(){function a(a){c.$root.$$phase?a():c.$apply(a)}var b={$root:{},$apply:function(a){a()},$emit:angular.noop},c=b,d={};this.setParentInjectorScope=function(a){c=a;var d=c.$on("$destroy",function(){c=b,d()})},this.setOptions=function(a){angular.copy(a,d)},this.getOptions=function(){return d},this.$get=["$log",function(b){var e={};return{exportProperties:function(b){return b&&a(function(){angular.extend(e,b),c.$emit("exportPropertiesUpdated",e)}),e},reportError:function(){a(function(){c.$emit("widgetError")||b.warn("widget reported an error")})},getOptions:function(){return d},setOptions:function(a){angular.copy(a,d)}}}]}),angular.module("angularWidgetInternal").provider("widgets",function(){var a=[],b=[],c={};this.setManifestGenerator=function(b){a.push(b)},this.addEventToForward=function(a){b=b.concat(a)},this.addServiceToShare=function(a,b){c[a]=b},this.$get=["$injector","$rootScope",function(d,e){function f(a,b,c){var d=a[b];a[b]=function(){return arguments.length>=c&&!e.$$phase&&e.$applyAsync(),d.apply(a,arguments)}}function g(a,b){var c,e=a.get("$rootScope");return b.length&&(c=e.$broadcast.apply(e,b)),e.$$phase||a===d||e.$digest(),c}var h=[],i={};return angular.forEach(c,function(a,b){var c=d.get(b);angular.isArray(a)?a.forEach(function(a){f(c,a,0)}):angular.forEach(a,function(a,b){f(c,b,a)}),i[b]=c}),a=a.map(function(a){return d.invoke(a)}),{getWidgetManifest:function(){var b=arguments;return a.reduce(function(a,c){var d=c.apply(this,b);return d&&a?a.priority>d.priority?a:d:d||a},void 0)},unregisterWidget:function(a){var b=[];if(a){var c=h.indexOf(a);-1!==c&&(b=h.splice(c,1))}else b=h,h=[];b.forEach(function(a){var b=a.get("$rootScope");b.$destroy(),b.$$childHead=b.$$childTail=null,b.$$ChildScope=null})},registerWidget:function(a){h.push(a)},notifyWidgets:function(){var a=arguments;return h.map(function(b){return g(b,a)})},getEventsToForward:function(){return b},getServicesToShare:function(){return i}}}]}),angular.module("wixAngularStorage",["wixAngular"]).constant("ANGULAR_STORAGE_PREFIX","wixAngularStorage").constant("KEY_SEPARATOR","|").constant("DEFAULT_AGE_IN_SEC",3600).constant("CLEANING_INTERVAL",6e5).constant("CLEAN_EPSILON",100).constant("MAX_KEY_LENGTH",100).constant("MAX_VALUE_SIZE_IN_BYTES",4096).constant("MAX_AGE_IN_SEC",172800).constant("MAX_STORAGE_SIZE_IN_BYTES",1048576).constant("DATA_TYPE","data").constant("ADHOC_TYPE","adhoc").constant("REMOTE_TYPE","remote").constant("wixAngularStorageErrors",{LOGGED_OUT:1,NOT_FOUND:2,RUNTIME_EXCEPTION:3,SERVER_ERROR:4,QUOTA_EXCEEDED:5}),function(){function a(a,b,c,d,e,f){function g(a){return localStorage[a]&&JSON.parse(localStorage[a])}function h(a){var b=g(a);if(b){var d=c.getRecordSize(a,b);return delete localStorage[a],d}return 0}function i(a){return a.reduce(function(a,b){return a+=h(b)},0)}function j(){return Object.keys(localStorage).filter(c.hasPrefix)}function k(a){var b={},c=Object.keys(localStorage).filter(function(b){return 0===b.indexOf(a)});return c.forEach(function(a){b[a]=g(a)}),b}function l(){return j().reduce(function(a,b){return a+c.getRecordSize(b,g(b))},0)}function m(){var a=function(a,b){return a.createdAt-b.createdAt},b=function(a){return a.key};s=[],t=[],j().forEach(function(a){var b=g(a),c=b.options.type===d?s:t;c.push({key:a,createdAt:b.createdAt})}),s.sort(a),t.sort(a),s=s.map(b),t=t.map(b)}function n(){return i(j().filter(function(a){return!c.belongsToCurrentUser(a)}))}function o(){return i(j().filter(function(a){var b=g(a);return c.isExpired(b)}))}function p(){var a=0===t.length?s:t,b=a.shift();return h(b)}function q(a){var b=a||0,c=0;c+=n(),c+=o();var d=l(),e=0;for(m();d-e>f;){var g=p();c+=g,e+=g}if(b-c>d-e)return!1;for(;b>c;)c+=p();return!0}function r(a){var c=b.defer();try{var d,e=a(function(){d=!0,c.resolve()},function(){d=!0,c.reject()});d||c.resolve(e)}catch(f){c.reject()}return c.promise}var s=[],t=[];return q(),a(function(){q()},e),{set:function(a,b){return r(function(){localStorage[a]=JSON.stringify(b)})},get:function(a){return r(function(){return g(a)})},getAllWithPrefix:function(a){return r(function(){return k(a)})},del:function(a){return r(function(){delete localStorage[a]})},clear:function(a){return r(function(b,c){q(a)?b():c()})}}}a.$inject=["$interval","$q","recordUtils","DATA_TYPE","CLEANING_INTERVAL","MAX_STORAGE_SIZE_IN_BYTES"],angular.module("wixAngularStorage").factory("cleanableStorage",a)}();var WixCache=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$q=b,this.recordUtils=c,this.cleanableStorage=d,this.wixAngularStorageErrors=e,this.DEFAULT_AGE_IN_SEC=f,this.DATA_TYPE=g,this.ADHOC_TYPE=h,this.REMOTE_TYPE=i,this.CLEAN_EPSILON=j,this.namespace=a.namespace}return a.$inject=["provider","$q","recordUtils","cleanableStorage","wixAngularStorageErrors","DEFAULT_AGE_IN_SEC","DATA_TYPE","ADHOC_TYPE","REMOTE_TYPE","CLEAN_EPSILON"],a.prototype.rejectUserNotLoggedIn=function(){return this.$q.reject(this.wixAngularStorageErrors.LOGGED_OUT)},a.prototype.rejectWithRuntimeException=function(){return this.$q.reject(this.wixAngularStorageErrors.RUNTIME_EXCEPTION)},a.prototype.tryToSet=function(a,b){var c=this,d=this.recordUtils.getCacheKey(a,b.options);return this.cleanableStorage.set(d,b).then(function(){return a},function(e){return e===c.wixAngularStorageErrors.RUNTIME_EXCEPTION?c.rejectWithRuntimeException():b.options.type===c.REMOTE_TYPE?c.$q.reject():c.cleanableStorage.clear(c.recordUtils.getRecordSize(d,b)+c.CLEAN_EPSILON).then(function(){return c.cleanableStorage.set(d,b).then(function(){return a},function(){return c.rejectWithRuntimeException()})},function(){return c.$q.reject(c.wixAngularStorageErrors.QUOTA_EXCEEDED)})})},a.prototype.withNamespace=function(a){var b=angular.extend({},{namespace:this.namespace},a);return this.recordUtils.validateNamespace(b),b},a.prototype.set=function(a,b,c){if(!this.recordUtils.isUserLoggedIn())return this.rejectUserNotLoggedIn();c=this.withNamespace(c),this.recordUtils.validateKey(a),this.recordUtils.validateData(b),this.recordUtils.validateExpiration(c);var d={createdAt:Date.now(),data:b,options:angular.extend({expiration:this.DEFAULT_AGE_IN_SEC,type:this.DATA_TYPE},c)};return this.tryToSet(a,d)},a.prototype.setWithGUID=function(a,b){void 0===b&&(b={});var c=this.recordUtils.generateRandomKey();return this.set(c,a,angular.extend({expiration:null,type:this.ADHOC_TYPE},b))},a.prototype.get=function(a,b){var c=this;return this.recordUtils.isUserLoggedIn()?(b=this.withNamespace(b),this.cleanableStorage.get(this.recordUtils.getCacheKey(a,b)).then(function(a){return a&&!c.recordUtils.isExpired(a)?a.data:c.$q.reject(c.wixAngularStorageErrors.NOT_FOUND)},function(){return c.rejectWithRuntimeException()})):this.rejectUserNotLoggedIn()},a.prototype.getAll=function(a){var b=this;return this.recordUtils.isUserLoggedIn()?(a=this.withNamespace(a),this.cleanableStorage.getAllWithPrefix(this.recordUtils.getCachePrefix(a)).then(function(a){var c=b.cachedRecords(a);return 0===Object.keys(c).length?b.$q.reject(b.wixAngularStorageErrors.NOT_FOUND):c},function(){return b.rejectWithRuntimeException()})):this.rejectUserNotLoggedIn()},a.prototype.remove=function(a,b){var c=this;return this.recordUtils.isUserLoggedIn()?(b=this.withNamespace(b),this.cleanableStorage.del(this.recordUtils.getCacheKey(a,b))["catch"](function(){return c.rejectWithRuntimeException()})):this.rejectUserNotLoggedIn()},a.prototype.cachedRecords=function(a){var b=this;return Object.keys(a).reduce(function(c,d){if(a[d]&&!b.recordUtils.isExpired(a[d])){var e=b.recordUtils.getOriginKey(d);c[e]=a[d].data}return c},{})},a}(),WixCacheProvider=function(){function a(){}return a.prototype.setNamespace=function(a){this.namespace=a},a.prototype.$get=function(a){return a.instantiate(WixCache,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("wixAngularAppInternal").provider("wixCache",WixCacheProvider);var WixStorage=function(){function a(a,b,c,d,e,f,g,h,i){this.$q=b,this.$http=c,this.recordUtils=d,this.wixCache=e,this.wixAngularStorageErrors=f,this.ANGULAR_STORAGE_PREFIX=g,this.REMOTE_TYPE=h,this.DEFAULT_AGE_IN_SEC=i,this.namespace=a.namespace}return a.$inject=["provider","$q","$http","recordUtils","wixCache","wixAngularStorageErrors","ANGULAR_STORAGE_PREFIX","REMOTE_TYPE","DEFAULT_AGE_IN_SEC"],a.prototype.rejectUserNotLoggedIn=function(){return this.$q.reject(this.wixAngularStorageErrors.LOGGED_OUT)},a.prototype.cacheRemoteData=function(a,b,c){return c.noCache?void 0:this.wixCache.set(a,b,angular.extend({},c,{type:this.REMOTE_TYPE,expiration:this.DEFAULT_AGE_IN_SEC}))},a.prototype.getUrl=function(a,b,c){return["/_api/wix-user-preferences-webapp",a,b.namespace,b.siteId,c].filter(angular.identity).join("/")},a.prototype.getRemote=function(a,b){var c=this,d=b.siteId?"getVolatilePrefForSite":"getVolatilePrefForKey",e=b.namespace,f=this.getUrl(d,b,a);return this.$http.get(f).then(function(d){return null===d.data[a]?c.rejectNotFound():(c.cacheRemoteData(a,d.data[a],b),d.data[a])},function(d){return 404===d.status?e!==c.ANGULAR_STORAGE_PREFIX?c.handleNamespaceMigration(a,b):c.rejectNotFound():c.$q.reject(c.wixAngularStorageErrors.SERVER_ERROR)})},a.prototype.getAllRemote=function(a){var b=this,c=a.siteId?"getVolatilePrefsForSite":"getVolatilePrefs",d=this.getUrl(c,a,void 0);return this.$http.get(d).then(function(c){return Object.keys(c.data).forEach(function(d){return b.cacheRemoteData(d,c.data[d],a)}),c.data})},a.prototype.handleNamespaceMigration=function(a,b){var c=this,d=angular.extend({},b,{namespace:this.ANGULAR_STORAGE_PREFIX,noCache:!0});return this.getRemote(a,d).then(function(d){return c.cacheRemoteData(a,d,b),c.set(a,d,b).then(function(){return d})},function(d){return d===c.wixAngularStorageErrors.NOT_FOUND&&c.cacheRemoteData(a,null,b),c.$q.reject(d)})},a.prototype.tryCache=function(a,b){var c=this;return this.wixCache.get(a,b).then(function(a){return a||c.rejectNotFound()},function(){return c.getRemote(a,b)})},a.prototype.tryCacheGetAll=function(a){var b=this;return this.wixCache.getAll(a).then(function(a){return a||b.rejectNotFound()},function(){return b.getAllRemote(a)})},a.prototype.rejectNotFound=function(){return this.$q.reject(this.wixAngularStorageErrors.NOT_FOUND)},a.prototype.withNamespace=function(a){var b=angular.extend({},{namespace:this.namespace},a);return this.recordUtils.validateNamespace(b),b},a.prototype.set=function(a,b,c){var d=this;if(!this.recordUtils.isUserLoggedIn())return this.rejectUserNotLoggedIn();var e=this.withNamespace(c);this.recordUtils.validateKey(a),this.recordUtils.validateData(b),this.recordUtils.validateExpiration(e);var f={nameSpace:e.namespace,key:a,blob:b};return e.siteId&&(f.siteId=e.siteId),e.expiration&&(f.TTLInDays=Math.ceil(e.expiration/86400)),this.$http.post("/_api/wix-user-preferences-webapp/set",f).then(function(){return d.cacheRemoteData(a,b,e),a})},a.prototype.get=function(a,b){if(!this.recordUtils.isUserLoggedIn())return this.rejectUserNotLoggedIn();var c=this.withNamespace(b);return c.noCache?this.getRemote(a,c):this.tryCache(a,c)},a.prototype.getAll=function(a){if(!this.recordUtils.isUserLoggedIn())return this.rejectUserNotLoggedIn();var b=this.withNamespace(a);return b.noCache?this.getAllRemote(b):this.tryCacheGetAll(b)},a.prototype.remove=function(a,b){return this.recordUtils.isUserLoggedIn()?this.set(a,null,b):this.rejectUserNotLoggedIn()},a}(),WixStorageProvider=function(){function a(){}return a.prototype.setNamespace=function(a){this.namespace=a},a.prototype.$get=function(a){return a.instantiate(WixStorage,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("wixAngularStorage").provider("wixStorage",WixStorageProvider),function(){function a(a,b,c,d,e,f){function g(a){return encodeURI(a).match(/%..|./g).length}function h(a){return a&&!!a.expiration}var i={};return i.isUserLoggedIn=function(){return void 0!==a.userGUID},i.validateKey=function(a){if("string"!=typeof a||a.length>d)throw new Error("Key length should be no more than "+d+" chars")},i.validateData=function(a){var b=JSON.stringify(a);if(g(b)>e)throw new Error("The size of passed data exceeds the allowed "+e/1024+" KB")},i.validateExpiration=function(a){if(h(a)&&("number"!=typeof a.expiration||a.expiration>f))throw new Error("Expiration should be a number and cannot increase "+f+" seconds")},i.validateNamespace=function(a){if(!a.namespace)throw new Error("namespace is required");if("string"!=typeof a.namespace)throw new Error("namespace should be a string")},i.isExpired=function(a){return h(a.options)?a.createdAt+1e3*a.options.expiration<=Date.now():!1},i.getRecordSize=function(a,b){return g(a)+g(JSON.stringify(b))},i.getCachePrefix=function(d){var e=d||{};return[b,a.userGUID,e.siteId,e.namespace].filter(angular.identity).join(c)+c},i.getCacheKey=function(a,b){return i.getCachePrefix(b)+a},i.getOriginKey=function(a){return a.split(c).pop()},i.generateRandomKey=function(){return Math.random().toString(36).slice(2)},i.hasPrefix=function(a){return 0===a.indexOf(b)},i.belongsToCurrentUser=function(b){return i.isUserLoggedIn()?b.split(c)[1]===a.userGUID:!1},i}a.$inject=["wixCookies","ANGULAR_STORAGE_PREFIX","KEY_SEPARATOR","MAX_KEY_LENGTH","MAX_VALUE_SIZE_IN_BYTES","MAX_AGE_IN_SEC"],angular.module("wixAngularStorage").factory("recordUtils",a)}(),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};
return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";!function(){var a=angular.module("angularModalService",[]);a.factory("ModalService",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(a,b,c,d,e,f,g,h,i){function j(){var e=this,j=function(a,b){var c=g.defer();return a?c.resolve(a):b?h(b,!0).then(function(a){c.resolve(a)},function(a){c.reject(a)}):c.reject("No template or templateUrl has been specified."),c.promise},k=function(b,c){var d=b.children();return d.length>0?a.enter(c,b,d[d.length-1]):a.enter(c,b)};e.showModal=function(e){var h=angular.element(b[0].body),l=g.defer(),m=e.controller;return m?(j(e.template,e.templateUrl).then(function(b){function j(b){o.resolve(b),a.leave(s).then(function(){p.resolve(b),m.$destroy(),q.close=null,l=null,o=null,v=null,q=null,s=null,m=null}),n&&n()}var m=(e.scope||f).$new(),n=f.$on("$locationChangeSuccess",j),o=g.defer(),p=g.defer(),q={$scope:m,close:function(a,b){(void 0===b||null===b)&&(b=0),i(function(){j(a)},b)}};e.inputs&&angular.extend(q,e.inputs);var r=c(b),s=r(m);q.$element=s;var t=m[e.controllerAs],u=d(e.controller,q,!1,e.controllerAs);e.controllerAs&&t&&angular.extend(u,t),e.appendElement?k(e.appendElement,s):k(h,s);var v={controller:u,scope:m,element:s,close:o.promise,closed:p.promise};l.resolve(v)}).then(null,function(a){l.reject(a)}),l.promise):(l.reject("No controller has been specified."),l.promise)}}return new j}])}()}]),angular.module("dealerCmsTemplatesAppInternal",[]),angular.module("dealerCmsTemplatesApp",["dealerCmsTemplatesAppInternal","wixAngular","angularTestTranslations"]).config(function(){});try{angular.module("angularTestTranslations")}catch(e){angular.module("angularTestTranslations",[])}angular.module("angularTestTranslations").run(["$templateCache",function(a){"use strict";a.put("modules/templates/cms-banner-template/cms-banner-template.html",'<div data-hook="cms-banner-template"\n     class="cms-banner-template extra-editor-styling"\n     dealer-click="$ctrl.getAction()">\n  <div class="white-bg-container"\n       ng-style="$ctrl.getContainerStyles()">\n    <div class="zone-container">\n      <cms-element data-hook="cms-element"\n                   main-controller="main"\n                   ng-repeat="item in $ctrl.mainZoneItems"\n                   data="item"\n                   class="cms-element-styling"></cms-element>\n      <add-zone class="add-item-zone add-zone" types="::$ctrl.getAddZoneMenuTypes()" zone="\'Zone_main\'"></add-zone>\n    </div>\n  </div>\n</div>')}]);var CmsBannerTemplate=function(){function a(a){this.clickAction=a}return a.$inject=["clickAction"],a.prototype.$onInit=function(){this.bannerTemplate=this.bannerData.bannerTemplate,this.mainZoneItems=this.bannerTemplate.Zone_main.items},a.prototype.getAction=function(){return this.chachedAction=this.chachedAction||{biPramas:this.clickAction.getBiParams({clickActionName:"metaSiteDependent",clickActionParams:this.bannerTemplate.pageSetting}),clickActionFunction:this.clickAction.doClickAction,functionParams:{clickActionName:"metaSiteDependent",clickActionParams:this.bannerTemplate.pageSetting}},this.chachedAction},a.prototype.getAddZoneMenuTypes=function(){return"li-image,li-text,li-video"},a.prototype.getContainerStyles=function(){return{height:this.bannerTemplate.pageSetting.bannerHeight+"px",width:this.bannerTemplate.pageSetting.bannerWidth+"px",backgroundColor:""+this.bannerTemplate.pageSetting.backgroundColor}},a}();angular.module("dealerCmsTemplatesApp").component("cmsBannerTemplate",{templateUrl:"modules/templates/cms-banner-template/cms-banner-template.html",controller:CmsBannerTemplate,bindings:{bannerData:"="}});try{angular.module("angularTestTranslations")}catch(e){angular.module("angularTestTranslations",[])}angular.module("angularTestTranslations").run(["$templateCache",function(a){"use strict";a.put("modules/templates/banner-template/banner-template.html",'<div data-hook="banner-template" class="banner-template extra-editor-styling">\n  <div class="white-bg-container" ng-style="$ctrl.getContainerStyles()">\n    <div class="zone-container">\n      <cms-element data-hook="cms-element"\n                   main-controller="main"\n                   ng-repeat="item in $ctrl.mainZoneItems"\n                   data="item"\n                   class="cms-element-styling"></cms-element>\n      <add-zone class="add-item-zone add-zone" types="::$ctrl.getAddZoneMenuTypes()" zone="\'Zone_main\'"></add-zone>\n    </div>\n  </div>\n</div>')}]);var BannerTemplate=function(){function a(){}return a.prototype.$onInit=function(){this.bannerTemplate=this.bannerData.bannerTemplate,this.mainZoneItems=this.bannerTemplate.Zone_main.items},a.prototype.getContainerStyles=function(){return{height:this.bannerTemplate.pageSetting.bannerHeight+"px",width:this.bannerTemplate.pageSetting.bannerWidth+"px",backgroundColor:""+this.bannerTemplate.pageSetting.backgroundColor}},a.prototype.getAddZoneMenuTypes=function(){return"li-cms-button,li-image,li-text,li-video"},a}();angular.module("dealerCmsTemplatesApp").component("bannerTemplate",{templateUrl:"modules/templates/banner-template/banner-template.html",controller:BannerTemplate,bindings:{bannerData:"="}});try{angular.module("angularTestTranslations")}catch(e){angular.module("angularTestTranslations",[])}angular.module("angularTestTranslations").run(["$templateCache",function(a){"use strict";a.put("modules/templates/interactive-template/interactive-template.html",'<div data-hook="interactive-template" class="interactive-template extra-editor-styling">\n  <div class="white-bg-container" ng-style="$ctrl.getContainerStyles()">\n    <div class="zone-container">\n      <cms-element data-hook="cms-element"\n                   main-controller="main"\n                   ng-repeat="item in $ctrl.mainZoneItems"\n                   data="item"\n                   class="cms-element-styling"></cms-element>\n      <add-zone class="add-item-zone add-zone" types="::$ctrl.getAddZoneMenuTypes()" zone="\'Zone_main\'"></add-zone>\n    </div>\n  </div>\n</div>')}]);var InteractiveTemplate=function(){function a(a){this.pageSettings=a}return a.$inject=["pageSettings"],a.prototype.$onInit=function(){this.bannerTemplate=this.bannerData.bannerTemplate,this.mainZoneItems=this.bannerTemplate.Zone_main.items},a.prototype.getContainerStyles=function(){return{height:this.getPageSettingWithSuffix("bannerHeight","px"),width:this.getPageSettingWithSuffix("bannerWidth","px"),backgroundColor:this.getPageSettingWithSuffix("backgroundColor","")}},a.prototype.getPageSettingWithSuffix=function(a,b){var c=this.pageSettings.getSettingValue(a);return void 0!==c?""+c+b:void 0},a.prototype.getAddZoneMenuTypes=function(){return"li-cms-button,li-image,li-text,li-video"},a}();angular.module("dealerCmsTemplatesApp").component("interactiveTemplate",{templateUrl:"modules/templates/interactive-template/interactive-template.html",controller:InteractiveTemplate,bindings:{bannerData:"="}});try{angular.module("angularTestTranslations")}catch(e){angular.module("angularTestTranslations",[])}angular.module("angularTestTranslations").run(["$templateCache",function(a){"use strict";a.put("modules/templates/react-template/react-template.html",'<div data-hook="react-template" class="react-template extra-editor-styling">\n  <div class="white-bg-container" ng-style="$ctrl.getContainerStyles()">\n    <div class="zone-container">\n      <cms-element data-hook="cms-element"\n                   main-controller="main"\n                   ng-repeat="item in $ctrl.mainZoneItems"\n                   data="item"\n                   class="cms-element-styling"></cms-element>\n      <add-zone class="add-item-zone add-zone" types="::$ctrl.getAddZoneMenuTypes()" zone="\'Zone_main\'"></add-zone>\n    </div>\n  </div>\n</div>')}]);var ReactTemplate=function(){function a(a){this.pageSettings=a}return a.$inject=["pageSettings"],a.prototype.$onInit=function(){this.bannerTemplate=this.bannerData.bannerTemplate,this.mainZoneItems=this.bannerTemplate.Zone_main.items},a.prototype.getContainerStyles=function(){return{height:this.getPageSettingWithSuffix("bannerHeight","px"),width:this.getPageSettingWithSuffix("bannerWidth","px"),backgroundColor:this.getPageSettingWithSuffix("backgroundColor","")}},a.prototype.getPageSettingWithSuffix=function(a,b){var c=this.pageSettings.getSettingValue(a);return void 0!==c?""+c+b:void 0},a.prototype.getAddZoneMenuTypes=function(){return"li-cms-button,li-image,li-text,li-video"},a}();angular.module("dealerCmsTemplatesApp").component("reactTemplate",{templateUrl:"modules/templates/react-template/react-template.html",controller:ReactTemplate,bindings:{bannerData:"="}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},ClickAction=function(){function a(b,c){var d=this;this.dealerDataStore=b,this.$window=c,this.doClickAction=function(a){return d.preformClick(a.clickActionName,a.clickActionParams),"emitCloseTrigger"},this.getBiParams=function(a){return d.actionTypeLogic[a.clickActionName].biParams(a)},this.createCloseLightboxBiParams=function(a){return{clickType:a.clickActionParams.abTest}},this.createMetaSiteDependantBiParams=function(a){return{clickType:a.clickActionParams.abTest,additionalLogParams:{targetUrl:d.parseMetaSiteDependantUrl(a.clickActionParams)}}},this.createDynamicUrlBiParams=function(a){return{clickType:a.clickActionParams.abTest,additionalLogParams:{targetUrl:d.parseDynamicUrl(a.clickActionParams)}}},this.getClickParams=function(a){return d.actionTypeLogic[a]?d.actionTypeLogic[a].clickParams:["abTest"]},this.preformClick=function(a,b){return d.actionTypeLogic[a]&&d.actionTypeLogic[a].parserFunction?d.goToUrl(b,d.actionTypeLogic[a].parserFunction):void 0},this.parseDynamicUrl=function(b){var c=d.createParseObject(__assign({refferalInfo:d.dealerDataStore.getBannerRoot().bannerPosition,metaSiteId:d.dealerDataStore.getMetaSiteId()},b,d.dealerDataStore.getDealerOptions())),e=c.defaultUrl;return Object.keys(c).map(function(a){e=e.replace("{{"+a+"}}",""+c[a])}),e.match(/({|})/g)&&a.throwError(e),e},this.parseMetaSiteDependantUrl=function(a){var b=a[d.dealerDataStore.getMetaSiteId()?"metaSiteUrl":"defaultUrl"]||"";return b=b.replace("###METASITE###",d.dealerDataStore.getMetaSiteId()),b=b.replace("###REFFERAL-INFO###",d.dealerDataStore.getBannerRoot().bannerPosition)},this.goToUrl=function(a,b){a.isOpenInNewTab?d.$window.open(b(a)):d.$window.top.location.href=b(a)},this.actionTypeLogic={metaSiteDependent:{clickParams:["metaSiteUrl","defaultUrl","abTest","isOpenInNewTab"],parserFunction:this.parseMetaSiteDependantUrl,biParams:this.createMetaSiteDependantBiParams},dynamicUrl:{clickParams:["defaultUrl","isOpenInNewTab","abTest"],parserFunction:this.parseDynamicUrl,biParams:this.createDynamicUrlBiParams},closeLightbox:{clickParams:["abTest"],biParams:this.createCloseLightboxBiParams}}}return a.$inject=["dealerDataStore","$window"],a.prototype.createParseObject=function(a){var b=__assign({},a);return Object.keys(b).filter(function(a){return void 0===b[a]||""===b[a]}).forEach(function(a){return delete b[a]}),b},a.throwError=function(a){var b=/\{\{\w+\}\}/gi,c=a.match(b);throw new Error("Did not parse parameters in Click Action: "+c.toString())},a}();angular.module("dealerCmsTemplatesAppInternal").service("clickAction",ClickAction);var TemplateLocalisation=function(){function a(){}return a.prototype.init=function(a,b){this.setterCallback=b,this.getterCallback=a},a.prototype.getProperty=function(a){return this.getterCallback(a)},a.prototype.setProperty=function(a){return this.setterCallback(a)},a}();angular.module("dealerCmsTemplatesAppInternal").service("templateLocalisation",TemplateLocalisation),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.printStackTrace=b()}(this,function(){function a(b){b=b||{guess:!0};var c=b.e||null,d=!!b.guess,e=b.mode||null,f=new a.implementation,g=f.run(c,e);return d?f.guessAnonymousFunctions(g):g}return a.implementation=function(){},a.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return"undefined"!=typeof window&&window.navigator.userAgent.indexOf("PhantomJS")>-1?"phantomjs":a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":a.stack&&a.fileName?"firefox":a.message&&a["opera#sourceloc"]?a.stacktrace?a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":a.message&&a.stack&&a.stacktrace?a.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":a.stack&&!a.fileName?"chrome":"other"},instrumentFunction:function(b,c,d){b=b||window;var e=b[c];b[c]=function(){return d.call(this,a().slice(4)),b[c]._instrumented.apply(this,arguments)},b[c]._instrumented=e},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){return(a.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(a){for(var b="{anonymous}",c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[4]+":"+h[1]+":"+h[2],j=h[3]||"global code";j=j.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,b),e.push(j+"@"+i+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera10b:function(a){for(var b=/^(.*)@(.+):(\d+)$/,c=a.stacktrace.split("\n"),d=[],e=0,f=c.length;f>e;e++){var g=b.exec(c[e]);if(g){var h=g[1]?g[1]+"()":"global code";d.push(h+"@"+g[2]+":"+g[3])}}return d},opera10a:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[3]||b;e.push(i+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera9:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)/i,d=a.message.split("\n"),e=[],f=2,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(b+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}return e},phantomjs:function(a){for(var b="{anonymous}",c=/(\S+) \((\S+)\)/i,d=a.stack.split("\n"),e=[],f=1,g=d.length;g>f;f++){d[f]=d[f].replace(/^\s+at\s+/gm,"");var h=c.exec(d[f]);h?e.push(h[1]+"()@"+h[2]):e.push(b+"()@"+d[f])}return e},other:function(a){for(var b,c,d="{anonymous}",e=/function(?:\s+([\w$]+))?\s*\(/,f=[],g=10,h=Array.prototype.slice;a&&f.length<g;){b=e.test(a.toString())?RegExp.$1||d:d;try{c=h.call(a.arguments||[])}catch(i){c=["Cannot access arguments: "+i]}f[f.length]=b+"("+this.stringifyArguments(c)+")";try{a=a.caller}catch(i){f[f.length]="Cannot access caller: "+i;break}}return f},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var e=a[d];void 0===e?b[d]="undefined":null===e?b[d]="null":e.constructor&&(e.constructor===Array?e.length<3?b[d]="["+this.stringifyArguments(e)+"]":b[d]="["+this.stringifyArguments(c.call(e,0,1))+"..."+this.stringifyArguments(c.call(e,-1))+"]":e.constructor===Object?b[d]="#object":e.constructor===Function?b[d]="#function":e.constructor===String?b[d]='"'+e+'"':e.constructor===Number?b[d]=e:b[d]="?")}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return"undefined"!=typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/\{anonymous\}\(.*\)@(.*)/,d=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,e=a[b],f=c.exec(e);if(f){var g=d.exec(f[1]);if(g){var h=g[1],i=g[2],j=g[3]||0;if(h&&this.isSameDomain(h)&&i){var k=this.guessAnonymousFunction(h,i,j);a[b]=e.replace("{anonymous}",k)}}}}return a},guessAnonymousFunction:function(a,b,c){var d;try{d=this.findFunctionName(this.getSource(a),b)}catch(e){d="getSource failed with url: "+a+", exception: "+e.toString()}return d},findFunctionName:function(a,b){for(var c,d,e,f=/function\s+([^(]*?)\s*\(([^)]*)\)/,g=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,h=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,i="",j=Math.min(b,20),k=0;j>k;++k)if(c=a[b-k-1],e=c.indexOf("//"),e>=0&&(c=c.substr(0,e)),c){if(i=c+i,d=g.exec(i),d&&d[1])return d[1];if(d=f.exec(i),d&&d[1])return d[1];if(d=h.exec(i),d&&d[1])return d[1]}return"(?)"}},a}),!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("scrollMonitor",[],b):"object"==typeof exports?exports.scrollMonitor=b():a.scrollMonitor=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=d.isInBrowser,f=c(2),g=new f(e?document.body:null);g.setStateFromDOM(null),g.listenToDOM(),e&&(window.scrollMonitor=g),a.exports=g},function(a,b){"use strict";b.VISIBILITYCHANGE="visibilityChange",b.ENTERVIEWPORT="enterViewport",b.FULLYENTERVIEWPORT="fullyEnterViewport",b.EXITVIEWPORT="exitViewport",b.PARTIALLYEXITVIEWPORT="partiallyExitViewport",b.LOCATIONCHANGE="locationChange",b.STATECHANGE="stateChange",b.eventTypes=[b.VISIBILITYCHANGE,b.ENTERVIEWPORT,b.FULLYENTERVIEWPORT,b.EXITVIEWPORT,b.PARTIALLYEXITVIEWPORT,b.LOCATIONCHANGE,b.STATECHANGE],b.isOnServer="undefined"==typeof window,b.isInBrowser=!b.isOnServer,b.defaultOffsets={top:0,bottom:0}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return i?0:a===document.body?window.innerHeight||document.documentElement.clientHeight:a.clientHeight}function f(a){return i?0:a===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):a.scrollHeight}function g(a){return i?0:a===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop}var h=c(1),i=h.isOnServer,j=h.isInBrowser,k=h.eventTypes,l=c(3),m=!1;if(j)try{var n=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,n)}catch(a){}var o=!!m&&{capture:!1,passive:!0},p=function(){function a(b,c){function h(){if(j.viewportTop=g(b),j.viewportBottom=j.viewportTop+j.viewportHeight,j.documentHeight=f(b),j.documentHeight!==l){for(m=j.watchers.length;m--;)j.watchers[m].recalculateLocation();l=j.documentHeight}}function i(){for(n=j.watchers.length;n--;)j.watchers[n].update();for(n=j.watchers.length;n--;)j.watchers[n].triggerCallbacks()}d(this,a);var j=this;this.item=b,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=f(b),this.viewportHeight=e(b),this.DOMListener=function(){a.prototype.DOMListener.apply(j,arguments)},this.eventTypes=k,c&&(this.containerWatcher=c.create(b));var l,m,n;this.update=function(){h(),i()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return a.prototype.listenToDOM=function(){j&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener,o):this.item.addEventListener("scroll",this.DOMListener,o),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener,o),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener,o),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},a.prototype.destroy=function(){},a.prototype.DOMListener=function(a){this.setStateFromDOM(a)},a.prototype.setStateFromDOM=function(a){var b=g(this.item),c=e(this.item),d=f(this.item);this.setState(b,c,d,a)},a.prototype.setState=function(a,b,c,d){var e=b!==this.viewportHeight||c!==this.contentHeight;if(this.latestEvent=d,this.viewportTop=a,this.viewportHeight=b,this.viewportBottom=a+b,this.contentHeight=c,e)for(var f=this.watchers.length;f--;)this.watchers[f].recalculateLocation();this.updateAndTriggerWatchers(d)},a.prototype.updateAndTriggerWatchers=function(a){for(var b=this.watchers.length;b--;)this.watchers[b].update();for(b=this.watchers.length;b--;)this.watchers[b].triggerCallbacks(a)},a.prototype.createCustomContainer=function(){return new a},a.prototype.createContainer=function(b){"string"==typeof b?b=document.querySelector(b):b&&b.length>0&&(b=b[0]);var c=new a(b,this);return c.setStateFromDOM(),c.listenToDOM(),c},a.prototype.create=function(a,b){"string"==typeof a?a=document.querySelector(a):a&&a.length>0&&(a=a[0]);var c=new l(this,a,b);return this.watchers.push(c),c},a.prototype.beget=function(a,b){return this.create(a,b)},a}();a.exports=p},function(a,b,c){"use strict";function d(a,b,c){function d(a,b){if(0!==a.length)for(u=a.length;u--;)v=a[u],v.callback.call(e,b,e),v.isOne&&a.splice(u,1)}var e=this;this.watchItem=b,this.container=a,c?c===+c?this.offsets={top:c,bottom:c}:this.offsets={top:c.top||n.top,bottom:c.bottom||n.bottom}:this.offsets=n,this.callbacks={};for(var o=0,p=m.length;p>o;o++)e.callbacks[m[o]]=[];this.locked=!1;var q,r,s,t,u,v;this.triggerCallbacks=function(a){switch(this.isInViewport&&!q&&d(this.callbacks[g],a),this.isFullyInViewport&&!r&&d(this.callbacks[h],a),this.isAboveViewport!==s&&this.isBelowViewport!==t&&(d(this.callbacks[f],a),r||this.isFullyInViewport||(d(this.callbacks[h],a),d(this.callbacks[j],a)),q||this.isInViewport||(d(this.callbacks[g],a),d(this.callbacks[i],a))),!this.isFullyInViewport&&r&&d(this.callbacks[j],a),!this.isInViewport&&q&&d(this.callbacks[i],a),this.isInViewport!==q&&d(this.callbacks[f],a),!0){case q!==this.isInViewport:case r!==this.isFullyInViewport:case s!==this.isAboveViewport:case t!==this.isBelowViewport:d(this.callbacks[l],a)}q=this.isInViewport,r=this.isFullyInViewport,s=this.isAboveViewport,t=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var a=this.top,b=this.bottom;if(this.watchItem.nodeName){var c=this.watchItem.style.display;"none"===c&&(this.watchItem.style.display="");for(var e=0,f=this.container;f.containerWatcher;)e+=f.containerWatcher.top-f.containerWatcher.container.viewportTop,f=f.containerWatcher.container;var g=this.watchItem.getBoundingClientRect();this.top=g.top+this.container.viewportTop-e,this.bottom=g.bottom+this.container.viewportTop-e,"none"===c&&(this.watchItem.style.display=c)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===a&&void 0===b||this.top===a&&this.bottom===b||d(this.callbacks[k],null)}},this.recalculateLocation(),this.update(),q=this.isInViewport,r=this.isFullyInViewport,s=this.isAboveViewport,t=this.isBelowViewport}var e=c(1),f=e.VISIBILITYCHANGE,g=e.ENTERVIEWPORT,h=e.FULLYENTERVIEWPORT,i=e.EXITVIEWPORT,j=e.PARTIALLYEXITVIEWPORT,k=e.LOCATIONCHANGE,l=e.STATECHANGE,m=e.eventTypes,n=e.defaultOffsets;d.prototype={on:function(a,b,c){switch(!0){case a===f&&!this.isInViewport&&this.isAboveViewport:case a===g&&this.isInViewport:case a===h&&this.isFullyInViewport:case a===i&&this.isAboveViewport&&!this.isInViewport:case a===j&&this.isInViewport&&this.isAboveViewport:if(b.call(this,this.container.latestEvent,this),c)return}if(!this.callbacks[a])throw new Error("Tried to add a scroll monitor listener of type "+a+". Your options are: "+m.join(", "));this.callbacks[a].push({callback:b,isOne:c||!1})},off:function(a,b){if(!this.callbacks[a])throw new Error("Tried to remove a scroll monitor listener of type "+a+". Your options are: "+m.join(", "));for(var c,d=0;c=this.callbacks[a][d];d++)if(c.callback===b){this.callbacks[a].splice(d,1);break}},one:function(a,b){this.on(a,b,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var a=this.container.watchers.indexOf(this),b=this;this.container.watchers.splice(a,1);for(var c=0,d=m.length;d>c;c++)b.callbacks[m[c]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var o=function(a){return function(b,c){this.on.call(this,a,b,c)}},p=0,q=m.length;q>p;p++){var r=m[p];d.prototype[r]=o(r)}a.exports=d}])}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("data-capsule",[],b):"object"==typeof exports?exports["data-capsule"]=b():a["data-capsule"]=b()}("undefined"!=typeof self?self:this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||b.p,b(b.s=27)}([function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=this;d(this,a),["setItem","getItem","removeItem","getAllItems"].forEach(function(c){if(b[c]===a.prototype[c])throw new Error("BaseStorage method ["+c+"] must be overriden!")})}return e(a,[{key:"setItem",value:function(a,b,c){throw c}},{key:"getItem",value:function(a,b){throw b}},{key:"removeItem",value:function(a,b){throw b}},{key:"getAllItems",value:function(a){throw a}}],[{key:"verify",value:function(b){if(b instanceof a)return b;throw new Error("This class must extend BaseStorage!")}}]),a}();a.exports=f},function(a,b,c){"use strict";function d(a){return Object.values(e).find(function(b){return b.message===a})||a}var e={NOT_FOUND:new Error("Key was not found in capsule"),SERVER_ERROR:new Error("Failed to perform operarion on server")};a.exports={PREFIX_SEPARATOR:"|",KEY_SEPARATOR:"#",STORAGE_PREFIX:"capsule",NOT_FOUND:e.NOT_FOUND,CONNECTION_MAX_TIMEOUT:2e3,MESSAGE_MAX_TIMEOUT:8e3,SERVER_ERROR:e.SERVER_ERROR,toError:d}},function(a,b,c){"use strict";function d(a){return"[object Array]"===y.call(a)}function e(a){return"[object ArrayBuffer]"===y.call(a)}function f(a){return"undefined"!=typeof FormData&&a instanceof FormData}function g(a){var b;return b="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer&&a.buffer instanceof ArrayBuffer}function h(a){return"string"==typeof a}function i(a){return"number"==typeof a}function j(a){return"undefined"==typeof a}function k(a){return null!==a&&"object"==typeof a}function l(a){return"[object Date]"===y.call(a)}function m(a){return"[object File]"===y.call(a)}function n(a){return"[object Blob]"===y.call(a)}function o(a){return"[object Function]"===y.call(a)}function p(a){return k(a)&&o(a.pipe)}function q(a){return"undefined"!=typeof URLSearchParams&&a instanceof URLSearchParams}function r(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function s(){return"undefined"!=typeof navigator&&"ReactNative"===navigator.product?!1:"undefined"!=typeof window&&"undefined"!=typeof document}function t(a,b){if(null!==a&&"undefined"!=typeof a)if("object"==typeof a||d(a)||(a=[a]),d(a))for(var c=0,e=a.length;e>c;c++)b.call(null,a[c],c,a);else for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&b.call(null,a[f],f,a)}function u(){function a(a,c){"object"==typeof b[c]&&"object"==typeof a?b[c]=u(b[c],a):b[c]=a}for(var b={},c=0,d=arguments.length;d>c;c++)t(arguments[c],a);return b}function v(a,b,c){return t(b,function(b,d){c&&"function"==typeof b?a[d]=w(b,c):a[d]=b}),a}var w=c(22),x=c(32),y=Object.prototype.toString;a.exports={isArray:d,isArrayBuffer:e,isBuffer:x,isFormData:f,isArrayBufferView:g,isString:h,isNumber:i,isObject:k,isUndefined:j,isDate:l,isFile:m,isBlob:n,isFunction:o,isStream:p,isURLSearchParams:q,isStandardBrowserEnv:s,forEach:t,merge:u,extend:v,trim:r}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.parseConnectionMessage=b.constructConnectionMessage=b.parseChannelMessage=b.constructChannelMessage=void 0;var d=c(4);b.constructChannelMessage=function(a,b){return b?b+d.messageDelimiter+a:a},b.parseChannelMessage=function(a){var b=a.indexOf(d.messageDelimiter);if(-1===b)return{id:null,payload:a};var c=a.slice(0,b),e=a.slice(b+1);return{id:c,payload:e}},b.constructConnectionMessage=function(a){return d.connectionRequestMsg+d.messageDelimiter+a},b.parseConnectionMessage=function(a){var b=a.indexOf(d.messageDelimiter);if(-1===b||a.slice(0,b)!==d.connectionRequestMsg)throw new Error("Invalid connection message");var c=a.slice(b+1);return c}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.connectionRequestMsg="req_con",b.connectionSuccessMsg="connection_success",b.messageDelimiter="|",b.deafultConnectionMaxTimeout=200,b.deafultMessageMaxTimeout=5e3},function(a,b,c){"use strict";function d(a,b,c){var d=a.split(b,c);if(d.length===c){var e=0;e="string"==typeof b?d.join(b).length:d.reduce(function(d,e,f){var g=0;return c>f+1&&(g=a.slice(d).match(b).shift().length),d+e.length+g},0),d[c-1]+=a.slice(e)}return d}a.exports=d;
},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){return h(b)+a}function h(a){return[o,a.namespace,a.scope].filter(function(a){return a}).join(p)+q}function i(a,b){return JSON.stringify({lastUsed:Date.now(),createdAt:b.createdAt||Date.now(),expiration:b.expiration,value:a})}function j(a,b){var c=b.expiration,d=b.createdAt;localStorage.setItem(a,i(b.value,{expiration:c,createdAt:d}))}var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=c(0),m=c(13),n=c(1),o=n.STORAGE_PREFIX,p=n.PREFIX_SEPARATOR,q=n.KEY_SEPARATOR,r=n.NOT_FOUND,s=c(7),t=s.getCacheRecords,u=s.deserializeData,v=s.isExpired,w=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),k(b,[{key:"setItem",value:function(a,b,c){a=g(a,c),b=i(b,c);try{localStorage.setItem(a,b)}catch(d){m(a.length+b.length),localStorage.setItem(a,b)}return Promise.resolve()}},{key:"getItem",value:function(a,b){var c=g(a,b),d=localStorage.getItem(c);return d=d&&u(d),d&&!v(d)?(j(c,d),Promise.resolve(d.value)):Promise.reject(r)}},{key:"removeItem",value:function(a,b){return a=g(a,b),localStorage.removeItem(a),Promise.resolve()}},{key:"getAllItems",value:function(a){var b=h(a),c={};return t(b).forEach(function(a){v(a)||(c[a.key]=a.value)}),Promise.resolve(c)}}]),b}(l);a.exports=w},function(a,b,c){"use strict";function d(a){var b=a.split(l),c=h(b,2),d=c[0],e=c[1],f=d.split(k),g=h(f,3),i=g[1],j=g[2];return void 0===j?{namespace:i,key:e}:{namespace:i,scope:j,key:e}}function e(a){return JSON.parse(a)}function f(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j+k,b=[],c=0;c<localStorage.length;c++){var f=localStorage.key(c);if(f.startsWith(a)){var g=localStorage.getItem(f);b.push(Object.assign({size:f.length+g.length,originalKey:f},e(g),d(f)))}}return b}function g(a){return a.expiration?a.createdAt+1e3*a.expiration<=Date.now():!1}var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=c(1),j=i.STORAGE_PREFIX,k=i.PREFIX_SEPARATOR,l=i.KEY_SEPARATOR;a.exports={deserializeData:e,getCacheRecords:f,isExpired:g}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){if(!a.namespace)throw new Error("namespace is required");if("string"!=typeof a.namespace)throw new Error("namespace should be a string")}function h(a,b){return b=Object.assign({},a,b),g(b),b}var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(0),k=function(a){function b(a){var c=a.strategy,f=a.namespace,g=a.scope;d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return h.storageStrategy=j.verify(c),h._options={namespace:f,scope:g},h}return f(b,a),i(b,[{key:"setItem",value:function(a,b,c){return c=h(this._options,c),this.storageStrategy.setItem(a,b,c)}},{key:"getItem",value:function(a,b){return b=h(this._options,b),this.storageStrategy.getItem(a,b)}},{key:"removeItem",value:function(a,b){return b=h(this._options,b),this.storageStrategy.removeItem(a,b)}},{key:"getAllItems",value:function(a){return a=h(this._options,a),this.storageStrategy.getAllItems(a)}}]),b}(j);a.exports=k},function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(10),i=c(5),j=c(0),k=c(6),l=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k;e(this,a),this.storageStrategy=j.verify(b),this.stopListener}return g(a,[{key:"start",value:function(a,b){function c(c,g){if("string"==typeof c.data){var h=i(c.data,"|",3),j=f(h,3),k=j[0],l=j[1],m=j[2],n=function(a,b){if("resolve"===a){var c=[a,JSON.stringify({data:b})].join("|");return g(c)}var d=[a,b].join("|");return g(d)};if(!a(c.source,c.origin,k))return n("reject",new Error("message was not authorized"));var o=e[l].bind(e),p=JSON.parse(m).data,q=p[p.length-1],r=b?b(q,c.source,c.origin,k):q;return p[p.length-1]=r,o.apply(void 0,d(p)).then(function(a){return n("resolve",a)})["catch"](function(a){return n("reject",a.message||a)})}}if(!a||"function"!=typeof a)throw new Error("start function must get a verifier function as a first argument");if(b&&"function"!=typeof b)throw new Error("the interceptor must be a function");var e=j.verify(this.storageStrategy);this.stopListener=h("data-capsule",c)}},{key:"stop",value:function(){this.stopListener&&this.stopListener()}}]),a}();a.exports=l},function(a,b,c){a.exports=c(11)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){try{return j.parseConnectionMessage(a)===b}catch(c){return!1}}function f(a){try{return a.ports[0]}catch(a){}}function g(a){a.postMessage(i.connectionSuccessMsg)}function h(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;if(!a||"string"!=typeof a)throw new Error("listener function expects to recieve a scope<string> as a first argument");var c=function(c){if(e(c.data,a)){var d=f(c);d&&(g(d),l["default"](d,b))}};return window.addEventListener("message",c),function(){return window.removeEventListener("message",c)}}var i=c(4),j=c(3),k=c(12),l=d(k),m=function(){};a.exports=h},function(a,b,c){"use strict";function d(a,b){a.onmessage=function(c){var d=c.data,f=e.parseChannelMessage(d),g=f.id,h=f.payload,i=function(b){a.postMessage(e.constructChannelMessage(b,g))},j={data:h,origin:c.origin,lastEventId:c.lastEventId,source:c.source,ports:c.ports};b(j,i)}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(3)},function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.records[0];return localStorage.removeItem(b.originalKey),{records:b===a.records[0]?a.records.slice(1):a.records.filter(function(a){var c=a.originalKey;return c!==b.originalKey}),requiredSpace:a.requiredSpace-b.size}}function e(a){var b=a.records.filter(function(a){return l(a)});return b.forEach(function(b){return a=d(a,b)}),a}function f(a,b){return a.lastUsed-b.lastUsed}function g(a){return a.records.length>0&&a.requiredSpace>0}function h(a){for(a.records.sort(f);g(a);)a=d(a);return a}function i(a){var b={records:k(),requiredSpace:a};b=e(b),h(b)}var j=c(7),k=j.getCacheRecords,l=j.isExpired;a.exports=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(5),j=c(15),k=c(0),l=c(1),m=l.CONNECTION_MAX_TIMEOUT,n=l.MESSAGE_MAX_TIMEOUT,o=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.target=a,g.origin=c,g.token=f,g.channel,g}return f(b,a),h(b,[{key:"getChannel",value:function(){var a=this;return this.channel?Promise.resolve(this.channel):j("data-capsule",{target:this.target,origin:this.origin,connectionMaxTimeout:m,messageMaxTimeout:n}).then(function(b){return a.channel=b,b})}},{key:"sendCommand",value:function(a,b){var c=this,d={data:b};return this.getChannel().then(function(b){var e=[c.token,a,JSON.stringify(d)].join("|");return b(e).then(function(a){var b=i(a.data,"|",2),c=g(b,2),d=c[0],e=c[1];if("reject"===d)throw e;return JSON.parse(e).data})})}},{key:"setItem",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return this.sendCommand("setItem",b)}},{key:"getItem",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return this.sendCommand("getItem",b)}},{key:"removeItem",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return this.sendCommand("removeItem",b)}},{key:"getAllItems",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return this.sendCommand("getAllItems",b)}}]),b}(k);a.exports=o},function(a,b,c){a.exports=c(16)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.targetOrigin,d=void 0===c?"*":c,e=b.connectionMaxTimeout,h=void 0===e?f.deafultConnectionMaxTimeout:e,j=b.messageMaxTimeout,k=void 0===j?f.deafultMessageMaxTimeout:j;return new Promise(function(b,c){setTimeout(function(){c(new Error("max timeout of "+h+"ms exceeded"))},h);var e=new window.MessageChannel;e.port1.onmessage=function(a){return a.data===f.connectionSuccessMsg?b(i["default"](e.port1,{messageMaxTimeout:k})):void c(new Error("connection could not establise"))};var j=g.constructConnectionMessage(a);window.parent.postMessage(j,d,[e.port2])})}var f=c(4),g=c(3),h=c(17),i=d(h);a.exports=e},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=b.messageMaxTimeout,d={};return a.onmessage=function(a){var b=f.parseChannelMessage(a.data),c=b.id,e=b.payload;if(d[c]){var g={data:e,origin:a.origin,lastEventId:a.lastEventId,source:a.source,ports:a.ports};d[c](g)}},function(b,e){return new Promise(function(g,i){setTimeout(function(){i(new Error("max timeout of "+c+"ms exceeded"))},c);var j=h["default"](),k=f.constructChannelMessage(b,j);return d[j]=g,a.postMessage(k,e)})}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(3),g=c(18),h=d(g)},function(a,b,c){function d(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"===a?new Array(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,b)for(var h=0;16>h;++h)b[d+h]=g[h];return b||f(g)}var e=c(19),f=c(20);a.exports=d},function(a,b){var c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(c){var d=new Uint8Array(16);a.exports=function(){return c(d),d}}else{var e=new Array(16);a.exports=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),e[b]=a>>>((3&b)<<3)&255;return e}}},function(a,b){function c(a,b){var c=b||0,e=d;return[e[a[c++]],e[a[c++]],e[a[c++]],e[a[c++]],"-",e[a[c++]],e[a[c++]],"-",e[a[c++]],e[a[c++]],"-",e[a[c++]],e[a[c++]],"-",e[a[c++]],e[a[c++]],e[a[c++]],e[a[c++]],e[a[c++]],e[a[c++]]].join("")}for(var d=[],e=0;256>e;++e)d[e]=(e+256).toString(16).substr(1);a.exports=c},function(a,b,c){"use strict";(function(b){function d(a,b){!f.isUndefined(a)&&f.isUndefined(a["Content-Type"])&&(a["Content-Type"]=b)}function e(){var a;return"undefined"!=typeof XMLHttpRequest?a=c(23):"undefined"!=typeof b&&(a=c(23)),a}var f=c(2),g=c(35),h={"Content-Type":"application/x-www-form-urlencoded"},i={adapter:e(),transformRequest:[function(a,b){return g(b,"Content-Type"),f.isFormData(a)||f.isArrayBuffer(a)||f.isBuffer(a)||f.isStream(a)||f.isFile(a)||f.isBlob(a)?a:f.isArrayBufferView(a)?a.buffer:f.isURLSearchParams(a)?(d(b,"application/x-www-form-urlencoded;charset=utf-8"),a.toString()):f.isObject(a)?(d(b,"application/json;charset=utf-8"),JSON.stringify(a)):a}],transformResponse:[function(a){if("string"==typeof a)try{a=JSON.parse(a)}catch(b){}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(a){return a>=200&&300>a}};i.headers={common:{Accept:"application/json, text/plain, */*"}},f.forEach(["delete","get","head"],function(a){i.headers[a]={}}),f.forEach(["post","put","patch"],function(a){i.headers[a]=f.merge(h)}),a.exports=i}).call(b,c(34))},function(a,b,c){"use strict";a.exports=function(a,b){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return a.apply(b,c)}}},function(a,b,c){"use strict";var d=c(2),e=c(36),f=c(38),g=c(39),h=c(40),i=c(24),j="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||c(41);a.exports=function(a){return new Promise(function(b,k){var l=a.data,m=a.headers;d.isFormData(l)&&delete m["Content-Type"];var n=new XMLHttpRequest,o="onreadystatechange",p=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in n||h(a.url)||(n=new window.XDomainRequest,o="onload",p=!0,n.onprogress=function(){},n.ontimeout=function(){}),a.auth){var q=a.auth.username||"",r=a.auth.password||"";m.Authorization="Basic "+j(q+":"+r)}if(n.open(a.method.toUpperCase(),f(a.url,a.params,a.paramsSerializer),!0),n.timeout=a.timeout,n[o]=function(){if(n&&(4===n.readyState||p)&&(0!==n.status||n.responseURL&&0===n.responseURL.indexOf("file:"))){var c="getAllResponseHeaders"in n?g(n.getAllResponseHeaders()):null,d=a.responseType&&"text"!==a.responseType?n.response:n.responseText,f={data:d,status:1223===n.status?204:n.status,statusText:1223===n.status?"No Content":n.statusText,headers:c,config:a,request:n};e(b,k,f),n=null}},n.onerror=function(){k(i("Network Error",a,null,n)),n=null},n.ontimeout=function(){k(i("timeout of "+a.timeout+"ms exceeded",a,"ECONNABORTED",n)),n=null},d.isStandardBrowserEnv()){var s=c(42),t=(a.withCredentials||h(a.url))&&a.xsrfCookieName?s.read(a.xsrfCookieName):void 0;t&&(m[a.xsrfHeaderName]=t)}if("setRequestHeader"in n&&d.forEach(m,function(a,b){"undefined"==typeof l&&"content-type"===b.toLowerCase()?delete m[b]:n.setRequestHeader(b,a)}),a.withCredentials&&(n.withCredentials=!0),a.responseType)try{n.responseType=a.responseType}catch(u){if("json"!==a.responseType)throw u}"function"==typeof a.onDownloadProgress&&n.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&n.upload&&n.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then(function(a){n&&(n.abort(),k(a),n=null)}),void 0===l&&(l=null),n.send(l)})}},function(a,b,c){"use strict";var d=c(37);a.exports=function(a,b,c,e,f){var g=new Error(a);return d(g,b,c,e,f)}},function(a,b,c){"use strict";a.exports=function(a){return!(!a||!a.__CANCEL__)}},function(a,b,c){"use strict";function d(a){this.message=a}d.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},d.prototype.__CANCEL__=!0,a.exports=d},function(a,b,c){"use strict";var d=c(28);"undefined"!=typeof window&&(window.DataCapsuleTools=d),a.exports=d},function(a,b,c){"use strict";function d(a){return new p(Object.assign({},a,{strategy:new h}))}function e(a){return new p(Object.assign({},a,{strategy:new l}))}function f(a){return new p(Object.assign({},a,{strategy:new k({remoteStrategy:a.remoteStrategy})}))}var g=c(9),h=c(6),i=c(14),j=c(29),k=c(50),l=c(51),m=c(1),n=m.NOT_FOUND,o=c(0),p=c(8);a.exports={NOT_FOUND:n,BaseStorage:o,DataCapsule:p,FrameStorageListener:g,FrameStorageStrategy:i,LocalStorageStrategy:h,LocalStorageCapsule:d,WixStorageStrategy:j,CachedStorageStrategy:k,LocalStorageCachedCapsule:f,InMemoryStorageStrategy:l,InMemoryStorageCapsule:e}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(30),i=c(0),j=c(1),k=j.NOT_FOUND,l=j.SERVER_ERROR,m=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),g(b,[{key:"setItem",value:function(a,b,c){var d={nameSpace:c.namespace,key:a,blob:b};return c.scope&&c.scope.siteId&&(d.siteId=c.scope.siteId),c.expiration&&(d.TTLInDays=Math.ceil(c.expiration/86400)),h.post("/_api/wix-user-preferences-webapp/set",d).then(function(){return void 0})["catch"](function(){throw l})}},{key:"removeItem",value:function(a,b){var c={nameSpace:b.namespace,key:a};return b.scope&&b.scope.siteId&&(c.siteId=b.scope.siteId),h.post("/_api/wix-user-preferences-webapp/delete",c).then(function(){return void 0})["catch"](function(){throw l})}},{key:"getItem",value:function(a,b){var c=b.scope&&b.scope.siteId,d=c?"getVolatilePrefForSite":"getVolatilePrefForKey",e=["/_api/wix-user-preferences-webapp",d,b.namespace,c,a].filter(function(a){return a}).join("/");return h.get(e).then(function(b){return b.data[a]})["catch"](function(a){throw 404===a.response.status?k:l})}},{key:"getAllItems",value:function(a){var b=a.scope&&a.scope.siteId,c=b?"getVolatilePrefsForSite":"getVolatilePrefs",d=["/_api/wix-user-preferences-webapp",c,a.namespace,b].filter(function(a){return a}).join("/");return h.get(d).then(function(a){return a.data})["catch"](function(){throw l})}}]),b}(i);a.exports=m},function(a,b,c){a.exports=c(31)},function(a,b,c){"use strict";function d(a){var b=new g(a),c=f(g.prototype.request,b);return e.extend(c,g.prototype,b),e.extend(c,b),c}var e=c(2),f=c(22),g=c(33),h=c(21),i=d(h);i.Axios=g,i.create=function(a){return d(e.merge(h,a))},i.Cancel=c(26),i.CancelToken=c(48),i.isCancel=c(25),i.all=function(a){return Promise.all(a)},i.spread=c(49),a.exports=i,a.exports["default"]=i},function(a,b){function c(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function d(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&c(a.slice(0,0))}a.exports=function(a){return null!=a&&(c(a)||d(a)||!!a._isBuffer)}},function(a,b,c){"use strict";function d(a){this.defaults=a,this.interceptors={request:new g,response:new g}}var e=c(21),f=c(2),g=c(43),h=c(44),i=c(46),j=c(47);d.prototype.request=function(a){"string"==typeof a&&(a=f.merge({url:arguments[0]},arguments[1])),a=f.merge(e,this.defaults,{method:"get"},a),a.method=a.method.toLowerCase(),a.baseURL&&!i(a.url)&&(a.url=j(a.baseURL,a.url));var b=[h,void 0],c=Promise.resolve(a);for(this.interceptors.request.forEach(function(a){b.unshift(a.fulfilled,a.rejected)}),this.interceptors.response.forEach(function(a){b.push(a.fulfilled,a.rejected)});b.length;)c=c.then(b.shift(),b.shift());return c},f.forEach(["delete","get","head","options"],function(a){d.prototype[a]=function(b,c){return this.request(f.merge(c||{},{method:a,url:b}))}}),f.forEach(["post","put","patch"],function(a){d.prototype[a]=function(b,c,d){return this.request(f.merge(d||{},{method:a,url:b,data:c}))}}),a.exports=d},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b,c){"use strict";var d=c(2);a.exports=function(a,b){d.forEach(a,function(c,d){d!==b&&d.toUpperCase()===b.toUpperCase()&&(a[b]=c,delete a[d])})}},function(a,b,c){"use strict";var d=c(24);a.exports=function(a,b,c){var e=c.config.validateStatus;c.status&&e&&!e(c.status)?b(d("Request failed with status code "+c.status,c.config,null,c.request,c)):a(c)}},function(a,b,c){"use strict";a.exports=function(a,b,c,d,e){return a.config=b,c&&(a.code=c),a.request=d,a.response=e,a}},function(a,b,c){"use strict";function d(a){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var e=c(2);a.exports=function(a,b,c){if(!b)return a;var f;if(c)f=c(b);else if(e.isURLSearchParams(b))f=b.toString();else{var g=[];e.forEach(b,function(a,b){null!==a&&"undefined"!=typeof a&&(e.isArray(a)&&(b+="[]"),e.isArray(a)||(a=[a]),e.forEach(a,function(a){e.isDate(a)?a=a.toISOString():e.isObject(a)&&(a=JSON.stringify(a)),g.push(d(b)+"="+d(a))}))}),f=g.join("&")}return f&&(a+=(-1===a.indexOf("?")?"?":"&")+f),a}},function(a,b,c){"use strict";var d=c(2);a.exports=function(a){var b,c,e,f={};return a?(d.forEach(a.split("\n"),function(a){e=a.indexOf(":"),b=d.trim(a.substr(0,e)).toLowerCase(),c=d.trim(a.substr(e+1)),b&&(f[b]=f[b]?f[b]+", "+c:c)}),f):f}},function(a,b,c){"use strict";var d=c(2);a.exports=d.isStandardBrowserEnv()?function(){function a(a){var b=a;return c&&(e.setAttribute("href",b),b=e.href),e.setAttribute("href",b),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}var b,c=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");return b=a(window.location.href),function(c){var e=d.isString(c)?a(c):c;return e.protocol===b.protocol&&e.host===b.host}}():function(){return function(){return!0}}()},function(a,b,c){"use strict";function d(){this.message="String contains an invalid character"}function e(a){for(var b,c,e=String(a),g="",h=0,i=f;e.charAt(0|h)||(i="=",h%1);g+=i.charAt(63&b>>8-h%1*8)){if(c=e.charCodeAt(h+=.75),c>255)throw new d;b=b<<8|c}return g}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.prototype=new Error,d.prototype.code=5,d.prototype.name="InvalidCharacterError",a.exports=e},function(a,b,c){"use strict";var d=c(2);a.exports=d.isStandardBrowserEnv()?function(){return{write:function(a,b,c,e,f,g){var h=[];h.push(a+"="+encodeURIComponent(b)),d.isNumber(c)&&h.push("expires="+new Date(c).toGMTString()),d.isString(e)&&h.push("path="+e),d.isString(f)&&h.push("domain="+f),g===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(a){var b=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return b?decodeURIComponent(b[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(a,b,c){"use strict";function d(){this.handlers=[]}var e=c(2);d.prototype.use=function(a,b){return this.handlers.push({fulfilled:a,rejected:b}),this.handlers.length-1},d.prototype.eject=function(a){this.handlers[a]&&(this.handlers[a]=null)},d.prototype.forEach=function(a){e.forEach(this.handlers,function(b){null!==b&&a(b)})},a.exports=d},function(a,b,c){"use strict";function d(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var e=c(2),f=c(45),g=c(25),h=c(21);a.exports=function(a){d(a),a.headers=a.headers||{},a.data=f(a.data,a.headers,a.transformRequest),a.headers=e.merge(a.headers.common||{},a.headers[a.method]||{},a.headers||{}),e.forEach(["delete","get","head","post","put","patch","common"],function(b){delete a.headers[b]});var b=a.adapter||h.adapter;return b(a).then(function(b){return d(a),b.data=f(b.data,b.headers,a.transformResponse),b},function(b){return g(b)||(d(a),b&&b.response&&(b.response.data=f(b.response.data,b.response.headers,a.transformResponse))),Promise.reject(b)})}},function(a,b,c){"use strict";var d=c(2);a.exports=function(a,b,c){return d.forEach(c,function(c){a=c(a,b)}),a}},function(a,b,c){"use strict";a.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},function(a,b,c){"use strict";a.exports=function(a,b){return b?a.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,""):a}},function(a,b,c){"use strict";function d(a){if("function"!=typeof a)throw new TypeError("executor must be a function.");var b;this.promise=new Promise(function(a){b=a});var c=this;a(function(a){c.reason||(c.reason=new e(a),b(c.reason))})}var e=c(26);d.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},d.source=function(){var a,b=new d(function(b){a=b});return{token:b,cancel:a}},a.exports=d},function(a,b,c){"use strict";a.exports=function(a){return function(b){return a.apply(null,b)}}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(1),i=h.NOT_FOUND,j=c(0),k=c(6),l="___DELETED___",m=function(a){function b(a){var c=a.remoteStrategy,f=a.localStrategy,g=void 0===f?new k:f;d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return h.remoteStrategy=j.verify(c),h.localStrategy=j.verify(g),h}return f(b,a),g(b,[{key:"_cacheItem",value:function(a,b,c){return this.localStrategy.setItem(a,b,Object.assign(c,{expiration:3600}))}},{key:"setItem",value:function(a,b,c){var d=this;return this.remoteStrategy.setItem(a,b,c).then(function(){return d._cacheItem(a,b,c)})}},{key:"removeItem",value:function(a,b){var c=this;return this.remoteStrategy.removeItem(a,b).then(function(){return c._cacheItem(a,l,b)})}},{key:"_getRemoteAndCache",value:function(a,b){var c=this;return this.remoteStrategy.getItem(a,b).then(function(d){return c._cacheItem(a,d,b).then(function(){return d})})["catch"](function(d){if(d===i)return c._cacheItem(a,l,b).then(function(){throw d});throw d})}},{key:"getItem",value:function(a,b){function c(a){if(a===l)throw i;return a}var d=this;return this.localStrategy.getItem(a,b)["catch"](function(){return d._getRemoteAndCache(a,b)}).then(c)}},{key:"getAllItems",value:function(a){var b=this;return this.remoteStrategy.getAllItems(a).then(function(c){return Promise.all(Object.keys(c).map(function(d){return b._cacheItem(d,c[d],a)})).then(function(){return c})})}}]),b}(j);a.exports=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(1),i=h.NOT_FOUND,j=c(0),k=b.InMemoryStrategy=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
return a.memoryMap={},a}return f(b,a),g(b,[{key:"setItem",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"==typeof this.memoryMap[c.namespace]&&(this.memoryMap[c.namespace]={}),this.memoryMap[c.namespace][a]=b,Promise.resolve()}},{key:"getItem",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=this.memoryMap[b.namespace]&&this.memoryMap[b.namespace][a];return"undefined"!=typeof c?Promise.resolve(c):Promise.reject(i)}},{key:"removeItem",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return delete this.memoryMap[b.namespace][a],Promise.resolve()}},{key:"getAllItems",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve(this.memoryMap[a.namespace])}}]),b}(j);a.exports=k}])}),angular.module("dealerCmsViewerAppInternal",["dealerCmsViewerPreload"]),angular.module("dealerCmsViewerApp",["dealerCmsViewerAppInternal","wixAngular","wixAngularStorage","wix.common.bi","dealerCmsTranslations","angularWidget","angularModalService","dealerCmsTemplatesApp","ngSanitize"]).config(["wixBiLoggerProvider","wixCacheProvider","wixStorageProvider","$locationProvider",function(a,b,c,d){a.setConfig({adapter:"pre"}),d.html5Mode({requireBase:!1,enabled:!0}),c.setNamespace("premium-lightbox")}]);try{angular.module("dealerCmsViewerPreload")}catch(e){angular.module("dealerCmsViewerPreload",[])}angular.module("dealerCmsViewerPreload").run(["$templateCache",function(a){"use strict";a.put("modules/dealer-cms-viewer-app/dealer-cms-viewer-app.html",'<div ng-if="$ctrl.shouldShowBanner()"\n     data-hook=\'container\'\n     view-bi="$ctrl.getBannerRoot()">\n    <div data-hook="cms-banner-root" ng-if="$ctrl.isCmsBanner()">\n        <template-loader template-data-root="$ctrl.getBannerRoot()" data-hook=\'template-loader\'></template-loader>\n    </div>\n    <div data-hook="old-banner-root" ng-if="$ctrl.isImgBanner()" class="{{$ctrl.getSizeClass()}}">\n        <single-banner banner="$ctrl.getBannerRoot()"></single-banner>\n    </div>\n</div>\n\n')}]);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DealerCmsViewerApp=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.dealerDataStore=a,this.$scope=b,this.widgetConfig=c,this.$timeout=d,this.bannerBi=e,this.dealerMessageReceiver=f,this.eventEmitApi=g,this.$location=h,this.pageSettings=i,this.$rootScope=j,this.$window=k,this.positionUrl=l,this.lightboxTrigger=m,this.bannerArtifactsRepository=n,this.singleBannerDimensions={LIST_LEFT:{width:246,height:240},LIST_TOP:{width:522,height:240},LIST_RIGHT:{width:246,height:520}},this.isAppLoadedInNonAngularPAge()&&this.preventChangingUrlInNonAngularPages();var p=this.positionUrl.fixPositions(c.getOptions()),q=this.$location.search();g.initApi(b,p.bannerLocation);var r={metaSiteGuid:p.metaSiteId,bannerPosition:p.bannerLocation,brotherBannersLocations:p.brotherBannersLocations,previewOverride:p.previewOverride};p.banners&&(r.banners=JSON.parse(p.banners)),p.experiments&&(r.experiments=JSON.parse(p.experiments)),p.dealerOptions&&(r.dealerOptions=p.dealerOptions),Object.keys(q).length>0&&this.isInIFrame()&&(r.dealerOptions=q),a.init(r).then(function(){o.invokeIsDisplayedEvent(p),o.dealerMessageReceiver.listenToDealerUserAction(b),o.hasLightbox()&&m.init(o.getBannerRoot())})}return a.$inject=["dealerDataStore","$scope","widgetConfig","$timeout","bannerBi","dealerMessageReceiver","eventEmitApi","$location","pageSettings","$rootScope","$window","positionUrl","lightboxTrigger","bannerArtifactsRepository"],a.prototype.isAppLoadedInNonAngularPAge=function(){return"FRAME_URL"===this.widgetConfig.getOptions().bannerLocation},a.prototype.preventChangingUrlInNonAngularPages=function(){var a=this,b=window.location.href+"";this.$rootScope.$on("$locationChangeStart",function(c,d,e){b===d&&(a.$location.absUrl=function(){return e},c.preventDefault()),b=e})},a.prototype.isInIFrame=function(){return this.$window.self!==this.$window.parent},a.prototype.invokeIsDisplayedEvent=function(a){(this.shouldShowBanner()||this.hasLightbox())&&this.sendLoadBiEvent(a.startTime);var b=__assign({isDisplayed:this.shouldShowBanner(),bannerLocationOnPage:a.bannerLocation},this.getBannerDimensions());this.eventEmitApi.emitLoadedEvent(b)},a.prototype.getBannerDimensions=function(){return this.shouldShowBanner()?this.isCmsBanner()?{width:this.pageSettings.getSettingValue("bannerWidth"),height:this.pageSettings.getSettingValue("bannerHeight")}:this.singleBannerDimensions[this.getBannerRoot().bannerPosition]:{}},a.prototype.sendLoadBiEvent=function(a){var b=this;a&&this.$timeout(function(){b.bannerBi.logBi({eventId:BannerBi.LOAD_EVENT,banner:b.getBannerRoot(),additionalLogParams:{loadTime:(new Date).getTime()-a}})},0)},a.prototype.isCmsBanner=function(){return!!this.getBannerRoot().bannerTemplate},a.prototype.isImgBanner=function(){return!!this.bannerArtifactsRepository.getDisplayUnitWidthDaysLeft(this.getBannerRoot().bannerId,this.getBannerRoot().daysLeft)},a.prototype.shouldShowBanner=function(){return this.dealerDataStore.shouldShowBanner()},a.prototype.hasLightbox=function(){return this.dealerDataStore.hasLightbox()},a.prototype.getBannerRoot=function(){return this.dealerDataStore.getBannerRoot()},a.prototype.getSizeClass=function(){switch(this.dealerDataStore.getBannerLocation()){case"LIST_TOP":return"top-banner-indi-size";case"LIST_RIGHT":return"right-banner-indi-size";case"LIST_LEFT":return"left-banner-indi-size";default:return""}},a}();angular.module("dealerCmsViewerAppInternal").component("dealerCmsViewerApp",{templateUrl:"modules/dealer-cms-viewer-app/dealer-cms-viewer-app.html",controller:DealerCmsViewerApp});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},CmsElement=function(){function a(a,b,c,d,e,f,g){var h=this;this.cmsViewerLocalisation=a,this.clickAction=b,this.bannerBi=c,this.dealerDataStore=d,this.eventEmitApi=e,this.$sce=f,this.$scope=g,this.hoverMode=!1,this.isCmsButton=function(){return"CMSBUTTON"===h.data.type.toUpperCase()}}return a.$inject=["cmsViewerLocalisation","clickAction","bannerBi","dealerDataStore","eventEmitApi","$sce","$scope"],a.prototype.$onInit=function(){this.attrs={top:this.getAttrWithSuffix("top","px"),left:this.getAttrWithSuffix("left","px"),width:this.getAttrWithSuffix("width","px"),height:this.getAttrWithSuffix("height","px"),"padding-top":this.getAttrWithSuffix("topPadding","px"),"padding-left":this.getAttrWithSuffix("leftPadding","px"),"font-size":this.getAttrWithSuffix("fontSize","px"),"line-height":this.getAttrWithSuffix("lineHeight","px"),color:this.getAttrWithSuffix("color",""),border:"1px solid "+this.getAttrWithSuffix("borderColor",""),"background-color":this.getAttrWithSuffix("bgColor",""),position:this.getAttrWithSuffix("position",""),"font-weight":this.getFontWeightWithFallback(),"z-index":this.getAttrWithSuffix("zIndex",""),"text-align":this.getAttrWithSuffix("align",""),"-ms-transform":this.getNonZeroRotateValue(),"-moz-transform":this.getNonZeroRotateValue(),"-webkit-transform":this.getNonZeroRotateValue(),"-o-transform":this.getNonZeroRotateValue()}},a.prototype.getFontWeightWithFallback=function(){var a=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"cssBold"),b=this.getAttrWithSuffix("fontWeight","");return void 0===a||""===a?b:a?"bold":!1},a.prototype.getStyleAttr=function(){return this.attrs},a.prototype.getAttrWithSuffix=function(a,b){var c=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,a);return c?""+c+b:void 0},a.prototype.getNonZeroRotateValue=function(){var a=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"rotate");return 0!==a?"rotate("+a+"deg)":void 0},a.prototype.doMouseEnter=function(){this.hoverMode=!0,this.isCmsButton()&&this.changeComponentState("OnHover")},a.prototype.getDataHook=function(){if(this.hasClickableAttr()&&this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,["clickActionParams","abTest"])){var a="cms-element-"+this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,["clickActionParams","abTest"]);return a.split(" ").join("-")}return"cms-element"},a.prototype.doMouseLeave=function(){this.hoverMode=!1,this.isCmsButton()&&this.changeComponentState()},a.prototype.changeComponentState=function(a){void 0===a&&(a=""),this.attrs["background-color"]=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"bgColor"+a),this.attrs.color=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"color"+a),this.attrs.border="1px solid "+this.getAttrWithSuffix("borderColor"+a,"")},a.prototype.getCssClasses=function(a){var b=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"cssClass"),c={"css-italic":this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"cssItalic"),"css-under-line":this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"cssUnderline"),"cms-button-inner":this.isCmsButton()};return b&&(c[b]=!0),void 0!==a?c[a]:c},a.prototype.getInnerContainerClasses=function(){return{"inner-container":!0,"cms-element":!0,"cms-button":this.isCmsButton(),"cms-clickable":this.hasClickableAttr()}},a.prototype.doClick=function(){if(this.hasClickableAttr()){var a=this.data.clickAction||this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"clickAction"),b=this.data.clickActionParams||this.createClickActionParams(a),c=this.clickAction.getBiParams({clickActionName:a,clickActionParams:b});this.bannerBi.logBi(__assign({banner:this.dealerDataStore.getBannerRoot(),eventId:BannerBi.CLICK_EVENT},c)),this.eventEmitApi.emitButtonClickEvent(c);var d=this.clickAction.doClickAction({clickActionName:a,clickActionParams:b});LightboxTrigger[d]&&this.$scope.$emit(LightboxTrigger[d])}},a.prototype.createClickActionParams=function(a){var b=this;return this.clickAction.getClickParams(a).reduce(function(a,c){return b.isEmpty(b.cmsViewerLocalisation.getValueWithLocaleAndCondition(b.data,["clickActionParams",c]))||(a[c]=b.cmsViewerLocalisation.getValueWithLocaleAndCondition(b.data,["clickActionParams",c])),a},{})},a.prototype.isEmpty=function(a){return void 0===a||""===a},a.prototype.hasClickableAttr=function(){return!(!this.data.clickable&&!this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"clickable"))},a.prototype.isText=function(){return"TEXT"===this.data.type.toUpperCase()},a.prototype.isImage=function(){return"IMAGE"===this.data.type.toUpperCase()},a.prototype.isVideo=function(){return"VIDEO"===this.data.type.toUpperCase()},a.prototype.getVideoSrc=function(){var a="https://www.youtube.com/embed/"+this.getAttrWithSuffix("youtubeId","")+"?controls="+(this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"controls")?"2":"0")+"&modestbranding=1"+(this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"autoplay")?"&autoplay=1":"")+(this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"showFs")?"":"&fs=0")+(this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"showInfo")?"":"&showinfo=0");return this.$sce.trustAsResourceUrl(a)},a.prototype.getHeight=function(){return this.getAttrWithSuffix("height","")},a.prototype.getWidth=function(){return this.getAttrWithSuffix("width","")},a.prototype.getImageUrl=function(){var a="//static.wixstatic.com/";return this.hoverMode&&this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"hoverSrc")?a+this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"hoverSrc"):a+this.cmsViewerLocalisation.getValueWithLocaleAndCondition(this.data,"src")},a.prototype.getTooltipData=function(){return this.hasTooltip()?this.data.toolTip:""},a.prototype.hasTooltip=function(){return void 0!==this.data.toolTip},a.prototype.getTextData=function(){return this.locale=this.cmsViewerLocalisation.getCmsElementLocale(this.data),{textKey:this.data.textKey,params:this.data[this.locale].params}},a.prototype.dataHasParams=function(){return void 0!==this.data[this.locale]&&this.data[this.locale].params.length>0},a}();angular.module("dealerCmsViewerAppInternal").component("cmsElement",{templateUrl:"modules/cms-element/cms-element.html",controller:CmsElement,bindings:{data:"="}});try{angular.module("dealerCmsViewerPreload")}catch(e){angular.module("dealerCmsViewerPreload",[])}angular.module("dealerCmsViewerPreload").run(["$templateCache",function(a){"use strict";a.put("modules/cms-element/cms-element.html",'<span ng-class="$ctrl.getInnerContainerClasses()"\n      data-hook="{{::$ctrl.getDataHook()}}"\n      ng-mouseenter="::$ctrl.doMouseEnter()"\n      ng-mouseleave="::$ctrl.doMouseLeave()"\n      ng-click="::$ctrl.doClick()"\n      ng-style=\'$ctrl.getStyleAttr()\'>\n  <span ng-if="::$ctrl.isText()"\n        ng-class="::$ctrl.getCssClasses()"\n        class="dlr-text"\n        data-hook="cms-element-text"\n        ng-bind-html="::$ctrl.getTextData() | cmsTranslate">\n  </span>\n  <span ng-if="::$ctrl.isCmsButton()"\n        ng-class="::$ctrl.getCssClasses()"\n        data-hook="cms-element-button"\n        ng-bind-html="::$ctrl.getTextData() | cmsTranslate">\n  </span>\n  <img ng-if="::$ctrl.isImage()" ng-src="{{$ctrl.getImageUrl()}}" data-hook="cms-element-image">\n  <iframe ng-if="::$ctrl.isVideo()" ng-src="{{::$ctrl.getVideoSrc()}}" height="{{::$ctrl.getHeight()}}" width="{{::$ctrl.getWidth()}}" frameborder="0" allowfullscreen></iframe>\n  <tool-tip ng-if="::$ctrl.hasTooltip()" data="$ctrl.getTooltipData()"></tool-tip>\n</span>')}]);var TemplateLoader=function(){function a(a,b,c){this.$element=a,this.$compile=b,this.$scope=c}return a.$inject=["$element","$compile","$scope"],a.prototype.$onInit=function(){this.templateName=this.getTemplateName(),this.compileTemplate()},a.prototype.getTemplateName=function(){return this.hasData()?this.templateDataRoot.bannerTemplate.templateSetting.templateName:null},a.prototype.hasData=function(){return void 0!==this.templateDataRoot&&null!==this.templateDataRoot},a.prototype.getTemplateDataRoot=function(){return this.templateDataRoot||null},a.prototype.compileTemplate=function(){var a="<"+this.templateName+" banner-data='$ctrl.getTemplateDataRoot()' \n                                          data-hook='template-loader-"+this.templateName+"'\n                                          class='dealer'></"+this.templateName+">",b=this.$compile(a)(this.$scope);this.$element.html(b)},a}();angular.module("dealerCmsViewerAppInternal").component("templateLoader",{template:"",controller:TemplateLoader,bindings:{templateDataRoot:"="}});var DealerCmsViewerServerApi=function(){function a(a,b){this.$http=a,this.$q=b,this.dealerBannerContentUrl="/_api/wix-dealer-webapp/dealerContent",this.previewUrl="/package-pickers-cms/preview/PackagePickerPageSettings"}return a.$inject=["$http","$q"],a.prototype.getDealerPreviewContent=function(a){var b=this.getUrlEncodedPostConfig(),c={pageId:a.pageId,hasPurchaseData:!1,siteGuid:"1234",countryCode:"il",langCode:a.langCode};return this.$http.post(this.previewUrl,c,b).then(function(a){var b=a.data;return b.resultCode&&b.data.pageSettings?b.data.pageSettings:void 0})},a.prototype.getDealerBannerContent=function(a){return this.runStandardPostRequestSuccessfullyOrReject(this.dealerBannerContentUrl,a||{})},a.prototype.runStandardPostRequestSuccessfullyOrReject=function(a,b){var c=this;return this.$http.post(a,b).then(function(a){return void 0===a.success||a.success?a.data:c.$q.reject(a.errorMessage)},function(a){return c.handleHttpErrors(a)})},a.prototype.handleHttpErrors=function(a){return this.$q.reject(a.data?a.data.errorMessage:"")},a.prototype.getUrlEncodedPostConfig=function(){return{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}},a}();angular.module("dealerCmsViewerAppInternal").service("dealerCmsViewerServerApi",DealerCmsViewerServerApi);var DealerDataStore=function(){function a(a,b,c){this.clientTopology=a,this.dealerRequestCache=b,this.dealerExperiments=c,this.dataError=!1}return a.$inject=["clientTopology","dealerRequestCache","dealerExperiments"],a.prototype.init=function(a){var b=this;this.dealerData=null,this.metaSiteId=a.metaSiteGuid,this.bannerPosition=a.bannerPosition,this.previewOverride=a.previewOverride,this.dealerOptions=a.dealerOptions;var c=this.dealerRequestCache.getDealerDataPromise(a);return c.then(function(a){b.dealerData=b.parseAllBannerTemplateData(a.dealerData),b.dealerExperiments.setExperiments(a.experiments)},function(){b.dataError=!0}),c},a.prototype.parseAllBannerTemplateData=function(a){var b=a;for(var c in b)b.hasOwnProperty(c)&&b[c].forEach(function(a){a.bannerTemplate&&"object"!=typeof a.bannerTemplate&&(a.bannerTemplate=JSON.parse(a.bannerTemplate))});return b},a.prototype.shouldShowBanner=function(){return!(null===this.dealerData||!this.dealerData[this.bannerPosition]||!this.dealerData[this.bannerPosition][0]||this.dealerData[this.bannerPosition][0].lightboxTriggers||!this.notMyAccountLBTMP())},a.prototype.notMyAccountLBTMP=function(){return!("MY_ACCOUNT_HOME_LB"===this.bannerPosition)},a.prototype.hasLightbox=function(){return!!(null!==this.dealerData&&this.dealerData[this.bannerPosition]&&this.dealerData[this.bannerPosition][0]&&this.dealerData[this.bannerPosition][0].lightboxTriggers)},a.prototype.isDataError=function(){return this.dataError},a.prototype.getBaseBannerUrl=function(){return this.clientTopology.dealerCmsViewer},a.prototype.getBannerRoot=function(){return this.dealerData?this.dealerData[this.bannerPosition][0]:null},a.prototype.getMetaSiteId=function(){return this.metaSiteId},a.prototype.getDealerOptions=function(){return this.dealerOptions},a.prototype.getBannerLocation=function(){return this.bannerPosition},a}();angular.module("dealerCmsViewerAppInternal").service("dealerDataStore",DealerDataStore);var DealerRequestCache=function(){function a(a,b,c,d){this.dealerCmsViewerServerApi=a,this.dealerCmsCache=b,this.lightboxStorage=c,this.$q=d,this.DEALER_PROMISE_CACHE_KEY="DEALER_PROMISE_CACHE_KEY",this.DEALER_DATA_CACHE_KEY="DEALER_DATA_CACHE_KEY",this.DEALER_DATA_CACHE_TIMEOUT=6e4,this.DEALER_PROMISE_CACHE_TIMEOUT=this.DEALER_DATA_CACHE_TIMEOUT/2}return a.$inject=["dealerCmsViewerServerApi","dealerCmsCache","lightboxStorage","$q"],a.prototype.getDealerDataPromise=function(a){var b=this,c=this.$q.defer(),d=this.dealerCmsCache.get(this.DEALER_DATA_CACHE_KEY)||{},e=d[a.metaSiteGuid+","+a.bannerPosition],f=(new Date).getTime();return"BO_PREVIEW_BANNER_LOCATION"===a.bannerPosition?this.resolveBoPreviewPromise(a,c):a.banners?c.resolve({dealerData:a.banners,experiments:a.experiments}):!e||f-e.date>=this.DEALER_DATA_CACHE_TIMEOUT?this.getDealerPromiseFromCache(a).then(function(e){b.addToCache(b.DEALER_DATA_CACHE_KEY,a,e,d),c.resolve(e)},function(){b.addToCache(b.DEALER_DATA_CACHE_KEY,a,"ERROR",d),c.reject()}):"ERROR"===e.cacheData?c.reject():e.cacheData&&c.resolve(e.cacheData),c.promise},a.prototype.wrapPromise=function(a){var b=this.$q.defer();return a.then(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},a.prototype.getDealerPromiseFromCache=function(a){var b=(new Date).getTime(),c=this.dealerCmsCache.get(this.DEALER_PROMISE_CACHE_KEY)||{},d=c[a.metaSiteGuid+","+a.bannerPosition];return d&&b-d.date<this.DEALER_PROMISE_CACHE_TIMEOUT?this.wrapPromise(d.cacheData):(d=this.getDealerPromiseFromServer(a),this.addToCache(this.DEALER_PROMISE_CACHE_KEY,a,d,c),this.wrapPromise(d))},a.prototype.addToCache=function(a,b,c,d){var e={date:(new Date).getTime(),cacheData:c},f=b.brotherBannersLocations||[];f.forEach(function(a){d[b.metaSiteGuid+","+a]=e}),d[b.metaSiteGuid+","+b.bannerPosition]=e,this.dealerCmsCache.put(a,d)},a.prototype.getDealerPromiseFromServer=function(a){var b=this.lightboxStorage.getActive().map(function(a){return a.lbId}),c=[a.bannerPosition],d=a.brotherBannersLocations||[];return d.forEach(function(a){c.push(a)}),this.dealerCmsViewerServerApi.getDealerBannerContent({bannerPositions:c,metasiteGuid:a.metaSiteGuid,excludeLightboxes:b})},a.prototype.resolveBoPreviewPromise=function(a,b){var c=this;this.getDealerBoPreviewPromise(a).then(function(c){var d=Number(a.previewOverride.daysLeft),e={BO_PREVIEW_BANNER_LOCATION:[{bannerPosition:"BO_PREVIEW_BANNER_LOCATION",bannerId:a.previewOverride.id,bannerTemplate:c,isPremium:!1,saleType:a.previewOverride.saleType,lightboxTriggers:null,daysLeft:d}]};"banner"!==a.previewOverride.lbStyle&&(e.BO_PREVIEW_BANNER_LOCATION[0].lightboxTriggers='{"delayOpenSec": 0.1, "ttlSecSameLB": 0, "displayStyle": "'+a.previewOverride.lbStyle+'"}'),b.resolve({dealerData:e,experiments:{}})},function(){c.dealerCmsCache.put(c.DEALER_DATA_CACHE_KEY,"ERROR"),b.reject()})},a.prototype.getDealerBoPreviewPromise=function(a){var b=this.dealerCmsCache.get(this.DEALER_PROMISE_CACHE_KEY);return b?this.wrapPromise(b):(b=this.dealerCmsViewerServerApi.getDealerPreviewContent({pageId:a.previewOverride.id,langCode:a.previewOverride.langCode}),this.dealerCmsCache.put(this.DEALER_PROMISE_CACHE_KEY,b),this.wrapPromise(b))},a}();angular.module("dealerCmsViewerAppInternal").service("dealerRequestCache",DealerRequestCache);var CmsPreloader=function(){function a(a){this.dealerDataStore=a}return a.$inject=["dealerDataStore"],a.prototype.preloadImages=function(a){var b=a.bannerTemplate,c=this.getPropertyFromMultilevelObj(b,"src");c.forEach(function(a){var b=new Image;b.src="//static.wixstatic.com/"+a})},a.prototype.getPropertyFromMultilevelObj=function(a,b){var c=[];return this.getPropertyFromMultilevelObjInternal(a,b,c),c},a.prototype.getPropertyFromMultilevelObjInternal=function(a,b,c){var d=this;a&&(Object.keys(a).forEach(function(e){a[e]&&"object"==typeof a[e]&&d.getPropertyFromMultilevelObjInternal(a[e],b,c)}),a[b]&&c.push(a[b]))},a}();angular.module("dealerCmsViewerAppInternal").service("cmsPreloader",CmsPreloader);var CmsViewerLocalisation=function(){function a(a,b,c){var d=this;this.$locale=a,this.dealerDataStore=b,this.$translate=c,this.getValueWithLocaleAndCondition=function(a,b){var c="string"==typeof b?[b]:b.slice();return d.saleCondition=d.getSaleName(),d.elementLocale=d.getCmsElementLocale(a),"NONE"!==d.saleCondition.toLocaleUpperCase()&&void 0!==d.saleCondition?d.getSaleConditionData(a,c)||d.getNonSaleData(a,c):d.getNonSaleData(a,c)}}return a.$inject=["$locale","dealerDataStore","$translate"],a.prototype.getCmsElementLocale=function(a){return a[this.getLocale()]?this.getLocale():"en"},a.prototype.getLocale=function(){return this.$translate.preferredLanguage?this.$translate.preferredLanguage():void 0!==this.$locale.id&&-1!==this.$locale.id.indexOf("-")?this.$locale.id.substring(0,this.$locale.id.indexOf("-")):this.$locale.id||"en"},a.prototype.getSaleName=function(){return this.saleTypeIsSeasonal()&&this.isLastSaleDay()?"lastSaleDay":this.saleTypeIsSeasonal()?"sale":this.dealerDataStore.getBannerRoot().saleType||"None"},a.prototype.isLastSaleDay=function(){return 1===this.dealerDataStore.getBannerRoot().daysLeft},a.prototype.saleTypeIsSeasonal=function(){return"Seasonal"===this.dealerDataStore.getBannerRoot().saleType},a.prototype.getNonSaleData=function(a,b){return void 0!==this.getValueMultiLevel(a[this.elementLocale],b)&&""!==this.getValueMultiLevel(a[this.elementLocale],b)?this.getValueMultiLevel(a[this.elementLocale],b):void 0!==this.getValueMultiLevel(a.en,b)&&""!==this.getValueMultiLevel(a.en,b)?this.getValueMultiLevel(a.en,b):void 0!==this.getValueMultiLevel(a,b)&&""!==this.getValueMultiLevel(a,b)?this.getValueMultiLevel(a,b):void 0},a.prototype.getSaleConditionData=function(a,b){return this.propertyIsDefined(a[this.elementLocale][this.saleCondition],b)?this.getValueMultiLevel(a[this.elementLocale][this.saleCondition],b):this.isLastSaleDay()&&this.saleTypeIsSeasonal()?this.getSeasonalSaleFallbackData(a,b):a.en[this.saleCondition]?this.getValueMultiLevel(a.en[this.saleCondition],b):void 0},a.prototype.getValueMultiLevel=function(a,b){return a&&1===b.length?a[b[0]]:a&&this.propertyIsDefined(a,[b[0]])?a[b[0]][b[1]]:void 0},a.prototype.getSeasonalSaleFallbackData=function(a,b){return this.propertyIsDefined(a[this.elementLocale].sale,b)?this.getValueMultiLevel(a[this.elementLocale].sale,b):this.propertyIsDefined(a[this.elementLocale],b)?this.getValueMultiLevel(a[this.elementLocale],b):this.propertyIsDefined(a.en[this.getSaleName()],b)?this.getValueMultiLevel(a.en[this.getSaleName()],b):this.propertyIsDefined(a.en.sale,b)?this.getValueMultiLevel(a.en.sale,b):this.getValueMultiLevel(a.en,b)},a.prototype.propertyIsDefined=function(a,b){return a?1===b.length?void 0!==a[b[0]]:void 0!==a[b[0]]&&void 0!==a[b[0]][b[1]]:void 0},a}();angular.module("dealerCmsViewerAppInternal").service("cmsViewerLocalisation",CmsViewerLocalisation);var PositionUrl=function(){function a(a){this.$location=a}return a.$inject=["$location"],a.prototype.fixPositions=function(a){return this.metaSiteId=a.metaSiteId,"FRAME_URL"===a.bannerLocation&&(this.mainPosition=this.calculateFrameUrl(),this.isFrameUrl=!0,a.bannerLocation=this.mainPosition),a.brotherBannersLocations&&-1!==a.brotherBannersLocations.indexOf("FRAME_URL")&&(a.brotherBannersLocations[a.brotherBannersLocations.indexOf("FRAME_URL")]=this.calculateFrameUrl()),a},a.prototype.hasUrlChange=function(){return this.isFrameUrl&&this.mainPosition!==this.calculateFrameUrl()},a.prototype.calculateFrameUrl=function(){var a=this.$location.absUrl();return a=a.substr(a.indexOf("//")+2),a=this.trimRigthFrom(a,"?"),a=this.trimRigthFrom(a,"#"),a.lastIndexOf("/")===a.length-1&&(a=a.substr(0,a.length-1)),a.replace(this.metaSiteId,"")},a.prototype.trimRigthFrom=function(a,b){var c=a.indexOf(b);return-1!==c&&(a=a.substr(0,c)),a},a}();angular.module("dealerCmsViewerAppInternal").service("positionUrl",PositionUrl);var ToolTip=function(){function a(){}return a.prototype.$onInit=function(){this.reformatedData=Object.assign({},this.data),this.reformatedData.items=this.reformantTooltipTemplateData()},a.prototype.reformantTooltipTemplateData=function(){var a=this.data.items;switch(this.data.templateName){case"bodyOnly":return{subtitle:a[0]};case"titleBody":return{title:a[0],subtitle:a[1]};case"threePictureBullets":return{title:a[7],subtitle:a[0],bullets:[{image:a[3],text:a[1]},{image:a[4],text:a[2]},{image:a[5],text:a[6]}]};case"twoPictureBullets":return{title:a[0],bullets:[{image:a[3],text:a[1]},{image:a[4],text:a[2]}]}}},a.prototype.getCssClasses=function(){return this.reformatedData.templateName+" "+this.reformatedData.type},a.prototype.getCssStyles=function(){return"height: "+this.reformatedData.height+"px; width: "+this.reformatedData.width+"px; z-index: "+this.reformatedData.zIndex+";"},a.prototype.templateType=function(a){return this.reformatedData.templateName===a},a.prototype.getTitleData=function(){return this.reformatedData.items.title},a.prototype.getSubtitleData=function(){return this.reformatedData.items.subtitle},a.prototype.getImageBullets=function(){return this.reformatedData.items.bullets},a}();angular.module("dealerCmsViewerAppInternal").component("toolTip",{templateUrl:"modules/tool-tip/tool-tip.html",controller:ToolTip,bindings:{data:"="}});try{angular.module("dealerCmsViewerPreload")}catch(e){angular.module("dealerCmsViewerPreload",[])}angular.module("dealerCmsViewerPreload").run(["$templateCache",function(a){"use strict";a.put("modules/tool-tip/tool-tip.html",'<div data-hook="tool-tip"\n     class="tool-tip {{$ctrl.getCssClasses()}}"\n     style="{{$ctrl.getCssStyles()}}">\n    <div class="box content" data-hook="none" ng-if="$ctrl.templateType(\'none\')">\n        <!--<cms-element ng-repeat="item in $ctrl.getTemplateData()" data="item"></cms-element>-->\n    </div>\n\n    <div class="box content" data-hook="titleBody" ng-if="$ctrl.templateType(\'titleBody\')">\n        <div class="title">\n            <cms-element data-hook="titleBody: title" data="$ctrl.getTitleData()"></cms-element>\n        </div>\n        <div class="body">\n            <cms-element data-hook="titleBody: body" data="$ctrl.getSubtitleData()"></cms-element>\n        </div>\n    </div>\n\n    <div class="box content" data-hook="bodyOnly" ng-if="$ctrl.templateType(\'bodyOnly\')">\n        <div class="body">\n            <cms-element data-hook="bodyOnly: body" data="$ctrl.getSubtitleData()"></cms-element>\n        </div>\n    </div>\n\n    <div class="box content" data-hook="threePictureBullets" ng-if="$ctrl.templateType(\'threePictureBullets\')">\n        <div class="title">\n            <cms-element data-hook="threePictureBullets: title" data="$ctrl.getTitleData()"></cms-element>\n        </div>\n        <div class="body">\n            <cms-element data-hook="threePictureBullets: body" data="$ctrl.getSubtitleData()"></cms-element>\n        </div>\n        <div class="image-bullet" data-hook="image-bullet" ng-repeat="imageBullet in $ctrl.getImageBullets()">\n            <div class="image">\n                <cms-element data="imageBullet.image" data-hook="image-bullet: image"></cms-element>\n            </div>\n            <div class="side-text">\n                <cms-element data="imageBullet.text" data-hook="image-bullet: text"></cms-element>\n            </div>\n        </div>\n    </div>\n\n    <div class="box content" data-hook="twoPictureBullets" ng-if="$ctrl.templateType(\'twoPictureBullets\')">\n        <div class="title">\n            <cms-element data-hook="twoPictureBullets: title" data="$ctrl.getTitleData()"></cms-element>\n        </div>\n        <div class="image-bullet" data-hook="image-bullet" ng-repeat="imageBullet in $ctrl.getImageBullets()">\n            <div class="image">\n                <cms-element data="imageBullet.image" data-hook="image-bullet: image"></cms-element>\n            </div>\n            <div class="side-text">\n                <cms-element data="imageBullet.text" data-hook="image-bullet: text"></cms-element>\n            </div>\n        </div>\n    </div>\n</div>')}]);var CmsTranslate=function(){function a(a,b){var c=this;this.$translate=a,this.$sce=b,this.filter=function(a){return c.$sce.trustAsHtml(c.parseTranslation(a))}}return a.$inject=["$translate","$sce"],a.prototype.parseTranslation=function(a){var b=a.textKey,c=this.$translate.instant?this.$translate.instant(b):this.$translate(b);return a.params.forEach(function(a){c=c.replace(a.key,a.string)}),c},a}();angular.module("dealerCmsViewerAppInternal").filter("cmsTranslate",["$injector",function(a){var b=a.instantiate(CmsTranslate);return b.filter}]);try{angular.module("dealerCmsViewerPreload")}catch(e){angular.module("dealerCmsViewerPreload",[])}angular.module("dealerCmsViewerPreload").run(["$templateCache",function(a){"use strict";a.put("modules/single-banner/single-banner.html",'<div data-hook="banner-ind"\n     ng-style="{\'background-image\': \'url(\' + $ctrl.getImageUrl() + \')\'}" class="banner-ind"\n     ng-click="$ctrl.onBannerClicked()"></div>')}]);var SingleBanner=function(){function a(a,b,c,d,e,f){var g=this;this.bannerArtifactsRepository=a,this.$locale=b,this.dealerDataStore=c,this.$window=d,this.bannerBi=e,this.eventEmitApi=f,this.createShaqStoreUrl=function(){return"es"===g.getLanguageCode()?"http://es.wix.com/myshaqommercial/contest":"pt"===g.getLanguageCode()?"http://pt.wix.com/myshaqommercial/contest":"fr"===g.getLanguageCode()?"http://fr.wix.com/myshaqommercial/contest":"http://www.wix.com/myshaqommercial/contest"},this.createDefaultUpgradeUrl=function(){return g.dealerDataStore.getMetaSiteId()?"https://premium.wix.com/wix/api/premiumStart?siteGuid="+g.dealerDataStore.getMetaSiteId()+"&referralAdditionalInfo="+g.bannerDataInternal.bannerPosition:"https://premium.wix.com/wix/api/wixPackagePicker?referralAdditionalInfo="+g.bannerDataInternal.bannerPosition+"&forcePremiumTop=true";
}}return a.$inject=["bannerArtifactsRepository","$locale","dealerDataStore","$window","bannerBi","eventEmitApi"],a.prototype.$onInit=function(){this.bannerDataInternal=this.banner,this.displayUnit=this.bannerArtifactsRepository.getDisplayUnitWidthDaysLeft(this.bannerDataInternal.bannerId,this.bannerDataInternal.daysLeft)},a.prototype.getImageUrl=function(){return this.dealerDataStore.getBaseBannerUrl()+"images"+this.displayUnit.imagePath+(this.isRetina()?"retina/":"")+this.displayUnit.imageNameWithOutCountrySuffix+(this.isRetina()?"_retina":"")+"_"+this.createCountryLanguageImageSuffix()+"."+this.displayUnit.imageType},a.prototype.isRetina=function(){return this.$window.devicePixelRatio>=1.5},a.prototype.createCountryLanguageImageSuffix=function(){var a=this.getLanguageCode();return""===a||this.getImageLangVersions().indexOf(a)<0?"en":a.toLowerCase()},a.prototype.getImageLangVersions=function(){return this.displayUnit.imageLangVariations?this.displayUnit.imageLangVariations:[]},a.prototype.getLanguageCode=function(){return this.$locale.id?this.$locale.id:"en"},a.prototype.onBannerClicked=function(){this.bannerBi.logBi({eventId:BannerBi.CLICK_EVENT,banner:this.bannerDataInternal,additionalLogParams:{targetUrl:this.getTargetUrl()}}),this.eventEmitApi.emitButtonClickEvent({targetUrl:this.getTargetUrl()}),this.displayUnit.isOpenInNewTab?this.$window.open(this.getTargetUrl()):this.$window.location.href=this.getTargetUrl()},a.prototype.getTargetUrl=function(){return"DEFAULT_UPGRADE_PLAN_URL"===this.displayUnit.targetUrl?this.createDefaultUpgradeUrl():"TPA_UPGRADE_URL"===this.displayUnit.targetUrl?"http://editor.wix.com/html/editor/web/renderer/edit/3f485113-7720-4348-8544-2d4b52b7dd98?metaSiteId="+this.dealerDataStore.getMetaSiteId()+"&openpanel=market:Cat:holiday-specials":"MAILBOX_URL"===this.displayUnit.targetUrl?"https://www.wix.com/my-account/sites/"+this.dealerDataStore.getMetaSiteId()+"/manage-premium/mailboxes?referralAdditionalInfo="+this.bannerDataInternal.bannerPosition:"SHOUT_OUT_URL"===this.displayUnit.targetUrl?"https://www.wix.com/my-account/sites/"+this.dealerDataStore.getMetaSiteId()+"/app/135c3d92-0fea-1f9d-2ba5-2a1dfb04297e/?appState=%3Fdl%3Ddashboard&referralInfo="+this.bannerDataInternal.bannerPosition:"SHOUT_OUT_URL_02"===this.displayUnit.targetUrl?this.createShoutoutUrl02():"WIX_HOTELS_UPGRADE_URL"===this.displayUnit.targetUrl?"https://www.wix.com/my-account/sites/"+this.dealerDataStore.getMetaSiteId()+"/app/135aad86-9125-6074-7346-29dc6a3c9bcf/?appState=%23%2Fonboarding&referralInfo="+this.bannerDataInternal.bannerPosition:"MANAGE_PREMIUM"===this.displayUnit.targetUrl?"https://www.wix.com/my-account/sites/"+this.dealerDataStore.getMetaSiteId()+"/manage-premium/?referralAdditionalInfo="+this.bannerDataInternal.bannerPosition:"SHOOT_THE_COVERS_URL"===this.displayUnit.targetUrl?this.createShootTheCoversUrl():"OLD_ECOM_SUPPORT"===this.displayUnit.targetUrl?"https://www.wix.com/support/html5/article/switching-your-existing-online-store-to-the-new-wix-stores?referralInfo="+this.bannerDataInternal.bannerPosition:"MOBILE_WIX_APP"===this.displayUnit.targetUrl?"https://www.wix.com/wix-lp/wix-app":"MOBILE_WIX_HOTELS"===this.displayUnit.targetUrl?"https://www.wix.com/wix-lp/hotel-app":"MOBILE_WIX_STORE"===this.displayUnit.targetUrl?"https://www.wix.com/wix-lp/store-app":"MOBILE_WIX_BLOG"===this.displayUnit.targetUrl?"https://www.wix.com/wix-lp/blog-app":"SHAQS_STORE_URL"===this.displayUnit.targetUrl?this.createShaqStoreUrl():this.displayUnit.targetUrl},a.prototype.createShootTheCoversUrl=function(){return"pt"===this.getLanguageCode()?"http://www.wix.com/lookstunning/covershoot-pt?referralInfo="+this.bannerDataInternal.bannerPosition:"es"===this.getLanguageCode()?"http://www.wix.com/lookstunning/covershoot-es?referralInfo="+this.bannerDataInternal.bannerPosition:"ru"===this.getLanguageCode()?"http://www.wix.com/lookstunning/covershoot-ru?referralInfo="+this.bannerDataInternal.bannerPosition:"fr"===this.getLanguageCode()?"http://www.wix.com/lookstunning/covershoot-fr?referralInfo="+this.bannerDataInternal.bannerPosition:"ja"===this.getLanguageCode()?"http://www.wix.com/lookstunning/covershoot-ja?referralInfo="+this.bannerDataInternal.bannerPosition:"http://www.wix.com/lookstunning/covershoot?referralInfo="+this.bannerDataInternal.bannerPosition},a.prototype.createShoutoutUrl02=function(){return this.dealerDataStore.getMetaSiteId()?"https://premium.wix.com/wix/api/premiumStart?siteGuid="+this.dealerDataStore.getMetaSiteId()+"&referralAdditionalInfo="+this.bannerDataInternal.bannerPosition+"&appDefId=135c3d92-0fea-1f9d-2ba5-2a1dfb04297e":"https://premium.wix.com/wix/api/wixPackagePicker?referralAdditionalInfo="+this.bannerDataInternal.bannerPosition+"&forcePremiumTop=true&appDefId=135c3d92-0fea-1f9d-2ba5-2a1dfb04297e"},a}();angular.module("dealerCmsViewerAppInternal").component("singleBanner",{templateUrl:"modules/single-banner/single-banner.html",controller:SingleBanner,bindings:{banner:"="}});var BannerArtifactsRepository=function(){function a(){this.setDisplayUnits([{displayUnitName:"test_banner_daysLeft_2",htmlUrl:"",imageLangVariations:["cs","da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/defaultCampaign_right_banner/",imageNameWithOutCountrySuffix:"side_banner_general",imageType:"png"},{displayUnitName:"test_banner",htmlUrl:"",imageLangVariations:["cs","da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/defaultCampaign_right_banner/",imageNameWithOutCountrySuffix:"side_banner_general",imageType:"png"},{displayUnitName:"side_banner_general",htmlUrl:"",imageLangVariations:["cs","da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/defaultCampaign_right_banner/",imageNameWithOutCountrySuffix:"side_banner_general",imageType:"png"},{displayUnitName:"connect_domain",htmlUrl:"",imageLangVariations:["cs","da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!1,targetUrl:"MANAGE_PREMIUM",imagePath:"/connectDomain/",imageNameWithOutCountrySuffix:"connect_domain",imageType:"png"},{displayUnitName:"top_banner-3_days",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/top_banner-3_days/",imageNameWithOutCountrySuffix:"top_banner",imageType:"png"},{displayUnitName:"4days_spring2016_4_5",htmlUrl:"",imageLangVariations:[],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/4days_spring2016_4_5/",imageNameWithOutCountrySuffix:"row-4_days",imageType:"png"},{displayUnitName:"empty",htmlUrl:"",imageLangVariations:[],isOpenInNewTab:!0,targetUrl:"",imagePath:"",imageNameWithOutCountrySuffix:"",imageType:""},{displayUnitName:"mailbox_banner",htmlUrl:"",imageLangVariations:["cs","da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"MAILBOX_URL",imagePath:"/mailbox/",imageNameWithOutCountrySuffix:"mailbox",imageType:"png"},{displayUnitName:"mailbox_sale",htmlUrl:"",imageLangVariations:["en","es","fr","pt","ru"],isOpenInNewTab:!0,targetUrl:"MAILBOX_URL",imagePath:"/mailbox_sale/",imageNameWithOutCountrySuffix:"mailbox_sale",imageType:"png"},{displayUnitName:"shoutout01",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"SHOUT_OUT_URL",imagePath:"/shoutout01/",imageNameWithOutCountrySuffix:"shoutout01",imageType:"png"},{displayUnitName:"shoot_the_covers",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"SHOOT_THE_COVERS_URL",imagePath:"/shoot_the_covers/",imageNameWithOutCountrySuffix:"shoot_the_covers",imageType:"png"},{displayUnitName:"pro_gallery_campaign",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"PRO_GALLERY_URL",imagePath:"/pro_gallery/",imageNameWithOutCountrySuffix:"pro_gallery",imageType:"png"},{displayUnitName:"shoutout02",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"SHOUT_OUT_URL_02",imagePath:"/shoutout02/",imageNameWithOutCountrySuffix:"shoutout02",imageType:"png"},{displayUnitName:"top_banner-3_days_31_05_2016",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/top_banner-3_days_31_05_2016/",imageNameWithOutCountrySuffix:"top_banner",imageType:"png"},{displayUnitName:"top_banner-3_days_31_05_2016_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/top_banner-24_hours_31_05_2016/",imageNameWithOutCountrySuffix:"top_banner_24",imageType:"png"},{displayUnitName:"fathers_day_31_5_2016",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/fathers_day_31_5_2016/",imageNameWithOutCountrySuffix:"row_4_days",imageType:"png"},{displayUnitName:"fathers_day_31_5_2016_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/fathers_day_lastDay_31_5_2016/",imageNameWithOutCountrySuffix:"row_final_hours",imageType:"png"},{displayUnitName:"side_banner_bookings",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/side_banner_bookings/",imageNameWithOutCountrySuffix:"side_banner_bookings",imageType:"png"},{displayUnitName:"side_banner_hotels",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/side_banner_hotels/",imageNameWithOutCountrySuffix:"side_banner_hotels",imageType:"png"},{displayUnitName:"side_banner_music",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/side_banner_music/",imageNameWithOutCountrySuffix:"side_banner_music",imageType:"png"},{displayUnitName:"side_banner_restaurants",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/side_banner_rest/",imageNameWithOutCountrySuffix:"side_banner_rest",imageType:"png"},{displayUnitName:"side_banner_stores",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/side_banner_stores/",imageNameWithOutCountrySuffix:"side_banner_stores",imageType:"png"},{displayUnitName:"b2b_sale",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/b2b_sale_limited_time/",imageNameWithOutCountrySuffix:"b2b_sale_limited_time",imageType:"png"},{displayUnitName:"b2b_sale_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/b2b_sale_final_hours/",imageNameWithOutCountrySuffix:"b2b_sale_final_hours",imageType:"png"},{displayUnitName:"old_ecomm",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"OLD_ECOM_SUPPORT",imagePath:"/old_ecom/",imageNameWithOutCountrySuffix:"old_ecom",imageType:"png"},{displayUnitName:"mobile_app_engage",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"MOBILE_WIX_APP",imagePath:"/mobile_app_engage/",imageNameWithOutCountrySuffix:"mobile_app_engage",imageType:"png"},{displayUnitName:"mobile_app_hotels",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"MOBILE_WIX_HOTELS",imagePath:"/mobile_app_hotels/",imageNameWithOutCountrySuffix:"mobile_app_hotels",imageType:"png"},{displayUnitName:"mobile_app_store",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"MOBILE_WIX_STORE",imagePath:"/mobile_app_store/",imageNameWithOutCountrySuffix:"mobile_app_store",imageType:"png"},{displayUnitName:"mobile_app_blog",htmlUrl:"",imageLangVariations:["en"],isOpenInNewTab:!0,targetUrl:"MOBILE_WIX_BLOG",imagePath:"/mobile_app_blog/",imageNameWithOutCountrySuffix:"mobile_app_blog",imageType:"png"},{displayUnitName:"personal_sale",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/personal_sale/",imageNameWithOutCountrySuffix:"personal_sale",imageType:"png"},{displayUnitName:"personal_sale_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr","hi"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/personal_sale_daysLeft_1/",imageNameWithOutCountrySuffix:"personal_sale_daysLeft_1",imageType:"png"},{displayUnitName:"hs_sale",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/hs_sale_limited_time/",imageNameWithOutCountrySuffix:"hs_sale_limited_time",imageType:"png"},{displayUnitName:"hs_sale_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/hs_sale_final_hours/",imageNameWithOutCountrySuffix:"hs_sale_final_hours",imageType:"png"},{displayUnitName:"shaqs_store",htmlUrl:"",imageLangVariations:["en","es","fr","pt"],isOpenInNewTab:!0,targetUrl:"SHAQS_STORE_URL",imagePath:"/shaqs_store/",imageNameWithOutCountrySuffix:"shaqs_store",imageType:"png"},{displayUnitName:"cyber_sale",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/cyber_sale/",imageNameWithOutCountrySuffix:"cyber_sale",imageType:"png"},{displayUnitName:"tnx_sale",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/tnx_sale_limited_time/",imageNameWithOutCountrySuffix:"tnx_sale_limited_time",imageType:"png"},{displayUnitName:"tnx_sale_daysLeft_1",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/tnx_sale_final_hours/",imageNameWithOutCountrySuffix:"tnx_sale_final_hours",imageType:"png"},{displayUnitName:"tnx_sale_extended",htmlUrl:"",imageLangVariations:["da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],isOpenInNewTab:!0,targetUrl:"DEFAULT_UPGRADE_PLAN_URL",imagePath:"/tnx_sale_extended/",imageNameWithOutCountrySuffix:"tnx_sale_extended",imageType:"png"}])}return a.prototype.setDisplayUnits=function(a){this.displayUnits=a},a.prototype.getDisplayUnitWidthDaysLeft=function(a,b){var c;return b&&(c=this.getDisplayUnit(a+"_daysLeft_"+b)),c||(c=this.getDisplayUnit(a)),c},a.prototype.getDisplayUnit=function(a){for(var b=0;b<this.displayUnits.length;b++)if(this.displayUnits[b].displayUnitName===a)return this.displayUnits[b];return null},a}();angular.module("dealerCmsViewerAppInternal").service("bannerArtifactsRepository",BannerArtifactsRepository),"function"==typeof define&&define.amd?require(["scrollMonitor"],function(a){angular.module("dealerCmsViewerAppInternal").value("scrollMonitor",a)}):angular.module("dealerCmsViewerAppInternal").value("scrollMonitor",scrollMonitor),function(){function a(a,b,c,d,e){return{restrict:"EA",link:function(f,g,h){var i,j=!0,k=function(){try{i.recalculateLocation()}catch(a){}if(i.update(),i.isFullyInViewport&&j){window.removeEventListener("scroll",k,!0),i.destroy(),j=!1;var c={eventId:BannerBi.VIEW_EVENT,banner:f.$eval(h.viewBi),additionalLogParams:{aboveTheFold:g.offset().top+g.height()<b.innerHeight}};d.logBi(c),e.emitViewBannerEvent(c.additionalLogParams)}},l=function(){b.addEventListener("scroll",k,!0),i.fullyEnterViewport(k),k()};i=a.create(g),c(l,500),f.$on("$destroy",function(){i&&i.destroy()})}}}a.$inject=["scrollMonitor","$window","$timeout","bannerBi","eventEmitApi"],angular.module("dealerCmsViewerAppInternal").directive("viewBi",a)}();try{angular.module("dealerCmsViewerPreload")}catch(e){angular.module("dealerCmsViewerPreload",[])}angular.module("dealerCmsViewerPreload").run(["$templateCache",function(a){"use strict";a.put("modules/lightbox-container/lightbox-container.html",'<div class="dlr-lb-modal" ng-click="$ctrl.clicklbCloseBackground($event)">\n    <div ng-if="$ctrl.shouldShowCloseBtn()" ng-include="$ctrl.getCloseImgSrc()"\n         ng-click="$ctrl.clickLbCloseBtn()"\n         class="dlr-lb-close"\n         lightbox-animation="::$ctrl.addListner"></div>\n    <div class="dlr-lb-modal-dialog" lightbox-animation="::$ctrl.addListner">\n        <div class="dlr-lb-modal-content" view-bi="$ctrl.getBannerRoot()">\n            <div data-hook="cms-banner-root" ng-if="$ctrl.isCmsBanner()">\n                <template-loader template-data-root="$ctrl.getBannerRoot()" data-hook=\'template-loader\'></template-loader>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="dlr-lb-backdrop" ng-class="$ctrl.getDisplayClass()" data-hook="backdrop" lightbox-animation="::$ctrl.addListner"></div>\n')}]);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},EventEmitApi=function(){function a(a,b,c){var d=this;this.$timeout=a,this.$window=b,this.$document=c,this.initApi=function(a,b){d.scope=a,d.bannerPosition=b},this.emitLoadedEvent=function(a){d.$timeout(function(){d.emitEvent("isBannerDisplayed",a)},0)},this.emitButtonClickEvent=function(a){d.emitEvent("dealerButtonClick",a)},this.emitDealerLightboxClose=function(a){d.emitEvent("dealerLightboxClosed",a)},this.emitViewBannerEvent=function(a){d.emitEvent("dealerBannerViewed",a)},this.emitEvent=function(a,b){d.scope.$emit(a,__assign({bannerLocationOnPage:d.bannerPosition},b)),d.attemptPostMessage({event:a,details:__assign({bannerLocationOnPage:d.bannerPosition},b)})},this.attemptPostMessage=function(a){try{d.$window.self!==d.$window.parent&&d.isWixDomain()&&d.$window.parent.postMessage(a,d.$document.context.referrer)}catch(b){}},this.isWixDomain=function(){var a=d.$document.context.referrer,b=a?a.substr(a.indexOf("//")+2):"",c=b.indexOf("/"),e=b.indexOf(".wix.com/"),f=b.indexOf(".wixpress.com/");return-1!==e&&c>e||-1!==f&&c>f}}return a.$inject=["$timeout","$window","$document"],a}();angular.module("dealerCmsViewerAppInternal").service("eventEmitApi",EventEmitApi);var LightboxContainer=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.dealerDataStore=a,this.bannerRoot=b,this.$scope=c,this.$document=d,this.close=e,this.bannerBi=f,this.eventEmitApi=g,this.$q=h,this.globalConstants=i,this.addListner=function(a){j.listner.push(a)},this.listner=[],this.isClosing=!1,c.$on(LightboxTrigger.emitCloseTrigger,function(){return j.prepareClose()}),d.on("keydown",function(a){a.keyCode===i.keyboardCodes.escape&&j.keypressLbClose()})}return a.$inject=["dealerDataStore","bannerRoot","$scope","$document","close","bannerBi","eventEmitApi","$q","globalConstants"],a.prototype.clickLbCloseBtn=function(){this.sendBiAndCloseLb(BannerBi.CLICK_EVENT,"CLOSE_TOP_WHITE")},a.prototype.keypressLbClose=function(){this.sendBiAndCloseLb(BannerBi.CLICK_EVENT,"CLOSE_LB_ESCAPE_PRESS")},a.prototype.clicklbCloseBackground=function(a){this.isClickedOnLbBackground(a)&&this.sendBiAndCloseLb(BannerBi.CLICK_EVENT,"CLOSE_LB_BACKGROUND")},a.prototype.sendBiAndCloseLb=function(a,b){this.bannerBi.logBi({banner:this.bannerRoot,eventId:a,clickType:b}),this.prepareClose()},a.prototype.isClickedOnLbBackground=function(a){var b=Array.from(a.target.classList);return!!b.find(function(a){return"dlr-lb-modal-dialog"===a})},a.prototype.unsubscribeFromKeypressEvents=function(){this.$document.off("keydown")},a.prototype.prepareClose=function(){var a=this;if(!this.isClosing){this.isClosing=!0,this.unsubscribeFromKeypressEvents();for(var b=[],c=0;c<this.listner.length;c++)b.push(this.listner[c].preCloseCallback());this.$q.all(b).then(function(){a.eventEmitApi.emitDealerLightboxClose({}),a.close();for(var b=0;b<a.listner.length;b++)a.listner[b].closeCallback&&a.listner[b].closeCallback();a.isClosing=!1})}},a.prototype.isCmsBanner=function(){return!!this.getBannerRoot().bannerTemplate},a.prototype.getCloseImgSrc=function(){return this.dealerDataStore.getBaseBannerUrl()+"/images/app/close.svg"},a.prototype.getBannerRoot=function(){return this.bannerRoot},a.prototype.getDisplayClass=function(){return JSON.parse(this.bannerRoot.lightboxTriggers).displayStyle},a.prototype.shouldShowCloseBtn=function(){return"white-lb"===this.getDisplayClass()},a}(),LightboxAnimation=function(){function a(a,b,c){var d=this;this.$element=a,this.$timeout=b,this.$q=c,this.backDropCallback={preCloseCallback:function(){d.$element.addClass("fade-out");var a=d.$q.defer();return d.$element.one("animationend",function(){a.resolve()}),a.promise}},this.$timeout(function(){d.lightboxAnimation(d.backDropCallback)},0)}return a.$inject=["$element","$timeout","$q"],a}();angular.module("dealerCmsViewerAppInternal").directive("lightboxAnimation",function(){return{controller:LightboxAnimation,controllerAs:"lightboxAnimation",scope:{lightboxAnimation:"="},bindToController:!0,restrict:"A"}});var LightboxTrigger=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.ModalService=a,this.$timeout=b,this.bannerBi=c,this.lightboxStorage=d,this.dealerMessageReceiver=e,this.dealerExperiments=f,this.globalConstants=g,this.cmsPreloader=h,this.positionUrl=i,this.applyRules=function(a,b){a.delayOpenSec&&(j.$timeout(function(){j.cmsPreloader.preloadImages(b)},500*a.delayOpenSec),j.$timeout(function(){j.checkStorageAndOpenLightBox(a,b)},1e3*a.delayOpenSec))},this.checkStorageAndOpenLightBox=function(a,b){"true"===j.dealerExperiments.getExperiment("specs.dealer-client.enable-limit-lightboxes-per-day-478")?j.checkLbStorageAndOpenNew(a,b):j.checkLbStorageAndOpenOld(a,b)},this.checkLbStorageAndOpenNew=function(a,b){j.hasStopLightboxTrigger()||j.positionUrl.hasUrlChange()||(a.ttlSecAnyLB||a.ttlSecSameLB?j.lightboxStorage.getAll().then(function(c){j.allowedToShowLightbox(b,a,c)&&j.openLightBox(b,a)})["catch"](function(){j.openLightBox(b,a)}):j.openLightBox(b,a))},this.checkLbStorageAndOpenOld=function(a,b){j.hasStopLightboxTrigger()||j.positionUrl.hasUrlChange()||(a.ttlSecSameLB?j.lightboxStorage.getAll().then(function(c){j.allowedToShowLightbox(b,a,c)&&j.openLightBox(b,a)})["catch"](function(){j.openLightBox(b,a)}):j.openLightBox(b,a))},this.allowedToShowLightbox=function(a,b,c){return"true"===j.dealerExperiments.getExperiment("specs.dealer-client.enable-limit-lightboxes-per-day-478")?c.every(function(c){return j.passedAllTriggerRules({storageItem:c,lightboxTriggers:b,banner:a})}):c.every(function(c){return c.lbId!==a.bannerId||Date.now()>c.lastAccess+1e3*b.ttlSecSameLB})},this.openLightBox=function(a,b){j.lightboxStorage.addOrUpdate(a.bannerId,b.ttlSecSameLB),j.isFakeBanner(a)?j.sendFakeBi(a):j.openModal(a)},this.isFakeBanner=function(a){return 0===a.bannerId.indexOf("fake_banner_bi_only")},this.sendFakeBi=function(a){j.bannerBi.logBi({eventId:BannerBi.VIEW_EVENT,banner:a})},this.openModal=function(a){j.ModalService.showModal({templateUrl:"modules/lightbox-container/lightbox-container.html",controller:LightboxContainer,controllerAs:"$ctrl",inputs:{bannerRoot:a}})}}return a.$inject=["ModalService","$timeout","bannerBi","lightboxStorage","dealerMessageReceiver","dealerExperiments","globalConstants","cmsPreloader","positionUrl"],Object.defineProperty(a,"emitCloseTrigger",{get:function(){return"CLOSE_LIGHTBOX"},enumerable:!0,configurable:!0}),a.prototype.init=function(a){if(a.lightboxTriggers){var b=JSON.parse(a.lightboxTriggers);this.applyRules(b,a)}},a.prototype.hasStopLightboxTrigger=function(){var a=this;return!!this.dealerMessageReceiver.getDealerUserActions().find(function(b){return b===a.globalConstants.dealerActionTypes.preventLightboxFromOpening})},a.prototype.passedAllTriggerRules=function(a){return a.storageItem.lbId===a.banner.bannerId?this.allowedToShowSameLightbox(a):this.allowedToShowAnyLightbox(a)},a.prototype.allowedToShowSameLightbox=function(a){return-1===a.storageItem.ttlSecSameLB?!1:Date.now()>a.storageItem.lastAccess+1e3*a.lightboxTriggers.ttlSecSameLB},a.prototype.allowedToShowAnyLightbox=function(a){var b=864e5;return void 0===a.lightboxTriggers.ttlSecAnyLB?Date.now()>=a.storageItem.lastAccess+b:Date.now()>=a.storageItem.lastAccess+1e3*a.lightboxTriggers.ttlSecAnyLB},a}();angular.module("dealerCmsViewerAppInternal").service("lightboxTrigger",LightboxTrigger);var LightboxStorage=function(){function a(a,b,c,d){var e=this;this.$window=a,this.dealerExperiments=b,this.lightboxDataCapsule=c,this.wixStorage=d,this.getAllFromStorage=function(){return JSON.parse(e.$window.localStorage.getItem("dlrWixLightbox")||"[]")},this.isActiveTTL=function(a){return a.lastAccess+1e3*a.ttlSecSameLB>(new Date).getTime()},this.hasNewerInOtherStorage=function(a,b){return a.filter(function(a){return a.lbId===b.lbId&&a.lastAccess>b.lastAccess}).length>0},this.hasNotOlderInOtherStorage=function(a,b){return a.filter(function(a){return a.lbId===b.lbId&&a.lastAccess>=b.lastAccess}).length>0},this.hasOlder=function(a,b){return a.filter(function(a){return a.lbId===b.lbId&&a.lastAccess>b.lastAccess}).length>0}}return a.$inject=["$window","dealerExperiments","lightboxDataCapsule","wixStorage"],Object.defineProperty(a.prototype,"FULL_EXPIRE_TIME",{get:function(){return 2592e6},enumerable:!0,configurable:!0}),a.prototype.getActive=function(){var a=this,b=this.getAllFromStorage().filter(function(b){return a.isActiveTTL(b)});return b.filter(function(c){return!a.hasOlder(b,c)})},a.prototype.getAll=function(){var a=this;return"true"===this.dealerExperiments.getExperiment("specs.dealer-client.lightbox-storage-data-capsule-migration-585")?this.getNewestFromStorage().then(function(b){return a.getAllInternal(b)})["catch"](function(b){return a.getAllInternal([])}):this.wixStorage.get("dlrWixLightbox").then(function(b){return a.getAllInternal(b)})["catch"](function(b){return a.getAllInternal([])})},a.prototype.getNewestFromStorage=function(){var a,b=this;return this.wixStorage.get("dlrWixLightbox").then(function(c){return a=c,b.lightboxDataCapsule.getItems()}).then(function(c){return a.filter(function(a){return b.hasNewerInOtherStorage(c,a)}).length>0?c:a})},a.prototype.getAllInternal=function(a){var b=this;a=a||[];var c=this.getAllFromStorage().filter(function(a){return a.lastAccess+b.FULL_EXPIRE_TIME>(new Date).getTime()}),d=c.filter(function(c){return!b.hasNotOlderInOtherStorage(a,c)}),e=a.filter(function(a){return!b.hasNewerInOtherStorage(c,a)}),f=d.concat(e);return f.forEach(function(a){return b.addOrUpdate(a.lbId,a.ttlSecSameLB,a.lastAccess)}),this.syncRemote(a),f},a.prototype.addOrUpdate=function(a,b,c){var d=this;void 0===c&&(c=0);var e=(new Date).getTime(),f=this.getAllFromStorage().filter(function(b){var c=b.lbId!==a,e=b.lastAccess+d.FULL_EXPIRE_TIME>(new Date).getTime();return c&&e});this.$window.localStorage.setItem("dlrWixLightbox",JSON.stringify(f.concat([{lbId:a,ttlSecSameLB:b,lastAccess:c||e}]))),c||this.syncRemote()},a.prototype.syncRemote=function(a){void 0===a&&(a=void 0),a?this.syncRemoteInternal(a):this.checkExperimentAndSync()},a.prototype.checkExperimentAndSync=function(){var a=this;"true"===this.dealerExperiments.getExperiment("specs.dealer-client.lightbox-storage-data-capsule-migration-585")?this.getNewestFromStorage().then(function(b){return a.syncRemoteInternal(b)})["catch"](function(){return a.syncRemoteInternal([])}):this.wixStorage.get("dlrWixLightbox").then(function(b){return a.syncRemoteInternal(b)})["catch"](function(){return a.syncRemoteInternal([])})},a.prototype.syncRemoteInternal=function(a){var b=this,c=this.getAllFromStorage().filter(function(a){return a.lastAccess+b.FULL_EXPIRE_TIME>(new Date).getTime()}),d=c.filter(function(c){return!b.hasNotOlderInOtherStorage(a,c)}),e=a.filter(function(a){return!b.hasNewerInOtherStorage(c,a)}),f=e.concat(d).map(function(a){return{lastAccess:a.lastAccess,lbId:a.lbId,ttlSecSameLB:a.ttlSecSameLB}});"true"===this.dealerExperiments.getExperiment("specs.dealer-client.lightbox-storage-data-capsule-migration-585")?this.updateDataCapsule(f):this.updateWixStorage(f)},a.prototype.updateWixStorage=function(a){a.length>0?this.wixStorage.set("dlrWixLightbox",a):this.wixStorage.remove("dlrWixLightbox")},a.prototype.updateDataCapsule=function(a){a.length>0?this.lightboxDataCapsule.setItems(a):this.lightboxDataCapsule.removeStorage()},a}();angular.module("dealerCmsViewerAppInternal").service("lightboxStorage",LightboxStorage);var LightboxDataCapsule=function(){function a(a){this.bannersErrorLogger=a,this.capsuleScope="dlrWixLightbox";var b=DataCapsuleTools.WixStorageStrategy,c=DataCapsuleTools.LocalStorageStrategy;DataCapsuleTools&&DataCapsuleTools.LocalStorageCachedCapsule?this.capsule=new DataCapsuleTools.LocalStorageCachedCapsule({remoteStrategy:new b,localStrategy:new c,namespace:"premium-lightbox"}):a.logErrorNoExp("DataCapsuleTools has no LocalStorageCachedCapsule")}return a.$inject=["bannersErrorLogger"],a.prototype.setItems=function(a){return this.capsule?this.capsule.setItem(this.capsuleScope,a):void this.bannersErrorLogger.logErrorNoExp("setItem: Data capsule has no defined strategy")},a.prototype.removeStorage=function(){return this.capsule?this.capsule.removeItem(this.capsuleScope):void this.bannersErrorLogger.logErrorNoExp("removeStorage: Data capsule has no defined strategy")},a.prototype.getItems=function(){return this.capsule?this.capsule.getItem(this.capsuleScope):void this.bannersErrorLogger.logErrorNoExp("getItems: Data capsule has no defined strategy")},a}();angular.module("dealerCmsViewerAppInternal").service("lightboxDataCapsule",LightboxDataCapsule);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DealerClick=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.bannerBi=b,this.eventEmitApi=c,this.dealerDataStore=d,this.$element=e,this.doClickAction=function(){f.bannerBi.logBi(__assign({banner:f.dealerDataStore.getBannerRoot(),eventId:BannerBi.CLICK_EVENT},f.dealerClick.biPramas)),f.eventEmitApi.emitButtonClickEvent(f.dealerClick.biPramas),f.dealerClick.clickActionFunction(f.dealerClick.functionParams)},this.$element.on("click",function(){f.doClickAction()}),a.$on("$destroy",function(){f.$element.off("click",f.dealerClick)})}return a.$inject=["$scope","bannerBi","eventEmitApi","dealerDataStore","$element"],a}();angular.module("dealerCmsViewerAppInternal").directive("dealerClick",function(){return{controller:DealerClick,controllerAs:"dealerClick",scope:{dealerClick:"="},bindToController:!0,restrict:"A"}});var StackTrace=function(){function a(a){this.window=a}return a.$inject=["$window"],a.prototype.print=function(a){return a?this.window.printStackTrace({e:a}):""},a}();angular.module("dealerCmsViewerAppInternal").service("stackTrace",StackTrace);var BannersNewRelicManager=function(){function a(a,b,c){this.$window=a,this.$log=b,this.stackTrace=c}return a.$inject=["$window","$log","stackTrace"],a.prototype.noticeError=function(a,b){this.$log.error.apply(this.$log,arguments);
var c="dealer-cms-viewer";try{var d=void 0,e=void 0;if(a&&(d=a.toString(),e=this.stackTrace.print(a)),"undefined"!=typeof this.$window.NREUM){var f="dealer-cms-viewer";a.message=f+": errorMessage="+d+", cause="+b,this.$window.NREUM.noticeError(a)}"undefined"!=typeof this.$window.newrelic&&this.$window.newrelic.addPageAction("error",{staticName:c,errorUrl:this.$window.location.href,errorMessage:d,cause:b||"",stackTrace:e})}catch(g){this.$log.warn("ErrorLogService: Error logging failed"),this.$log.log(g)}},a}();angular.module("dealerCmsViewerAppInternal").service("bannersNewRelicManager",BannersNewRelicManager);var BannersErrorLogger=function(){function a(a){this.bannersNewRelicManager=a}return a.$inject=["bannersNewRelicManager"],a.prototype.logError=function(a,b){this.bannersNewRelicManager.noticeError(a,b)},a.prototype.logErrorNoExp=function(a){try{throw a}catch(b){this.logError(b,a)}},a}();angular.module("dealerCmsViewerAppInternal").service("bannersErrorLogger",BannersErrorLogger);var BannersExceptionHandler=function(){function a(a,b){try{b=this.dealerDataStore.getBannerRoot().bannerId+":"+b}catch(c){b="NoBannerId:"+b}this.bannersErrorLogger.logError(a,b)}return a.prototype.inject=function(a,b){this.bannersErrorLogger=a,this.dealerDataStore=b},a.prototype.inject.$inject=["bannersErrorLogger","dealerDataStore"],a}();angular.module("dealerCmsViewerAppInternal").factory("$exceptionHandler",["$injector",function(a){return function(){var b=Object.create(BannersExceptionHandler.prototype);return a.invoke(b.inject||angular.noop,b),BannersExceptionHandler.apply(b,arguments),b}}]);var BannerBi=function(){function a(a,b,c){var d=this;this.biLogger=a,this.dealerDataStore=b,this.cmsViewerLocalisation=c,this.hasGuid=function(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)},this.isCmsBanner=function(a){return d.hasGuid(a.bannerId)},this.getAssetId=function(a){return a.bannerTemplate&&d.isCmsBanner(a)?a.bannerTemplate.pageSetting.name:a.bannerId}}return a.$inject=["biLogger","dealerDataStore","cmsViewerLocalisation"],Object.defineProperty(a,"VIEW_EVENT",{get:function(){return 8e3},enumerable:!0,configurable:!0}),Object.defineProperty(a,"CLICK_EVENT",{get:function(){return 8001},enumerable:!0,configurable:!0}),Object.defineProperty(a,"LOAD_EVENT",{get:function(){return 8002},enumerable:!0,configurable:!0}),a.prototype.logBi=function(a){var b=a.banner;if("BO_PREVIEW_BANNER_LOCATION"!==b.bannerPosition){var c={src:17,assetId:this.getAssetId(b),saleGroup:b.saleType,assetCampaignGuid:this.hasGuid(b.bannerId)?b.bannerId:"",isPremium:b.isPremium||!1,bannerLocationOnPage:b.bannerPosition,msid:this.dealerDataStore.getMetaSiteId(),lightboxGuid:b.lightboxGuid,promotionAssetType:b.bannerTemplate?"lightbox":"banner",abTest:b.bannerTemplate?"cms-banner":"img-banner",premiumLng:this.cmsViewerLocalisation.getLocale(),evid:a.eventId};a.clickType&&(c.clickType=a.clickType),c=angular.extend({},a.additionalLogParams||{},c),this.biLogger.log(c)}},a}();angular.module("dealerCmsViewerAppInternal").service("bannerBi",BannerBi);var DealerMessageReceiver=function(){function a(a){this.dealerDataStore=a,this.dealerUserActionList=[]}return a.$inject=["dealerDataStore"],a.prototype.listenToDealerUserAction=function(a){var b=this;a.$on("dealerUserAction",function(a,c){c&&c.bannerPosition===b.dealerDataStore.getBannerLocation()&&b.dealerUserActionList.push(c.action)})},a.prototype.getDealerUserActions=function(){return this.dealerUserActionList},a}();angular.module("dealerCmsViewerAppInternal").service("dealerMessageReceiver",DealerMessageReceiver);var PageSettings=function(){function a(a,b){this.cmsViewerLocalisation=a,this.dealerDataStore=b}return a.$inject=["cmsViewerLocalisation","dealerDataStore"],a.prototype.getSettingValue=function(a){if(this.dealerDataStore.getBannerRoot().bannerTemplate){var b=this.dealerDataStore.getBannerRoot().bannerTemplate.pageSetting;return this.getSettingValueWithFallback(b,a)}},a.prototype.getSettingValueWithFallback=function(a,b){if(!a.en)return a[b];var c=this.cmsViewerLocalisation.getValueWithLocaleAndCondition(a,b),d=a[b];return void 0!==c?c:d},a}();angular.module("dealerCmsViewerAppInternal").service("pageSettings",PageSettings);var GlobalConstants=function(){function a(){this.keyboardCodes={escape:27},this.dealerActionTypes={preventLightboxFromOpening:"preventLightboxFromOpening"}}return a}();angular.module("dealerCmsViewerAppInternal").constant("globalConstants",new GlobalConstants);var DealerExperiments=function(){function a(){this.experiments={}}return a.prototype.getExperiment=function(a,b){return void 0===b&&(b="false"),this.experiments[a]||b},a.prototype.setExperiments=function(a){Object.assign(this.experiments,a)},a}();angular.module("dealerCmsViewerAppInternal").service("dealerExperiments",DealerExperiments);
//# sourceMappingURL=scripts.js.map