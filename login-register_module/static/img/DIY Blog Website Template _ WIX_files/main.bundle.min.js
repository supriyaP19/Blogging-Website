!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("_"),require("axios"),require("ReactDOM")):"function"==typeof define&&define.amd?define("pro-gallery-renderer",["React","_","axios","ReactDOM"],t):"object"==typeof exports?exports["pro-gallery-renderer"]=t(require("React"),require("_"),require("axios"),require("ReactDOM")):e["pro-gallery-renderer"]=t(e.React,e._,e.axios,e.ReactDOM)}("undefined"!=typeof self?self:this,function(__WEBPACK_EXTERNAL_MODULE_2__,__WEBPACK_EXTERNAL_MODULE_7__,__WEBPACK_EXTERNAL_MODULE_30__,__WEBPACK_EXTERNAL_MODULE_114__){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||t.p,t(t.s=139)}([function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,i){"use strict";t.__esModule=!0;var r=i(89),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,n.default)(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}()},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(70),g=r(p),m=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"isWixIframe",value:function(){return window&&window.Wix&&window.top!==window.self}},{key:"scrollTo",value:function(e,t,i,r,n){this.isMobile()&&(i=0);var o=function(e,t,i,r){return 0===r?i+t:(e/=r/2)<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)},a=r?e.scrollLeft:e.scrollTop,s=t-a,l=0;e.setAttribute("data-scrolling","true"),function t(){l+=20;var u=o(l,a,s,i);l<i?setTimeout(t,20):(e.setAttribute("data-scrolling",""),"function"==typeof n&&n()),r?e.scrollLeft=u:e.scrollTop=u}()}}]),t}(g.default);t.default=new m},function(e,t,i){e.exports={default:i(149),__esModule:!0}},function(e,t,i){"use strict";t.__esModule=!0;var r=i(19),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(170),o=r(n),a=i(174),s=r(a),l=i(19),u=r(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_7__},function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(e,t,i){"use strict";t.__esModule=!0;var r=i(10),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n.default||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}},function(e,t,i){e.exports={default:i(144),__esModule:!0}},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var r=i(59)("wks"),n=i(41),o=i(11).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:n)("Symbol."+e))}).store=r},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(214),d=r(c),h=function(){function e(){(0,s.default)(this,e),this.init()}return(0,u.default)(e,[{key:"wixSdkIsAvailable",value:function(){try{return"undefined"!=typeof window&&void 0!==window.Wix&&"function"==typeof window.Wix.Utils.getCompId}catch(e){return!1}}},{key:"init",value:function(){try{this.wixSdkIsAvailable()?((0,o.default)(this,d.default,window.Wix),this.isMock=!1):((0,o.default)(this,d.default),this.isMock=!0)}catch(e){(0,o.default)(this,d.default),this.isMock=!0}}}]),e}();t.default=new h},function(e,t,i){var r=i(11),n=i(8),o=i(24),a=i(20),s=i(21),l=function(e,t,i){var u,c,d,h=e&l.F,f=e&l.G,p=e&l.S,g=e&l.P,m=e&l.B,y=e&l.W,v=f?n:n[t]||(n[t]={}),b=v.prototype,w=f?r:p?r[t]:(r[t]||{}).prototype;f&&(i=t);for(u in i)(c=!h&&w&&void 0!==w[u])&&s(v,u)||(d=c?w[u]:i[u],v[u]=f&&"function"!=typeof w[u]?i[u]:m&&c?o(d,r):y&&w[u]==d?function(e){var t=function(t,i,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((v.virtual||(v.virtual={}))[u]=d,e&l.R&&b&&!b[u]&&a(b,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,i){var r=i(17);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){var r=i(15),n=i(84),o=i(54),a=Object.defineProperty;t.f=i(18)?Object.defineProperty:function(e,t,i){if(r(e),t=o(t,!0),r(i),n)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(153),o=r(n),a=i(161),s=r(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t,i){var r=i(16),n=i(31);e.exports=i(18)?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.itemActions=void 0;var n=i(19),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(7),d=r(c),h=i(28),f=i(13),p=r(f),g=i(29),m=i(120),y=r(m),v=i(30),b=r(v),w=i(267),_=r(w),S=function(){function e(){(0,s.default)(this,e),this.isMultisharing=function(){},this.wasInit=!1,this.loveCounts={},this.fetchSiteInfo()}return(0,u.default)(e,[{key:"initWidgetData",value:function(e){if(this.config=e,e.compId&&(this.compId=e.compId),e.pageId&&(this.pageId=e.pageId),e.styleId&&(this.styleId=e.styleId),e.galleryId&&(this.galleryId=e.galleryId),e.fullscreenUrl){this.siteUrl=this.fullscreenUrl=this.normalizeFullscreenUrl(e.fullscreenUrl);try{this.siteUrl=this.fullscreenUrl.match(/.*\..*\//g)[0]}catch(e){}}return e.reachLevel&&this.setReachLevel(e.reachLevel),this.galleryId&&""!==this.galleryId&&(this.loveCountFetched=document.createEvent("CustomEvent"),this.loveCountFetched.initCustomEvent("love_count_fetched",!1,!1,null),this.getStats()),this.wasInit=e,Date.now()}},{key:"normalizeFullscreenUrl",value:function(e){var t=e;return e&&(t=e.split("?")[0]),t}},{key:"fetchSiteInfo",value:function(){var e=this,t=void 0;try{t=window.location.href}catch(e){t=""}h.baseUtils.isInWix()?(this.siteInfo={},p.default.getSiteInfo(function(t){e.siteInfo=t})):this.siteInfo={url:t,baseUrl:t,siteTitle:"Wix Pro Gallery",siteDescription:"The best gallery any Wix user has ever seen!",siteKeywords:"gallery,photos,photographer,professional"}}},{key:"getSiteUrl",value:function(){return this.siteInfo.url}},{key:"getStats",value:function(){var e=this;if(!h.baseUtils.isDev()&&!h.baseUtils.isTest()){if(!this.galleryId||""===this.galleryId||this.galleryId.length<10)return console.log("galleryId id",this.galleryId,(0,o.default)(this.galleryId)),void console.error("get stats error - no galleryId");b.default.get("//progallery.wix.com/_api/pro-gallery-webapp/v1/gallery/"+this.galleryId+"/stats/properties").then(function(t){try{t=t.data,e.statsProps=JSON.parse(t.properties),e.statsToken=t.statsToken}catch(e){console.error("Failed getting stats props",e)}});var t=void 0;try{t=window.instanceId}catch(e){t=""}t?b.default.get("//progallery.wix.com/_api/pro-gallery-webapp/v1/gallery/"+this.galleryId+"/"+t+"/stats").then(function(t){try{t=t.data,e.loveCounts=t.photoId2Love,window.dispatchEvent(e.loveCountFetched)}catch(e){console.error("Failed getting love counts",e)}}):console.warn("cannot report love counter - no instance id")}}},{key:"getLoveCount",value:function(e){return Math.max(0,this.loveCounts[e])||0}},{key:"html2img",value:function(e,t){try{var i=document.createElement("div");i.innerHTML=e.html,i.style.boxSizing="border-box",i.style.background=e.style.bgColor,i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.zIndex=-1,i.className="text-item",document.body.appendChild(i),(0,_.default)(i,{onrendered:function(e){i.remove();var r=e.toDataURL();"function"==typeof t&&t(r)}})}catch(e){"function"==typeof t&&t("")}}},{key:"share",value:function(e,t,i,r){h.baseUtils.isDemo()||(g.logger.trackBi(g.logger.biEvents.share,{origin:i,platform:e}),r&&(t.numOfItems=r),this.shareImp(e,t))}},{key:"downloadTextItem",value:function(e,t){g.logger.trackBi(g.logger.biEvents.download,{origin:t}),this.html2img(e,function(e){try{e=e.replace(/^data:image\/[^;]/,"data:application/octet-stream"),window.open(e)}catch(e){}})}},{key:"getReachLevel",value:function(e){var t=Number(e||0),i=void 0;if(d.default.isUndefined(this.reachLevel)){var r=h.baseUtils.getLocalStorage();i=Number(r[this.siteUrl+"|reach-level"]||0)+t}else i=this.reachLevel+t;return i}},{key:"setReachLevel",value:function(e,t){e>0||(e=0);try{var i=this.getReachLevel(0);if(e>0&&0===i&&d.default.isUndefined(this.reachLevel)){g.logger.track("log_reach_level",{hashtag:t,reach_level:e});h.baseUtils.getLocalStorage()[this.siteUrl+"|reach-level"]=e,this.reachLevel=e}}catch(e){console.warn("set reach level error",e)}}},{key:"getShareUrl",value:function(e){return this.fullscreenUrl+"/"+this.compId+"/"+this.getItemId(e)+"/"+e.idx+"/"+encodeURIComponent("?i="+e.idx+"&p="+this.pageId+"&s="+this.styleId+"&rl="+this.getReachLevel(1)+(e.hashtag?"&ht="+e.hashtag:""))}},{key:"getItemId",value:function(e){return e.id||e.photoId||e.itemId}},{key:"shareImp",value:function(e,t,i){function r(e,t){try{if(h.baseUtils.isiOS()&&"Email"===t)window.location.href=e;else{var i=window.open(e,t+" Share","height=640,width=960,toolbar=no,menubar=no,scrollbars=no,location=no,status=no");setTimeout(function(){try{"Email"===t&&i.location.hasOwnProperty("pathname")&&"blank"===i.location.pathname&&i.close()}catch(e){console.warn("Could not close mailto window")}},5e3)}}catch(e){}}var n={id:this.getItemId(t),idx:t.idx||0,url:t.sample_url&&t.sample_url.img,title:t.title||t.description||this.siteInfo.siteTitle,hashtag:t.hashtag},o=encodeURIComponent(this.getShareUrl(n)),a=encodeURIComponent(n.title||""),s=encodeURIComponent(n.url),l=encodeURIComponent(this.siteInfo.siteKeywords),u=encodeURIComponent(""+this.getShareUrl(n));switch(d.default.isFunction(i)||(i=r),e){case"facebook":i("http://www.facebook.com/sharer/sharer.php?u="+o+"&t="+a,"Facebook");break;case"twitter":var c="&amp;text="+("undefined"===a?"":a);if(c.length>110)c=c.slice(0,107)+"...";else{var f="&amp;hashtags="+l;(c+f).length<=110&&(c+=f)}i("https://twitter.com/intent/tweet?url="+o+c,"Twitter");break;case"pinterest":i("https://pinterest.com/pin/create/button/?url="+o+"&media="+s.replace("webp","jpg")+"&description="+a,"Pinterest");break;case"google":i("https://plus.google.com/share?url="+o,"Google Plus");break;case"tumblr":i("http://www.tumblr.com/share/link?url="+o,"Tumblr");break;case"email":i("mailto:?Subject="+a+"&body="+u,"Email")}}},{key:"reportLoveToStats",value:function(e,t){try{if(!this.statsProps||!this.statsProps.instance_id)return void this.getStats();var i=d.default.merge(this.statsProps,{photo_id:e}),r=this.statsToken||window.statsToken,n=h.baseUtils.generateUUID();(0,b.default)({url:window.location.protocol+"//photographers-counters.wix.com/collector/rest/collect-js?ctToken="+r,method:"post",data:{messageId:n,metrics:[{type:"photo",reportMetrics:[{name:"love",value:String(t)}],properties:i}]}}).then(function(e){console.log("Success report love",e)})}catch(e){console.error("Error reporting love to stats",e)}}},{key:"getLoveStorageKey",value:function(e){return"pro-gallery-item-love-"+e}},{key:"isLoved",value:function(e){try{return void 0!==h.baseUtils.getLocalStorage()&&(!!h.baseUtils.getLocalStorage()[this.getLoveStorageKey(e)]||!1)}catch(e){console.warn("isLoved failed",e)}}},{key:"toggleLove",value:function(e,t,i){try{if(!h.baseUtils.getLocalStorage())return!1;var r=void 0;this.isLoved(e)&&!0!==i||!1===i?(h.baseUtils.getLocalStorage()[this.getLoveStorageKey(e)]="",r=-1):(g.logger.trackBi(g.logger.biEvents.love,{origin:t}),h.baseUtils.getLocalStorage()[this.getLoveStorageKey(e)]=!0,r=1),this.reportLoveToStats(e,r)}catch(e){console.warn("toggleLove failed",e)}}},{key:"isFirstLoveClick",value:function(e){try{return void 0===h.baseUtils.getLocalStorage()[this.getLoveStorageKey(e)]}catch(e){console.warn("isFirstLoveClick failed",e)}}},{key:"postLoveActivity",value:function(e){var t=this.getItemId(e);this.isFirstLoveClick(t)&&function(e){try{var t={type:p.default.Activities.Type.SOCIAL_TRACK,info:{type:e.activityType,channel:e.activityNetwork,itemInfo:{itemUrl:e.url,itemId:e.id,itemType:e.type.toUpperCase()}},details:{additionalInfoUrl:e.url,summary:""},contactUpdate:null},i=function(e){console.log("Activity ID: "+e.activityId+", Contact ID: "+e.contactId)},r=function(e){console.log("Failure message:",e)};p.default.Activities.postActivity(t,i,r)}catch(e){console.log("error posting activity.",e)}}({activityType:"LOVE",activityNetwork:"SITE",id:t,url:this.getShareUrl(e),type:e.type})}},{key:"showTooltip",value:function(e,t,i){if(!(document.getElementsByClassName("pro-tooltip").length>=1)){var r=e.currentTarget;if(r){var n=r.getBoundingClientRect(),o=n.top,a=n.left,s=void 0,l=void 0;try{l=window.innerWidth}catch(e){l=980}switch(void 0===i&&(i=a>l/2?"right":"left"),i){case"top":s={top:o-30,left:a+28,opacity:1};break;case"right":s={top:o-4,left:a-20,opacity:1};break;default:case"left":s={top:o-4,left:a+40,opacity:1}}s["pointer-events"]="none";var u=document.createElement("div");u.classList.add("pro-tooltip"),u.classList.add(i),u.style=s,u.innerHTML=y.default.getByKey(t),document.body.appendChild(u)}}}},{key:"hideTooltip",value:function(){document.body.removeChild(document.getElementsByClassName("pro-tooltip")[0])}},{key:"toggleTooltip",value:function(e,t,i){1===document.getElementsByClassName("pro-tooltip").length?this.hideTooltip():this.showTooltip(e,t,i)}},{key:"viewClassName",value:function(e,t){return"fullscreen"===e&&"desktop"===t?"fullscreen-icon":""}}]),e}();t.default=S;t.itemActions=new S},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(80),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e,i){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{src:72,evid:e,session_id:i,_:(new Date).getTime()}))}return o(t,e),t}(s.default);t.default=l},function(e,t,i){var r=i(40);e.exports=function(e,t,i){if(r(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var r=i(86),n=i(55);e.exports=function(e){return r(n(e))}},function(e,t){e.exports={}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.baseUtils=void 0;var n=i(19),o=r(n),a=i(106),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(13),f=r(h),p=i(7),g=r(p),m=i(73),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(m),v=function(){function e(){(0,u.default)(this,e),this._cache={},this._hash2int={},this._params={}}return(0,d.default)(e,[{key:"isUndefined",value:function(e){return void 0===e}},{key:"getOrPutFromCache",value:function(e,t){return void 0!==this._cache[e]?this._cache[e]:(this._cache[e]=t(),this._cache[e])}},{key:"isDemo",value:function(){return"1"===this.parseGetParam("demo")}},{key:"isInWix",value:function(){return this.isTest()||this.getOrPutFromCache("isInWix",function(){try{return top!==self&&"progallery.wix.com"===document.location.host&&document.location.search.indexOf("instance=")>=0}catch(e){return!1}})}},{key:"isSemiNative",value:function(){try{return window.semiNative}catch(e){return!1}}},{key:"hashToInt",value:function(e,t,i){var r=0;if(this.isUndefined(e)||0===e.length)return r;if(!this._hash2int[e]){for(var n=0;n<e.length;n++)r+=e.charCodeAt(n);this._hash2int[e]=r}return this.isUndefined(t)||this.isUndefined(i)?this._hash2int[e]:this._hash2int[e]%(i-t+1)+t}},{key:"parseGetParam",value:function(e,t){try{if(!this.isUndefined(this._params[e]))return this._params[e];var i="",r=[],n=location;if(t&&(n={search:"?"+(t.split("?")[1]||""),pathname:(t.split("?")[0]||"").split("/")[1]||""}),n.search.substr(1).split("&").forEach(function(t){r=t.split("="),r[0]===e&&(i=decodeURIComponent(r[1]))}),!i){var o=decodeURIComponent(n.pathname).split("?")[1];if(!o)return"";o.split("&").forEach(function(t){r=t.split("="),r[0]===e&&(i=decodeURIComponent(r[1]))})}return this._params[e]=i,i}catch(e){return!1}}},{key:"parsePathParam",value:function(e){for(var t=location.pathname,i=t.split("/"),r=0;r<i.length;r++){var n=i[r];if(n.indexOf(e)>=0)return n}return""}},{key:"parseHashParam",value:function(e){var t="",i=[],r=location.href.split("#")[1]||"";return r?(r.substr(1).split("&").forEach(function(r){i=r.split("="),i[0]===e&&(t=decodeURIComponent(i[1]))}),t):""}},{key:"stripSlashes",value:function(e){var t="";return"string"==typeof e&&(t=e.replace(/\\\//g,"/").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\0/g,"\0").replace(/\\\\/g,"\\")),t}},{key:"parseStringObject",value:function(e){if("string"!=typeof e)return e;var t=this.stripSlashes(e);if("string"==typeof e&&/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))try{return JSON.parse(t)}catch(e){}return t}},{key:"isWixMobile",value:function(){var e=this,t=function(){var t=e.parseGetParam("deviceType");return t?String(t).indexOf("mobile")>=0:void 0};return this.isSite()?this.getOrPutFromCache("isWixMobile",t):t()}},{key:"isUserAgentMobile",value:function(){try{var e=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|pixel|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};return this.isSite()?this.getOrPutFromCache("isUserAgentMobile",e):e()}catch(e){return!1}}},{key:"isMobile",value:function(){var e=this,t=function(){var t=e.isWixMobile(),i=e.isUserAgentMobile();return e.isUndefined(t)?i:t};return!this.isTest()&&(this.isSite()?this.getOrPutFromCache("isMobile",t):t())}},{key:"isTest",value:function(){try{return window.isTest}catch(e){return!1}}},{key:"isDev",value:function(){var e=this.isLocal();return this.isUndefined(this._cache.isDev)?(e=e||this.shouldDebug("ph_local"),e=e||"true"===this.parseGetParam("debug"),e=e||"true"===(this.safeLocalStorage()||{}).forceDevMode,this._cache.isDev=e,e):this._cache.isDev}},{key:"isVerbose",value:function(){return!this.isTest()&&"true"===(this.safeLocalStorage()||{}).forceDevMode}},{key:"isLocal",value:function(){var e=/([0-9]{1,3}\.){3}[0-9]{1,3}:[0-9]{1,5}/;if(!this.isUndefined(this._cache.isLocal))return this._cache.isLocal;var t=window.location.hostname,i="local.wix.com"===t||"0.0.0.0"===t||t.indexOf("localhost")>=0||null!==e.exec(t);return this._cache.isLocal=i,i}},{key:"isStoreGallery",value:function(){var e=this;return this.getOrPutFromCache("isStoreGallery",function(){if(e.isSemiNative())return!1;try{return window.location.search.toLowerCase().indexOf("isstore")>-1}catch(t){return e.isDev()&&console.error("cant find window",t),!1}})}},{key:"isDemoMode",value:function(){return f.default&&f.default.Utils&&f.default.Utils.getInstanceValue&&f.default.Utils.getInstanceValue("demoMode")}},{key:"updateViewMode",value:function(){try{if(window&&window.Wix&&window.Wix.Utils&&window.Wix.Utils.getViewMode)return this._cache.viewMode=window.Wix.Utils.getViewMode(),this._cache.viewMode}catch(e){return!1}}},{key:"getViewModeFromCache",value:function(){return this.getOrPutFromCache("viewMode",function(){try{return window&&window.Wix&&window.Wix.Utils&&window.Wix.Utils.getViewMode()}catch(e){return!1}})}},{key:"isEditor",value:function(){return!!this.isInWix()&&"editor"===this.getViewModeFromCache()}},{key:"isPreview",value:function(){return!!this.isInWix()&&"preview"===this.getViewModeFromCache()}},{key:"isSite",value:function(){return!this.isEditor()&&!this.isPreview()}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.floor(16*Math.random())||0;return"x"===e?t.toString(16):e})}},{key:"isInSettings",value:function(){return"1"===this.parseGetParam("expandsettingsmode")}},{key:"isExternalUrl",value:function(e){return/(^https?)|(^data)|(^blob)/.test(e)}},{key:"isMobileViewer",value:function(){if(this.isSite()&&!this.isUndefined(this._cache.isMobileViewer))return this._cache.isMobileViewer;var e=this.isWixMobile(),t=this.isUserAgentMobile();return this._cache.isMobileViewer=e&&!t,this._cache.isMobileViewer}},{key:"isiOS",value:function(){return this.getOrPutFromCache("isiOS",function(){try{return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}catch(e){return!1}})}},{key:"isiPhone",value:function(){return this.getOrPutFromCache("isiPhone",function(){try{return/iPhone/.test(navigator.userAgent)&&!window.MSStream}catch(e){return!1}})}},{key:"isTouch",value:function(){var e=this;return this.getOrPutFromCache("isTouch",function(){try{return e.isMobile()||"ontouchstart"in document.documentElement}catch(e){return!1}})}},{key:"browserIs",value:function(e){var t={chrome:!1,chromeIos:!1,explorer:!1,firefox:!1,safari:!1,opera:!1};try{return this.isUndefined(this._cache.browsers)&&(t.chrome=navigator.userAgent.indexOf("Chrome")>-1,t.chromeIos=navigator.userAgent.indexOf("CriOS")>-1,t.explorer=navigator.userAgent.indexOf("MSIE")>-1||!!navigator.userAgent.match(/Trident.*rv\:11\./),t.firefox=navigator.userAgent.indexOf("Firefox")>-1,t.safari=navigator.userAgent.indexOf("Safari")>-1,t.opera=navigator.userAgent.toLowerCase().indexOf("op")>-1,t.chrome&&t.safari&&(t.safari=!1),t.chrome&&t.opera&&(t.chrome=!1),this._cache.browsers=t),this._cache.browsers[e]}catch(e){return this._cache.browsers=t,!1}}},{key:"isPlayground",value:function(){if(this.isInWix())return!1;try{var e=!1;try{e=top.location.href.indexOf("playground.html")>0}catch(t){e=!1}return e}catch(e){return!1}}},{key:"isInAlbumsBuilder",value:function(){if(!this.isInWix())return!1;try{return window&&window.debugApp&&window.debugApp.indexOf("ph_source_albums")>-1}catch(e){return!1}}},{key:"isWixDomain",value:function(){try{return window.location.href.indexOf("wix.com")>=0}catch(e){return!1}}},{key:"isLandscape",value:function(){if(this.isSemiNative())return!1;if(!this.isUndefined(this._cache.isLandscape))return this._cache.isLandscape;this.isMobile()||(this._cache.isLandscape=!1);try{if(this.isUndefined(window.orientation)){var e=window.matchMedia("(orientation: landscape)");e&&!0===e.matches?this._cache.isLandscape=!0:this._cache.isLandscape=!1}else this._cache.isLandscape=90===window.orientation||-90===window.orientation}catch(e){this._cache.isLandscape=!1}return this._cache.isLandscape}},{key:"isOnBoarding",value:function(){try{var e=y.parse(window.location.search);return e.viewMode&&"onboarding"===e.viewMode.toLowerCase()}catch(e){return!1}}},{key:"isAccessibilityEnabled",value:function(){var e=this;if(void 0!==this._cache.isAccessibilityEnabled)return this._cache.isAccessibilityEnabled;if(!this.isSite())return!1;var t=this.shouldDebug("accessibility");if(f.default&&"function"==typeof f.default.isVisualFocusEnabled)try{f.default.isVisualFocusEnabled(function(i){e._cache.isAccessibilityEnabled=i||t})}catch(e){}return t}},{key:"isDebugBuild",value:function(){try{return!1}catch(e){return!1}}},{key:"getDeviceType",value:function(){return this.isWixMobile()?"mobile":"desktop"}},{key:"safeLocalStorage",value:function(){try{return localStorage}catch(e){return window}}},{key:"shouldDebug",value:function(e){try{return!!this.safeLocalStorage()[e]||(window.debugApp||"").indexOf(e)>=0||(this.parseGetParam("debugApp")||"").indexOf(e)>=0}catch(e){return!1}}},{key:"shouldLog",value:function(e){return this.shouldDebug("ph_log_"+e)}},{key:"getDateCreatedTicksFromStr",value:function(e){return!1===isNaN(Date.parse(e))?Date.parse(e):-864e13}},{key:"deviceHasMemoryIssues",value:function(){return this.isiOS()}},{key:"getUrlPrefix",value:function(e){try{return window.location.protocol+"//"+(!e&&this.isLocal()?"local.wix.com:3001":"progallery.wix.com")+"/"}catch(e){return"http://progallery.wix.com/"}}},{key:"getFullscreenSectionId",value:function(){return this.isStoreGallery()?"fullscreen_store_page":"fullscreen_page"}},{key:"getApiUrlPrefix",value:function(){return this.getUrlPrefix(!0)+"api/v1/"}},{key:"generateUrl",value:function(e,t){t=t||{};var i=this.isStoreGallery(),r=this.getUrlPrefix()+e;i&&(t.isStore=!0);var n=y.stringify(t);return n?r+"?"+n:r}},{key:"getManageMediaUrl",value:function(){return this.generateUrl("photos.html")}},{key:"getExpandSettingsUrl",value:function(e){return this.generateUrl("settings-expand.html",e)}},{key:"getSettingsWatermarkDisableUrl",value:function(){return this.generateUrl("settings-watermark-disable.html")}},{key:"getSettingsAddonsUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.generateUrl("settings-addons.html",e)}},{key:"getProviderModalUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.generateUrl("provider-modal.html",e)}},{key:"getTabIndex",value:function(e){return["currentGalleryItem","loadMoreButton","slideshowNext","slideshowPrev","currentThumbnail","slideshowLove","slideshowShare","cartIcon","cartClose","cartFrame","fullscreenClose","fullscreenNext","fullscreenPrev","fullscreenInfo","fullscreenLink","fullscreenProvider","fullscreenCartButton","fullscreenCheckout","fullscreenExpand","fullscreenVideoPlay","fullscreenVideoBar","fullscreenVideoMute","fullscreenVideoVolume","fullscreenCartIcon","fullscreenDownload","fullscreenLove","fullscreenShare"].indexOf(e)+1||-1}},{key:"safeSessionStorage",value:function(){try{return sessionStorage}catch(e){return window||{}}}},{key:"getLocalStorage",value:function(){return this.isDev()?this.safeSessionStorage():this.safeLocalStorage()||this.safeSessionStorage()}},{key:"setStateAndLog",value:function(e,t,i,r){var n=this;if(this.isVerbose()){console.log("State Change Called ("+t+")",i);var o=g.default.clone(e.state);e.setState(i,function(){var i=g.default.clone(e.state),a=n.printableObjectsDiff(o,i,"state");g.default.keys(a).length>0&&console.log("State Change Completed ("+t+")",a),g.default.isFunction(r)&&r.bind(e)()})}else e.setState(i,function(){g.default.isFunction(r)&&r.bind(e)()})}},{key:"printableObjectsDiff",value:function(e,t){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=function(e){return""===e?e="''":i.isUndefined(e)&&(e="undefined"),g.default.toString(e)};return function e(t,i,r){return g.default.reduce(t,function(t,o,a){return g.default.isEqual(o,i[a])||(g.default.isArray(i[a])?(o.length!==i[a].length&&(t[a+".length"]="["+o.length+"] => ["+i[a].length+"]"),t=g.default.merge(t,e(o,i[a],(r?r+".":"")+a))):g.default.isObject(i[a])?t=g.default.merge(t,e(o,i[a],(r?r+".":"")+a)):t[(r?r+".":"")+a]=n(o)+" => "+n(i[a])),t},{})}(e,t,r)}},{key:"getUrlParam",value:function(e){try{window.location.search.replace("?","").split("&").filter(function(e){return-1!==e.indexOf("=")}).map(function(e){var t=e.split("="),i=(0,s.default)(t,2);return{key:i[0],value:i[1]}}).filter(function(t){return t.key===e}).shift()}catch(e){return""}}},{key:"isMacOs",value:function(){try{"mac-os"===window.source||this.getUrlParam("macos")}catch(e){return!1}}},{key:"setExternalId",value:function(){try{var e=this.getUUID();this._setExternalId(e),setTimeout(this._setExternalId.bind(this),4e3,e)}catch(e){return console.error("Utils setExternalId - fail"),!1}}},{key:"_setExternalId",value:function(e){var t=this;f.default.Settings.setExternalId(e,function(i){t.isDev()&&console.log("Utils setExternalId - success",e,i)},function(t){console.error("Utils setExternalId - fail",e,t)})}},{key:"isWebpSupported",value:function(){if(this.isTest())return!1;try{var e="object"===("undefined"==typeof document?"undefined":(0,o.default)(document))?document.createElement("canvas"):{};return e.width=e.height=1,!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp")}catch(e){return!1}}}]),e}();t.default=v;t.baseUtils=new v},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var n=i(74),o=r(n),a=i(10),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(259),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(h),p=i(28),g=i(13),m=r(g),y=i(30),v=r(y),b=i(263),w=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,_=function(e,t){for(var i in e)e.hasOwnProperty(i)&&(e[i]=e[i].replace(w,t))},S=function(){function e(t){(0,u.default)(this,e),this.needsGalleryType=function(e){return[401,403,406,500,501,502,700,703,704].indexOf(e)>-1},this.initVisitorId(),this.biLogger=!(!f||!f.BI)&&new f.BI.Logger(t);try{this.protocol=window.location.protocol,this.performance=window.performance}catch(e){this.protocol="http:",this.performance=!1}this.biEvents={store_banner_clicked:{evid:182},add_pro_gallery:{evid:400},change_settings:{evid:401},mange_media_upper_panel_open:{evid:402},pro_gallery_settings_load:{evid:403},manage_media_set:{evid:404},manage_media_text_editor_customize:{evid:405},upload_media:{evid:406},upload_media_error:{evid:407},remove_media_from_gallery:{evid:408},layouts_select:{evid:409},gallery_performance:{evid:410},settings_tab_navigation:{evid:411},share:{evid:500},love:{evid:501},download:{evid:502},info:{evid:503},expand:{evid:504},payment_excepted:{evid:506},payment_error:{evid:507},pro_gallery_load_error:{evid:509},pro_gallery_loaded:{evid:510},pro_gallery_error:{evid:512},pro_gallery_load_users:{evid:177},pro_gallery_load_uou:{evid:304},select_photo:{evid:600},share_group:{evid:601},log_reach_level:{evid:602},manageMediaClick:{evid:700},storeSetUpTab:{evid:702},expandSettings:{evid:703},expandSettingsDone:{evid:704},watermarkSettings:{evid:705},watermarkEnable:{evid:706},cartSettings:{evid:708},cartSettingsDesignTab:{evid:709},openStoreDashboard:{evid:727},saveBusinessInfo:{evid:728},artStore_startNow:{evid:729},artStore_chooseSellingMethod:{evid:730},buyNowClick:{evid:800}}}return(0,d.default)(e,[{key:"getGalleryType",value:function(){return p.baseUtils.isStoreGallery()?"store":"progallery"}},{key:"track",value:function(e,t,i){var r=this.biEvents[e];return r?this.trackBi(r,t,i):(console.error("TRACK EVENT ERROR - No such bi event "+e),!1)}},{key:"trackBi",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(!e)return console.error("TRACK EVENT ERROR - No such bi event"),!1;if(!this.biParams){var r={};if(!p.baseUtils.isTest())try{r=(0,b.getBiContext)(m.default)}catch(e){console.error("getBiContext:",e)}this.biParams=(0,s.default)({},r,{gallery_id:this.getParam("galleryId"),src:65})}var n=e.evid;if(404===n&&_(t,"-omitted email-"),!this.isUserOfUserEvent(n)||"site"===p.baseUtils.getViewModeFromCache()){this.needsGalleryType(n)&&(t.galleryType=this.getGalleryType());try{var o=e.defaultParams||{},a=(0,s.default)({},o,t,this.biParams);this.biLog(n,a,i)}catch(e){console.warn("BI LOGGER ERROR!",e)}}}},{key:"stats",value:function(e,t,i,r){var n=1;"unlove"===r&&(n=-1,r="love");var o=p.baseUtils.generateUUID();(0,v.default)({url:this.protocol+"//photographers-counters.wix.com/collector/rest/collect-js?ctToken="+e,method:"post",data:{messageId:o,metrics:[{type:"album",reportMetrics:[{name:r,value:n}],properties:{instance_id:t,album_id:i}}]}}).then(function(e){console.log("yeeee",e)})}},{key:"biLog",value:function(e,t,i){if(!p.baseUtils.isDev()&&!p.baseUtils.isTest()){if(!this.biLogger)return void console.warn("no biLogger, cannot log event");if(void 0===e)return void console.warn("evid is missing, cannot log event",e,t);if(void 0===t)return void console.warn("params are missing, cannot log event",e,t);var r=(0,s.default)({evid:e},t),n=this.getAdapter(e);null!==n&&(0,s.default)(r,{adapter:n}),this.biLogger.log(r,i)}}},{key:"isBot",value:function(){return/bot|googlebot|crawler|spider|robot|crawling|bing/i.test(navigator.userAgent)}},{key:"trackLoadBi",value:function(e){var t=this,i="site"===p.baseUtils.getViewModeFromCache()?this.biEvents.pro_gallery_load_uou:this.biEvents.pro_gallery_load_users;try{if(!this.isBot())if(i===this.biEvents.pro_gallery_load_users||this.visitorId){var r=this.performance?this.performance.timing.domContentLoadedEventEnd-this.performance.timing.navigationStart:null;this.trackBi(i,{endpoint:e,loading_time:r})}else this.onInitVisitorId=function(){return t.trackLoadBi(e)}}catch(e){console.error("track load event error",e)}}},{key:"initBiLoadedEventListener",value:function(e){var t=this;try{window.addEventListener("load",function(){t.trackLoadBi(e)})}catch(e){}}},{key:"initVisitorId",value:function(){var e=this;if("site"===p.baseUtils.getViewModeFromCache()){if(void 0===o.default)return void console.error("promise is undefined in initVisitorId. Cant init visitor id");var t=Date.now();new o.default(function(e){return e(m.default.Utils.getInstanceValue("aid")||m.default.Utils.getInstanceValue("uid"))}).then(function(i){e.visitorId=i,e.onInitVisitorId&&e.onInitVisitorId();var r=Date.now()-t;r>9e3&&console.error("took over 9000ms to get the visitor id",r+"ms")}).catch(function(e){return console.error("cant get visitorID/sessionToken",e)}),setTimeout(function(){e.visitorId||console.error("waiting 9000ms for visitorID/sessionToken")},9e3)}}},{key:"isInRange",value:function(e,t,i){return e>=t&&e<i}},{key:"isUserEvent",value:function(e){return!this.isUserOfUserEvent(e)}},{key:"isUserOfUserEvent",value:function(e){return this.isInRange(e,500,605)||304===e||800===e}},{key:"getAdapter",value:function(e){var t=void 0;return this.isUserEvent(e)?t="photo-users":this.isUserOfUserEvent(e)?t="photo-ugc":console.error("evid",e,"is not user, or uou event (???)"),t}},{key:"getParam",value:function(e){var t=/^\$\{.*\}$/,i=String(window[e]);if(i&&null===t.exec(i))return i;var r="",n=[];return location.search.substr(1).split("&").forEach(function(t){n=t.split("="),n[0]===e&&(r=decodeURIComponent(n[1]))}),r}}]),e}(),I={defaultEventArgs:{},defaultErrorArgs:{},adapter:"photo-users"};t.logger=new S(I)},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_30__},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var r=i(85),n=i(60);e.exports=Object.keys||function(e){return r(e,n)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,i){var r=i(55);e.exports=function(e){return Object(r(e))}},function(e,t,i){"use strict";var r=i(155)(!0);i(90)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=r(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(98),n=i(197),o=i(198),a=i(199),s=i(101);i(100);i.d(t,"createStore",function(){return r.b}),i.d(t,"combineReducers",function(){return n.a}),i.d(t,"bindActionCreators",function(){return o.a}),i.d(t,"applyMiddleware",function(){return a.a}),i.d(t,"compose",function(){return s.a})},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(132),o=r(n),a=i(133),s=i(134),l=i(291),u=r(l);e.exports={Layouter:o.default,Group:s.Group,Item:a.Item,createLayout:u.default}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var i=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var r=i(16).f,n=i(21),o=i(12)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,i){i(158);for(var r=i(11),n=i(20),o=i(27),a=i(12)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],d=c&&c.prototype;d&&!d[a]&&n(d,a,u),o[u]=o.Array}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(177),n=i(97),o=i(183);i.d(t,"Provider",function(){return r.b}),i.d(t,"createProvider",function(){return r.a}),i.d(t,"connectAdvanced",function(){return n.a}),i.d(t,"connect",function(){return o.a})},function(e,t,i){e.exports={default:i(212),__esModule:!0}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){return p.default.isInWix()&&!p.default.isDemo()?function(e){m.default.getBoundingRectAndOffsets(function(t){e({type:y.SET_WIX_DATA,boundingRectAndOffsets:t})})}:{type:y.SET_WIX_DATA}}function o(){return{type:y.NAVIGATION_IN}}function a(e){return{videoPlayMode:e,type:y.VIDEO_PLAY_MODE}}function s(e){return{type:y.VIDEO_ENDED}}function l(e){return{payload:e,type:y.VIDEO_ADDED}}function u(e){return{type:y.VIDEO_REMOVED,payload:e}}function c(e){return{documentHeight:e.documentHeight,type:y.GALLERY_WINDOW_LAYOUT_CHANGED}}function d(){return{type:y.EDITOR_MODE_CHANGED}}function h(e){return{type:y.TOGGLE_HOVER_PREVIEW,toggle:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initWixData=n,t.navigationIn=o,t.videoPlayModeChanged=a,t.videoEnded=s,t.videoAdded=l,t.videoRemoved=u,t.galleryWindowLayoutChanged=c,t.editorModeChanged=d,t.toggleHoverPreview=h;var f=i(3),p=r(f),g=i(13),m=r(g),y=i(68)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),u=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},c=i(2),d=r(c),h=i(78),f=r(h),p=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|ogg|spx)($|\?)/i,g=function(e){function t(){var e,i,r,a;n(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.ref=function(e){r.player=e},a=i,o(r,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,i=this.props,r=i.onPause,n=i.onEnded,o=i.onError;this.player.addEventListener("canplay",this.onReady),this.player.addEventListener("play",this.onPlay),this.player.addEventListener("pause",function(){e.mounted&&r()}),this.player.addEventListener("ended",n),this.player.addEventListener("error",o),this.player.setAttribute("webkit-playsinline",""),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){var e=this.props,i=e.onPause,r=e.onEnded,n=e.onError;this.player.removeEventListener("canplay",this.onReady),this.player.removeEventListener("play",this.onPlay),this.player.removeEventListener("pause",i),this.player.removeEventListener("ended",r),this.player.removeEventListener("error",n),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"load",value:function(e){this.player.src=e}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src")}},{key:"seekTo",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seekTo",this).call(this,e),this.player.currentTime=this.getDuration()*e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"setPlaybackRate",value:function(e){this.player.playbackRate=e}},{key:"getDuration",value:function(){return this.isReady?this.player.duration:null}},{key:"getFractionPlayed",value:function(){return this.isReady?this.player.currentTime/this.getDuration():null}},{key:"getFractionLoaded",value:function(){return this.isReady&&0!==this.player.buffered.length?this.player.buffered.end(0)/this.getDuration():null}},{key:"stopBuffering",value:function(){var e=this;this.player.pause();var t=this.player.currentTime,i=function i(){e.player.currentTime=t,e.player.removeEventListener("loadedmetadata",i)};this.player.addEventListener("loadedmetadata",i),this.player.load();try{i()}catch(e){}}},{key:"render",value:function(){var e=this.props,t=e.url,i=e.loop,r=e.controls,n=e.fileConfig,o=p.test(t)?"audio":"video",a={width:"100%",height:"100%",display:t?"block":"none"};return d.default.createElement(o,s({ref:this.ref,style:a,preload:"auto",controls:r,loop:i},n.attributes))}}],[{key:"canPlay",value:function(e){return!0}}]),t}(f.default);g.displayName="FilePlayer",t.default=g,e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={SHOW_ON_HOVER:"SHOW_ON_HOVER",SHOW_ALWAYS:"SHOW_ALWAYS",DONT_SHOW:"DONT_SHOW"},n={SIDE_BAR_WIDTH:430,STORE_SIDE_BAR_WIDTH:560,MOBILE_PADDING:120,NO_PADDING:0};t.default={placements:r,dimensions:n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(126),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={getNavigation:function(){return window&&window.performance?window.performance.navigation:{}},getResources:function(){var e=[];try{return window&&window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("resource")||e}catch(t){return e}},getTiming:function(){return window&&window.performance?window.performance.timing:{}},now:function(){return window&&window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},mark:function(e){n.default.isFedopsDev()&&window&&window.performance&&window.performance.mark&&window.performance.mark(e)},measure:function(e,t,i){n.default.isFedopsDev()&&window&&window.performance&&window.performance.measure&&window.performance.measure(e,t,i)}}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(3),d=r(c),h=i(39),f=i(7),p=r(f),g=i(294),m=r(g),y=i(297),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(y),b=function(){function e(t){var i=this;if((0,s.default)(this,e),this.uniqueId=d.default.generateUUID(),this.isGalleryItem=!0,this.createdBy=t.createdBy,t.dto&&t.dto.dto&&(t.dto=t.dto.dto,d.default.isDev()&&console.warn("Item core is created with already existing item core")),this.dto=p.default.merge({},t.dto),p.default.merge(this,t.dto),t.scheme)this.processScheme(t.scheme);else{var r={};(0,o.default)(r,this.dto,this.metadata),this.processScheme(new h.Item({dto:r}).scheme)}if(t.wixImage&&p.default.isNumber(t.orderIndex)&&this.createFromWixImage(t.wixImage,t.orderIndex,t.addWithTitles,t.isSecure),t.wixVideo&&p.default.isNumber(t.orderIndex)&&this.createFromWixVideo(t.wixVideo,t.orderIndex,t.addWithTitles,t.isSecure),t.wixExternal&&p.default.isNumber(t.orderIndex)&&this.createFromExternal(t.wixExternal,t.orderIndex,t.addWithTitles,t.isSecure),this.dto){var n=this.dto.metaData||this.dto.metadata;n&&(this.dto.metaData=d.default.parseStringObject(n))}if(d.default.isStoreGallery()&&!this.isVideo)if(this.watermark=t.watermark,this.watermark){if("string"==typeof this.watermark)try{this.watermark=JSON.parse(this.watermark)}catch(e){console.error("item-core - given watermark ("+this.watermark+") is not an object",e)}this.watermarkStr="",this.watermark.imageUrl&&(this.watermarkStrSdk=this.watermark.imageUrl+"-"+this.watermark.opacity+"-"+this.watermark.position+"-"+this.watermark.size,this.watermarkStr=",wm_"+this.watermarkStrSdk)}else m.default.getWatermarkData().then(function(e){i.watermark=e,i.watermarkStrSdk=i.watermark&&i.watermark.imageUrl?i.watermark.imageUrl+"-"+i.watermark.opacity+"-"+i.watermark.position+"-"+i.watermark.size:"",i.watermarkStr=i.watermark&&i.watermark.imageUrl?",wm_"+i.watermarkStrSdk:""});this.sharpParams=p.default.merge({},t.sharpParams),this.sharpParams.quality||(this.sharpParams.quality=90),this.sharpParams.usm||(this.sharpParams.usm={}),this.updateSharpParams(),this.createUrls()}return(0,u.default)(e,[{key:"processScheme",value:function(e){this.id=e.id,this.idx=e.idx,this.type=e.type,this.style=e.style,this.width=e.width,this.maxWidth=e.maxWidth,this.height=e.height,this.maxHeight=e.maxHeight,this.margins=e.margins,this.ratio=e.ratio,this.cubeRatio=e.cropRatio,this.cubeImages=e.isCropped,this.cubeType=e.cropType||"fill",this.offset=e.offset,this.group=e.group,this.transform=e.transform,this.orientation=e.orientation,this.visibility=e.visibility}},{key:"renderProps",value:function(e){return p.default.merge({className:"image",key:this.key,idx:this.idx,photoId:this.photoId,id:this.id,hash:this.id,html:this.html,type:this.type,url:this.url,alt:this.alt,linkUrl:this.linkUrl,linkOpenType:this.linkOpenType,originalsUrl:this.getOriginalsUrl(),title:this.title,fileName:this.fileName,description:this.description,full_url:this.full_url,download_url:this.download_url,sample_url:this.sample_url,square_url:this.square_url,pixel_url:this.pixel_url,resized_url:this.resized_url,thumbnail_url:this.thumbnail_url,cubeImages:this.cubeImages,cubeType:this.cubeType,cubeRatio:this.cubeRatio,transform:this.transform,offset:this.offset,style:p.default.merge({bgColor:this.bgColor,maxWidth:this.maxWidth,maxHeight:this.maxHeight,ratio:this.ratio,orientation:this.orientation},this.style),isDemo:this.isDemo,videoUrl:this.videoUrl,isExternalVideo:this.isExternalVideo,scroll:e.scroll,visible:e.visible,styleParams:e.styleParams,actions:e.actions,currentIdx:e.currentIdx},e)}},{key:"getDataForShop",value:function(){var e=this.focalPoint,t=this.metadata;return{isDemo:t.isDemo,orderIndex:this.orderIndex,itemId:this.dto.itemId,originalUrl:this.getOriginalsUrl(),itemUrl:this.url,itemHeight:t.height,title:t.title,itemWidth:t.width,itemType:t.type||"image",imageUrl:this.resizedUrl("fit",200,200,null,null).img,imagePurchasedUrl:this.dto.mediaUrl,fpX:e[0],fpY:e[1]}}},{key:"createFromWixImage",value:function(e,t,i,r){var n=e.uri||e.relativeUri||e.url,o=n.slice(0,n.length-4),a={createdOn:(new Date).getTime(),height:e.height,width:e.width,lastModified:(new Date).getTime(),focalPoint:e.focalPoint,name:e.fileName,fileName:e.title,title:"",type:e.type,link:this.initialLinkObject,sourceName:e.sourceName,tags:e.tags,wm:e.wm};i&&(a.title=e.title),this.dto={itemId:o,mediaUrl:n,orderIndex:t,metadata:a,isSecure:r}}},{key:"createFromWixVideo",value:function(e,t,i,r){var n=p.default.map(e.fileOutput.video,function(e){return{height:e.height,width:e.width,quality:e.quality,formats:[e.format]}}),o=p.default.map(e.fileOutput.image,p.default.partialRight(p.default.pick,["url","width","height"]));o=p.default.map(o,function(e){return e.url=e.url.replace("media/",""),e});var a=this.getHighestMp4Resolution(n),s={createdOn:(new Date).getTime(),name:e.title,lastModified:(new Date).getTime(),width:a.width,height:a.height,type:"video",posters:o,customPoster:"",isExternal:!1,duration:e.fileInput.duration,qualities:n,link:this.initialLinkObject};i&&(s.title=e.title);var l=e.fileBaseUrl.replace("video/","");this.dto={itemId:e.id,mediaUrl:l,orderIndex:t,metaData:s,isSecure:r}}},{key:"getHighestMp4Resolution",value:function(e){var t=e.filter(function(e){return"mp4"===e.formats[0]}),i=t.sort(function(e,t){return t.width-e.width})[0];return{width:i.width,height:i.height}}},{key:"createFromExternal",value:function(e,t,i,r){var n={createdOn:(new Date).getTime(),name:e.id,videoId:e.id,lastModified:(new Date).getTime(),height:1080,width:1920,source:e.source||"",videoUrl:e.videoUrl||"",isExternal:!0,type:"video",posters:e.posters,customPoster:"",duration:0,qualities:[]};this.dto={itemId:e.id,mediaUrl:n.posters[0].url,orderIndex:t,metaData:n,isSecure:r}}},{key:"useImageClientApi",value:function(){var e=!(window&&window.petri&&"false"===window.petri["specs.pro-gallery.ImageClientApi"]),t=!this.isDimensionless,i=!(window&&window.document),r=!!this.watermark;return t&&e&&!i&&!r}},{key:"resizeUrlImp",value:function(e,t,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments[7];return this.useImageClientApi()?this.resizeUrlImp_sdk(e,t,i,r,n,o,a,s):this.resizeUrlImp_manual(e,t,i,r,n,o,a,s)}},{key:"resizeUrlImp_manual",value:function(e,t,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments[7],l=i/r,u=a&&this.watermarkStr;if(d.default.isMobile()||(i=250*Math.ceil(i/250),r=Math.ceil(i/l)),n=n||{},n.quality||(n.quality=90),n.quality=Math.min(90,n.quality),n.usm&&n.usm.usm_r&&(n.usm.usm_a=Math.min(5,Math.max(0,n.usm.usm_a||0)),n.usm.usm_r=Math.min(128,Math.max(0,n.usm.usm_r||0)),n.usm.usm_t=Math.min(1,Math.max(0,n.usm.usm_t||0))),d.default.isExternalUrl(e))return e;if(s){var c=void 0,h=void 0,f=void 0,p=void 0,g=void 0;this.ratio>l?(c=r/this.maxHeight,p=Math.floor(r*this.ratio),f=0,h=Math.round(p*s[0]-i/2),h=Math.min(p-i,h),h=Math.max(0,h)):(c=i/this.maxWidth,g=Math.floor(i/this.ratio),h=0,f=Math.round(g*s[1]-r/2),f=Math.min(g-r,f),f=Math.max(0,f)),c=Math.ceil(100*c)/100;var m="https://static.wixstatic.com/media/"+e+"/v1/crop/";return m+="w_"+i,m+=",h_"+r,m+=",x_"+h,m+=",y_"+f,m+=",scl_"+c.toFixed(2),m+=",q_"+n.quality,m+=n.usm&&n.usm.usm_r?",usm_"+n.usm.usm_r.toFixed(2)+"_"+n.usm.usm_a.toFixed(2)+"_"+n.usm.usm_t.toFixed(2):"",u&&(m+=this.watermarkStr),m+="/"+e}var y="https://static.wixstatic.com/media/"+e+"/v1/"+t+"/";return y+="w_"+i,y+=",h_"+r,y+=",al_"+(o?"fs":"c"),y+=",q_"+n.quality,y+=n.usm&&n.usm.usm_r?",usm_"+n.usm.usm_r.toFixed(2)+"_"+n.usm.usm_a.toFixed(2)+"_"+n.usm.usm_t.toFixed(2):"",u&&(y+=this.watermarkStr),y+="/"+e}},{key:"resizeUrlImp_sdk",value:function(e,t,i,r,n){var o=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6]),a=arguments[7],s=i/r;o&&this.watermarkStr;d.default.isMobile()||(i=250*Math.ceil(i/250),r=Math.ceil(i/s)),e=e||"",n=n||{},n.quality>0&&(n.quality=Math.min(90,n.quality));var l={x:50,y:50};if(a&&2===a.length&&(l.x=Math.round(100*a[0]),l.y=Math.round(100*a[1])),n.usm&&n.usm.usm_r&&(n.usm.usm_a=Math.min(5,Math.max(0,n.usm.usm_a||0)),n.usm.usm_r=Math.min(128,Math.max(0,n.usm.usm_r||0)),n.usm.usm_t=Math.min(1,Math.max(0,n.usm.usm_t||0))),d.default.isExternalUrl(e))return e;var u=p.default.noop;u="fit"===t?v.getScaleToFitImageURL:v.getScaleToFillImageURL;var c={};n.quality>0&&(c.quality=n.quality),l&&(c.focalPoint=l),n&&n.usm&&(c.unsharpMask={radius:n.usm.usm_r,amount:n.usm.usm_a,threshold:n.usm.usm_t}),this.watermarkStrSdk&&(c.watermark=this.watermarkStrSdk);var h="";return e.indexOf("/")<0&&(h="media/"),u(h+e,this.maxWidth,this.maxHeight,i,r,c)}},{key:"createUrls",value:function(){var e=this.useImageClientApi()?1:d.default.getDevicePixelRatio(),t=this.maxWidth||this.dto.width||this.metadata.width,i=this.maxHeight||this.dto.height||this.metadata.height;this.resizeWidth=Math.min(t,Math.ceil(this.width*e)),this.resizeHeight=Math.min(i,Math.ceil(this.height*e)),this.resized_url=this.resizedUrl(this.cubeType,this.resizeWidth,this.resizeHeight,this.sharpParams,!1),this.pixel_url=this.resizedUrl("fill",1,1,{quality:30},!1);this.thumbnailWidth=Math.min(t,this.width,500),this.thumbnailHeight=Math.min(i,this.height,500),this.thumbnail_url=this.resizedUrl("fit",this.thumbnailWidth,this.thumbnailHeight,{quality:30},!1),this.square_url=this.resizedUrl("fill",100,100,{quality:80},!1),this.full_url=this.resizedUrl(this.cubeType,this.maxWidth,this.maxHeight,this.sharpParams,!1),this.sample_url=this.resizedUrl("fit",500,500,this.sharpParams,!1,!0),this.download_url=d.default.isStoreGallery()?this.sample_url:{img:this.getOriginalsUrl(),mp4:this.full_url.mp4},this.download_url.img&&(this.download_url.img+="?dn="+this.fileName)}},{key:"resizedUrl",value:function(e,t,i,r,n,o){if(this.isText)return{};t=Math.round(t),i=Math.round(i);var a={};if(this.metadata.posters||this.metadata.customPoster){var s=this.metadata.qualities,l=this.metadata.customPoster||(this.metadata.posters?this.metadata.posters[this.metadata.posters.length-1]:null);if(l){if(s&&s.length){for(var u,c="/",d=s.filter(function(e){return"mp4"===e.formats[0]}),h=0;u=d[h];h++)if(u.height>=i||u.height>=720||!d[h+1]){c+=u.quality;for(var f,p=0;f=u.formats[p];p++)a[f]=window.location.protocol+"//video.wixstatic.com/video/"+this.url+c+"/"+f+"/file."+f;break}var g=l.width/l.height;g>1?t=Math.ceil(i*g):i=Math.ceil(t/g)}a.img=this.resizeUrlImp(l.url,e,t,i,r,n,!1),a.thumb=this.resizeUrlImp(l.url,"fit",180,180,r,!1,!1)}}else{var m=!0!==o&&this.isCropped&&this.focalPoint;a.img=this.resizeUrlImp(this.url,e,t,i,r,n,!0,m),a.thumb=this.resizeUrlImp(this.url,"fit",180,180,r,n,!0,m)}return a}},{key:"getOriginalsUrl",value:function(){return"https://static.wixstatic.com/media/"+this.url}},{key:"updateSharpParams",value:function(){if(this.dto.metaData&&this.dto.metaData.sharpParams&&this.dto.metaData.sharpParams.L){var e=this.dto.metaData.sharpParams.L;e.quality&&!0===e.overrideQuality&&(this.sharpParams.quality=e.quality),e.usm&&!0===e.overrideUsm&&(this.sharpParams.usm=e.usm)}}},{key:"updateId",value:function(e){this.dto.itemId=this.id=e}},{key:"updateOrderIndex",value:function(e){var t=this.orderIndex!==e;return this.orderIndex=e,t}},{key:"itemId",get:function(){return this.id}},{key:"metadata",get:function(){var e=this.dto.metaData||this.dto.metadata;return p.default.isUndefined(e)&&(e={}),e}},{key:"metaData",get:function(){return this.metadata}},{key:"bgColor",get:function(){return this.isText?this.metadata&&this.metadata.textStyle&&this.metadata.textStyle.backgroundColor:"none"}},{key:"isCropped",get:function(){return this.cubeImages&&"fill"===this.cubeType}},{key:"focalPoint",get:function(){return this.metadata.focalPoint||[.5,.5]},set:function(e){this.metadata.focalPoint=e}},{key:"demoTitle",get:function(){return"I am a title, only a sample title but still a title. "}},{key:"demoDescription",get:function(){return"I am a description, the best description ever! Here is some lorem ipsum for you: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}},{key:"demoExif",get:function(){return{GPSVersionID:"2.2.0.0",GPSAltitudeRef:"1.8",GPSAltitude:"0",Make:"LG Electronics",Model:"LG-H815L",Orientation:"right-top",XResolution:"72",YResolution:"72",ResolutionUnit:"2",Software:"Picasa",DateTime:"2016:04:17 07:19:25",YCbCrPositioning:"1",ExposureTime:"0.041666666666666664",FNumber:"1.8",ExifIFDPointer:"214",ExposureProgram:"Undefined",GPSInfoIFDPointer:"1262",PhotographicSensitivity:"200",ExifVersion:"0220",DateTimeOriginal:"2016:04:17 07:19:25",DateTimeDigitized:"2016:04:17 07:19:25",ComponentsConfiguration:"YCbCr",ShutterSpeedValue:"4.585",ApertureValue:"1.69",BrightnessValue:"-0.88",ExposureBias:"0",MeteringMode:"CenterWeightedAverage",Flash:"Flash did not fire, compulsory flash mode",FocalLength:"4.42",UserComment:"32,32,32,70,77,49,32,32,32,70,67,48,48,48,48,48,48,48,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",SubSecTime:"802528",SubSecTimeOriginal:"802528",SubSecTimeDigitized:"802528",FlashpixVersion:"0100",ColorSpace:"1",PixelXDimension:"5312",PixelYDimension:"2988",InteroperabilityIFDPointer:"1320",SensingMethod:"Undefined",SceneType:"Directly photographed",ExposureMode:"0",WhiteBalance:"Auto white balance",DigitalZoomRatio:"1",SceneCaptureType:"Standard",ImageUniqueID:"36f6e92221e27c830000000000000000"}}},{key:"photoId",get:function(){return this.id}},{key:"key",get:function(){return this._key||(this._key=(this.dto.key||this.id||this.dto.url||"no_key_found").replace(/\W/g,"")),this._key}},{key:"orderIndex",get:function(){return this.dto.orderIndex||this.dto.o||0},set:function(e){this.dto.orderIndex=e}},{key:"name",get:function(){return this.metadata.fileName||""}},{key:"url",get:function(){return this.dto.file_url||this.dto.mediaUrl||this.dto.url||this.dto.src}},{key:"mediaUrl",get:function(){return this.url}},{key:"html",get:function(){return this.dto.html||this.dto.text||this.metadata.html||this.metadata.text}},{key:"lastModified",get:function(){return this.metadata.lastModified}},{key:"seed",get:function(){return d.default.hashToInt(this.url)}},{key:"isImage",get:function(){return"image"===this.type}},{key:"isImportant",get:function(){return!!this.dto.i}},{key:"isVideo",get:function(){return"video"===this.type}},{key:"videoUrl",get:function(){return this.metadata.videoUrl}},{key:"isExternalVideo",get:function(){return this.metadata.isExternal}},{key:"isExternal",get:function(){return!0===this.metadata.isExternal}},{key:"type",set:function(e){this._type=e},get:function(){switch(this._type||this.dto.type||this.metadata.type||this.dto.media_type){case"dummy":return"dummy";case"v":case"video":return"video";case"h":case"html":case"text":return"text";case"i":case"image":default:return"image"}}},{key:"alt",get:function(){return this.metadata.alt||this.title||this.description}},{key:"title",get:function(){var e=this.metadata.title;if("string"==typeof e)return e;var t=this.metadata.fileName;return t||""},set:function(e){this.metadata.title=e}},{key:"fileName",get:function(){return this.metadata.fileName||""},set:function(e){this.metadata.fileName=e}},{key:"description",get:function(){return this.metadata.description||""},set:function(e){this.metadata.description=e}},{key:"exif",get:function(){return this.metadata.exif||""}},{key:"hasLink",get:function(){switch(this.linkType){case"wix":return!!this.linkData.type;default:return!!this.linkUrl}}},{key:"link",get:function(){return this.metadata.link||{}}},{key:"linkData",get:function(){if(this.metadata.link)return this.metadata.link.data||{}},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link.data=e}},{key:"linkType",get:function(){return this.metadata.link&&!p.default.isUndefined(this.metadata.link.type)?this.metadata.link.type:this.linkUrl?"web":"none"},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link={type:e,url:void 0,text:void 0,title:void 0,target:"_blank"}}},{key:"defaultLinkText",get:function(){var e=this.linkData;switch(this.linkType){case"wix":if(!e)return"Go to Link";switch(e.type){case"PageLink":return"Go to Page "+e.pageName;case"AnchorLink":return"Scroll to "+e.anchorName;case"ExternalLink":return""+e.url;case"EmailLink":return"Email "+e.recipient;case"PhoneLink":return"Call "+e.phoneNumber;case"DocumentLink":return"Open "+e.name;default:return"Go to Link"}case"web":return this.linkUrl;case"page":return this.linkTitle;default:return""}}},{key:"defaultLinkValue",get:function(){var e=this.linkData;switch(this.linkType){case"wix":if(!e)return"Add a Link";switch(e.type){case"PageLink":return e.pageName?"PAGE - "+e.pageName:"PAGE";case"AnchorLink":return"ANCHOR - "+e.anchorName;case"ExternalLink":return"LINK - "+e.url;case"EmailLink":return"EMAIL - "+e.recipient;case"PhoneLink":return"PHONE - "+e.phoneNumber;case"DocumentLink":return"DOCUMENT - "+e.name;default:return"Add a Link"}case"web":return this.linkUrl;case"page":return this.linkTitle;default:return""}}},{key:"linkText",get:function(){if(this.metadata.link)return this.metadata.link.text||this.defaultLinkText},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link.text=e}},{key:"linkTitle",get:function(){if(this.metadata.link)return this.metadata.link.title},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link.title=e}},{key:"linkUrl",get:function(){if(this.metadata.link)return this.metadata.link.url},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link.url=e}},{key:"unprotectedLinkOpenType",get:function(){return p.default.get(this,"metadata.link.target")}},{key:"linkOpenType",get:function(){return d.default.isEditor()||d.default.isPreview()?"_blank":this.metadata.link&&!p.default.isUndefined(this.metadata.link.target)?this.unprotectedLinkOpenType:this.metadata.link&&!p.default.isUndefined(this.metadata.link.targetBlank)?this.metadata.link.targetBlank?"_blank":"_top":"_blank"},set:function(e){this.metadata.link||(this.metadata.link={}),this.metadata.link.target=e}},{key:"initialLinkObject",get:function(){return{type:"none",url:void 0,text:void 0,title:void 0,target:"_blank"}}},{key:"isDemo",get:function(){return this.metadata.isDemo||this.dto.isDemo||"public"===this.metadata.sourceName||p.default.includes(this.metadata.tags,"_paid")},set:function(e){this.metadata.isDemo=e}},{key:"isText",get:function(){return"text"===this.type}},{key:"isVisible",get:function(){return this.visibility&&this.visibility.visible}},{key:"isRendered",get:function(){return this.visibility&&this.visibility.rendered}},{key:"isDimensionless",get:function(){return!(this.maxWidth>1||this.maxHeight>1)}}]),e}();t.default=b},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(76),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(28),d=-864e13,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,e),this.features=t,this.update(i,r)}return(0,u.default)(e,[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dateCreated=e||this.dateCreated,this.manualUpdates=t}},{key:"getFeature",value:function(e){var t=this.features[e];if(t)for(var i=this.manualUpdates[e],r=i&&i.date,n=r?c.baseUtils.getDateCreatedTicksFromStr(r):null,o=t.length-1;o>=0;o--){var a=n||this.dateCreated;if(a>=t[o].dateFrom)return t[o]}}},{key:"getVersion",value:function(t){var i=this.getFeature(t);return i?i.version:e.Versions.min}},{key:"getFeaturesWithNewerVersions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={},r=c.baseUtils.isStoreGallery();return(0,o.default)(this.features).forEach(function(n){var o=_.last(e.features[n]),a=t[n],s=a&&a.date,l=s?c.baseUtils.getDateCreatedTicksFromStr(s):null,u=o.dateFrom>Date.parse(new Date),d=void 0===o.affectsProGallery||o.affectsProGallery&&!r,h=void 0===o.affectsArtStore||o.affectsArtStore&&r,f=r?h:d,p=o.dateFrom>(l||e.dateCreated);!u&&p&&f&&!o.ignoreUserManuaUpdate&&(i[n]=o)}),i}}]),e}();h.Versions={min:"min"},e.exports=h},function(e,t,i){var r=i(17),n=i(11).document,o=r(n)&&r(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,i){var r=i(17);e.exports=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var r=i(57),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},function(e,t){var i=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},function(e,t,i){var r=i(59)("keys"),n=i(41);e.exports=function(e){return r[e]||(r[e]=n(e))}},function(e,t,i){var r=i(8),n=i(11),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:i(34)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var r=i(15),n=i(157),o=i(60),a=i(58)("IE_PROTO"),s=function(){},l=function(){var e,t=i(53)("iframe"),r=o.length;for(t.style.display="none",i(92).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var i;return null!==e?(s.prototype=r(e),i=new s,s.prototype=null,i[a]=e):i=l(),void 0===t?i:n(i,t)}},function(e,t,i){t.f=i(12)},function(e,t,i){var r=i(11),n=i(8),o=i(34),a=i(63),s=i(16).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,i){e.exports=i(178)()},function(e,t,i){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=r},function(e,t,i){"use strict";function r(e){if(!Object(a.a)(e)||Object(n.a)(e)!=s)return!1;var t=Object(o.a)(e);if(null===t)return!0;var i=d.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&c.call(i)==h}var n=i(186),o=i(191),a=i(193),s="[object Object]",l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,h=c.call(Object);t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SET_WIX_DATA="SET_WIX_DATA",t.SET_ITEMS="SET_ITEMS",t.SET_RENDERED_ITEMS_COUNT="SET_RENDERED_ITEMS_COUNT",t.VIDEO_PLAY_MODE="VIDEO_PLAY_MODE",t.GALLERY_WINDOW_LAYOUT_CHANGED="GALLERY_WINDOW_LAYOUT_CHANGED",t.VIDEO_ENDED="VIDEO_ENDED",t.VIDEO_ADDED="VIDEO_ADDED",t.VIDEO_REMOVED="VIDEO_REMOVED",t.NAVIGATION_IN="NAVIGATION_IN",t.EDITOR_MODE_CHANGED="EDITOR_MODE_CHANGED",t.TOGGLE_HOVER_PREVIEW="TOGGLE_HOVER_PREVIEW",t.SET_VIDEO_PLAY_INDEX="SET_VIDEO_PLAY_INDEX"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={gallery:{wixInit:!1,renderedItemsCount:50,videoIndexPlay:-1,documentHeight:n.default.getScreenHeight()},fullscreen:{},multishare:{}}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.renderUtils=void 0;var n=i(19),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(28),y=r(m),v=i(13),b=r(v),w=function(e){function t(){(0,u.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e._cache={},e._hash2int={},e._params={},e._refs={},e._params={},e}return(0,g.default)(t,e),(0,d.default)(t,[{key:"getScreenWidth",value:function(){if(this.isPreview()&&this.isMobile())return 320;if(this.isTest()||this.isSemiNative())return 1920;try{return this.isLandscape()?Math.max(window.screen.width,window.screen.height):window.screen.width}catch(e){return 1920}}},{key:"getScreenHeight",value:function(){if(this.isTest()||this.isSemiNative())return 1200;try{return this.isLandscape()?Math.min(window.screen.width,window.screen.height):window.screen.height}catch(e){return 1200}}},{key:"fixViewport",value:function(){if(!this.isSemiNative()&&this.isInWix())try{if(this._cache.isLandscape=void 0,this.isSite()&&this.isMobile()&&!this.isMobileViewer()){var e=this.getViewportScaleRatio();document.body.style.transform="scale("+e+")",document.body.style.transformOrigin="0 0",document.body.style.width=100/e+"%",document.body.style.height=100/e+"%"}}catch(e){return!1}}},{key:"isSmallScreen",value:function(){try{return(window.innerWidth||window.outerWidth)<640||this.isMobile()}catch(e){return!1}}},{key:"isVerticalScreen",value:function(){try{return window.innerWidth<window.innerHeight}catch(e){return!1}}},{key:"isLandscape",value:function(){if(this.isSemiNative())return!1;if(!this.isUndefined(this._cache.isLandscape))return this._cache.isLandscape;this.isMobile()||(this._cache.isLandscape=!1);try{if(this.isUndefined(window.orientation))if(window.matchMedia){var e=window.matchMedia("(orientation: landscape)");e&&!0===e.matches?this._cache.isLandscape=!0:this._cache.isLandscape=!1}else this._cache.isLandscape=!1;else this._cache.isLandscape=90===window.orientation||-90===window.orientation}catch(e){this._cache.isLandscape=!1}return this._cache.isLandscape}},{key:"getDevicePixelRatio",value:function(){try{return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}catch(e){return 1}}},{key:"getWindowWidth",value:function(){try{return window.innerWidth||980}catch(e){return 980}}},{key:"getWindowHeight",value:function(){try{return window.innerHeight||1080}catch(e){return 1080}}},{key:"getWindow",value:function(e,t,i,r){if(this.isTest())return window;if(!this.isUndefined(this._refs[e])){var n=this._refs[e];if(n&&n.location&&n.location.href)return this._refs[e];this._refs[e]=null}for(var o=0;o<window.parent.frames.length;o++){var a=window.parent.frames[o];try{var s=!1;try{a[t]&&(s=!0)}catch(e){}if(s){this._refs[e]=a;break}var l=[];i?a.document.getElementById(i)&&(l=a.document.getElementById(i).getElementsByTagName("iframe")):l=a.document.getElementsByTagName("iframe");for(var u=0;u<l.length;u++)try{var c=l[u].contentWindow;if(c[t]&&(!r||c.instanceId===r)){this._refs[e]=c;break}}catch(e){}if(this._refs[e])break}catch(e){}}return this.isUndefined(this._refs[e])?this.safeSessionStorage():this._refs[e]}},{key:"getWorkerWindow",value:function(){return this.isSemiNative()?[]:this.isStoreGallery()?this.getWindow("worker","isStoreWorker"):this.getWindow("worker","isWorker")}},{key:"getMultishareWindow",value:function(){return this.getWindow("multishare","isMultishare")}},{key:"getGalleryWindow",value:function(e,t){return this.getWindow("gallery","isGallery",e,t)}},{key:"getGalleryByCompId",value:function(e){this.isUndefined(this._cache.galleries)&&(this._cache.galleries={});for(var t=0;t<window.parent.frames.length;t++)try{var i=window.parent.frames[t];(!0===i.isGallery||i.document.location.href.indexOf(this.getUrlPrefix()+"gallery")>=0)&&i.document.location.href.indexOf("compId="+e)>=0&&(this._cache.galleries[e]=i)}catch(e){}return this._cache.galleries[e]}},{key:"getViewportScaleRatio",value:function(){return this.shouldDebug("ph_scale_ratio")?1:this.isMobile()&&!this.isMobileViewer()&&this.isSite()?320/this.getScreenWidth():1}},{key:"getMobileEnabledClick",value:function(e){return this.isMobile()?{onTouchEnd:e}:{onClick:e}}},{key:"getTopUrlParam",value:function(e){if(this.isUndefined(this._cache.params)&&(this._cache.params={}),this.isUndefined(this._cache.params[e]))try{this._cache.params[e]=top.location.search.replace("?","").split("&").map(function(t){var i=t.split("=");return i[0]===e?i[1]||"":""}).join("")}catch(t){this._cache.params[e]=!1}return this._cache.params[e]}},{key:"getGalleryDataFromWorker",value:function(){var e=b.default.Utils.getOrigCompId()||this.getWorkerWindow()["pro-gallery-fullscreen-comp-id"];return this.getWorkerWindow()["pro-gallery-data-"+e]||{}}},{key:"getGallerySettingsFromWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{var t=e&&e.prerenderedGallery&&e.prerenderedGallery.gallerySettings;if(t||(t=e&&e.prerenderedItem&&e.prerenderedItem.gallerySettings),t)return JSON.parse(this.stripSlashes(t))}catch(e){return{}}}},{key:"getTitleOrFilename",value:function(e,t){return(void 0===e?"undefined":(0,o.default)(e))===(0,o.default)("")?e:t}},{key:"getFullscreenUrlState",value:function(e,t,i,r,n){return e+"/"+t+"/"+i+"/?i="+i+"&p="+r+"&s="+n}}]),t}(y.default);t.default=w;t.renderUtils=new w},function(e,t,i){var r=i(33),n=i(12)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=a(t=Object(e),n))?i:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,i){var r=i(71),n=i(12)("iterator"),o=i(27);e.exports=i(8).getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||o[r(e)]}},function(e,t,i){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,i,r){return null===i?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(i,e)].join("")};case"bracket":return function(t,i){return null===i?o(t,e):[o(t,e),"[]=",o(i,e)].join("")};default:return function(t,i){return null===i?o(t,e):[o(t,e),"=",o(i,e)].join("")}}}function n(e){var t;switch(e.arrayFormat){case"index":return function(e,i,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=i);void 0===r[e]&&(r[e]={}),r[e][t[1]]=i};case"bracket":return function(e,i,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[i]):void(r[e]=[].concat(r[e],i)):void(r[e]=i)};default:return function(e,t,i){if(void 0===i[e])return void(i[e]=t);i[e]=[].concat(i[e],t)}}}function o(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==typeof e?a(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s=i(215),l=i(216);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=l({arrayFormat:"none"},t);var i=n(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),i(decodeURIComponent(n),o,r)}),Object.keys(r).sort().reduce(function(e,t){var i=r[t];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?e[t]=a(i):e[t]=i,e},Object.create(null))):r},t.stringify=function(e,t){t=l({encode:!0,strict:!0,arrayFormat:"none"},t);var i=r(t);return e?Object.keys(e).sort().map(function(r){var n=e[r];if(void 0===n)return"";if(null===n)return o(r,t);if(Array.isArray(n)){var a=[];return n.slice().forEach(function(e){void 0!==e&&a.push(i(r,e,a.length))}),a.join("&")}return o(r,t)+"="+o(n,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,i){e.exports={default:i(226),__esModule:!0}},function(e,t,i){"use strict";function r(e){var t,i;this.promise=new e(function(e,r){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=r}),this.resolve=n(t),this.reject=n(i)}var n=i(40);e.exports.f=function(e){return new r(e)}},function(e,t,i){e.exports={default:i(239),__esModule:!0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var r=i(65),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n.default.string,a=n.default.bool,s=n.default.number,l=n.default.oneOfType,u=n.default.shape,c=n.default.object,d=n.default.func;t.propTypes={url:o,playing:a,loop:a,controls:a,volume:s,playbackRate:s,width:l([o,s]),height:l([o,s]),hidden:a,className:o,style:c,progressFrequency:s,soundcloudConfig:u({clientId:o,showArtwork:a}),youtubeConfig:u({playerVars:c,preload:a}),vimeoConfig:u({iframeParams:c,preload:a}),fileConfig:u({attributes:c}),onReady:d,onStart:d,onPlay:d,onPause:d,onBuffer:d,onEnded:d,onError:d,onDuration:d},t.defaultProps={playing:!1,loop:!1,controls:!1,volume:.8,playbackRate:1,width:640,height:360,hidden:!1,progressFrequency:100,soundcloudConfig:{clientId:"e8b6f84fbcad14c301ca1355cae1dea2",showArtwork:!0},youtubeConfig:{playerVars:{},preload:!1},vimeoConfig:{iframeParams:{},preload:!1},fileConfig:{attributes:{}},onReady:function(){},onStart:function(){},onPlay:function(){},onPause:function(){},onBuffer:function(){},onEnded:function(){},onError:function(){},onDuration:function(){}}},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(2),l=i(77),u=function(e){function t(){var e,i,o,a;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=o=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.isReady=!1,o.startOnPlay=!0,o.durationOnPlay=!1,o.seekOnPlay=null,o.onPlay=function(){var e=o.props,t=e.volume,i=e.onStart,r=e.onPlay,n=e.onDuration,a=e.playbackRate;o.startOnPlay&&(o.setPlaybackRate(a),o.setVolume(t),i(),o.startOnPlay=!1),r(),o.seekOnPlay&&(o.seekTo(o.seekOnPlay),o.seekOnPlay=null),o.durationOnPlay&&(n(o.getDuration()),o.durationOnPlay=!1)},o.onReady=function(){var e=o.props,t=e.onReady,i=e.playing,r=e.onDuration;o.isReady=!0,t(),(i||o.preloading)&&(o.preloading=!1,o.loadOnReady?(o.load(o.loadOnReady),o.loadOnReady=null):o.play());var n=o.getDuration();n?r(n):o.durationOnPlay=!0},a=i,n(o,a)}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.url;this.mounted=!0,e&&this.load(e)}},{key:"componentWillUnmount",value:function(){this.stop(),this.mounted=!1}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,i=t.url,r=t.playing,n=t.volume,o=t.playbackRate;i!==e.url&&e.url?(this.seekOnPlay=null,this.startOnPlay=!0,this.load(e.url)):i&&!e.url?(this.stop(),clearTimeout(this.updateTimeout)):!r&&e.playing?this.play():r&&!e.playing?this.pause():n!==e.volume?this.setVolume(e.volume):o!==e.playbackRate&&this.setPlaybackRate(e.playbackRate)}},{key:"seekTo",value:function(e){var t=this;this.isReady||0===e||(this.seekOnPlay=e,setTimeout(function(){t.seekOnPlay=null},5e3))}}]),t}(s.Component);u.propTypes=l.propTypes,u.defaultProps=l.defaultProps,t.default=u,e.exports=t.default},function(e,t,i){"use strict";function r(e){try{window.performance&&performance.mark&&performance.mark(e)}catch(e){console.error("Error in timingMark",e)}}function n(e,t,i){try{window.performance&&performance.measure&&(i?performance.measure(e,t,i):t?performance.measure(e,t):performance.measure(e))}catch(e){console.error("Error in timingMeasure",e)}}function o(){try{window.itemLoadStart||(window.itemLoadStart=!0,r("itemLoadStart"))}catch(e){}}function a(){try{if(!window.proGalleryItemLoaded&&(n("firstItemLoaded","itemLoadStart"),window.proGalleryItemLoaded=!0,window.performance&&performance.getEntriesByName)){var e=performance.getEntriesByName("firstItemLoaded")[0],t=e.startTime,i=e.duration;d.logger.trackBi(d.logger.biEvents.pro_gallery_load_uou,{endpoint:"itemLoadStart",loading_time:Math.round(t)}),d.logger.trackBi(d.logger.biEvents.pro_gallery_load_uou,{endpoint:"firstItemLoadDuration",loading_time:Math.round(i+t)})}}catch(e){console.error("apploaded measure",e)}}function s(e){if(!h.baseUtils.isTest())try{window.createFedopsLogger=p.create||function(){},window.proGalleryLoaded||(window.proGalleryLoaded=!0,window.fedopsLogger=window.createFedopsLogger(e,{networkAnalysis:"fedops"===window.debugApp}),window.fedopsLogger&&window.fedopsLogger.appLoaded(),c.default.Performance.applicationLoaded())}catch(t){console.error("fedopsLogger: apploaded failed ",e,t)}}function l(e){if(!h.baseUtils.isTest())try{window.proGalleryPartiallyLoaded||(window.proGalleryPartiallyLoaded=!0,c.default.Performance.applicationLoadingStep(1,"Pro Gallery is Loading"))}catch(t){console.error("Wix performance: appPartiallyLoaded failed ",e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.timingMark=r,t.timingMeasure=n,t.itemLoadStart=o,t.itemLoaded=a,t.appLoaded=s,t.appPartiallyLoaded=l;var u=i(13),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=i(29),h=i(28),f=i(270),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(f)},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;r(this,e),this.data=t}return n(e,[{key:"isActive",value:function(){return!0}},{key:"export",value:function(){return this.data}}]),e}();t.default=o},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0;var n=i(9),o=r(n),a=i(10),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=function(){function e(){(0,u.default)(this,e),this._hash2int={}}return(0,d.default)(e,[{key:"stripSlashes",value:function(e){var t="";return"string"==typeof e&&(t=e.replace(/\\\//g,"/").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\0/g,"\0").replace(/\\\\/g,"\\")),t}},{key:"parseStringObject",value:function(e){if("string"!=typeof e)return e;var t=this.stripSlashes(e);if("string"==typeof e&&/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))try{return JSON.parse(t)}catch(e){}return t}},{key:"hashToInt",value:function(e,t,i){var r=0;if(void 0===e||0===e.length)return r;if(!this._hash2int[e]){for(var n=0;n<e.length;n++)r+=e.charCodeAt(n);this._hash2int[e]=r}return void 0===t||void 0===i?this._hash2int[e]:this._hash2int[e]%(i-t+1)+t}},{key:"insertIfDefined",value:function(e,t,i){void 0!==i&&(e[t]=i)}},{key:"convertStyleParams",value:function(e){var t=(0,s.default)({cubeImages:!1,cubeType:"fill",cubeRatio:1,rotatingCropRatios:"",smartCrop:!1,imageMargin:10,galleryMargin:0,floatingImages:0,chooseBestGroup:!0,groupSize:3,groupTypes:"1,2h,2v,3h,3v,3t,3b,3l,3r",rotatingGroupTypes:"",isVertical:!0,minItemSize:120,oneRow:!1,gallerySize:500,collageDensity:50},e);return this.insertIfDefined(t,"cubeImages",t.cropItems),this.insertIfDefined(t,"cubeType",t.cropType),this.insertIfDefined(t,"cubeRatio",t.cropRatio),this.insertIfDefined(t,"rotatingCropRatios",Array.isArray(t.rotatingCropRatios)?t.rotatingCropRatios.join(","):void 0),this.insertIfDefined(t,"smartCrop",t.smartCrop),this.insertIfDefined(t,"imageMargin",t.itemSpacing),this.insertIfDefined(t,"galleryMargin",t.layoutSpacing),this.insertIfDefined(t,"floatingImages",t.randomSpacings),this.insertIfDefined(t,"chooseBestGroup",t.smartGrouping),this.insertIfDefined(t,"groupSize",t.itemsPerGroup),this.insertIfDefined(t,"groupTypes",Array.isArray(t.allowedGroupTypes)?t.allowedGroupTypes.join(","):void 0),this.insertIfDefined(t,"rotatingGroupTypes",Array.isArray(t.rotatingGroupTypes)?t.rotatingGroupTypes.join(","):void 0),this.insertIfDefined(t,"isVertical",t.isColumnsLayout),this.insertIfDefined(t,"minItemSize",t.minItemSize),this.insertIfDefined(t,"oneRow",t.isVerticalScroll),this.insertIfDefined(t,"gallerySize",t.rowSize||t.columnSize),this.insertIfDefined(t,"collageDensity",t.collageDensity),t}},{key:"convertContainer",value:function(e,t){var i=(0,o.default)({bounds:{}},e),r=e.width||e.galleryWidth,n=e.height||e.galleryHeight;return e.width>=0&&(i.galleryWidth=r+2*((t.imageMargin||0)-(t.galleryMargin||0)),delete i.width),e.height>=0&&(i.galleryHeight=n+((t.imageMargin||0)-(t.galleryMargin||0)),delete i.height),i}}]),e}();t.utils=new h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=r(n),a=i(1),s=r(a),l=i(3),u=r(l),c=i(7),d=r(c),h=i(39),f=function(){function e(t){(0,o.default)(this,e),this.uniqueId=u.default.generateUUID(),this.isGalleryGroup=!0,t.dto&&t.dto.dto&&(t.dto=t.dto.dto,u.default.isDev()&&console.warn("Item core is created with already existing item core")),this.dto=d.default.merge({},t.dto),d.default.merge(this,t.dto),t.scheme?this.processScheme(t.scheme):this.processScheme(new h.Group({dto:t.dto}).scheme),t.items?this.items=t.items:console.warn("Pro Gallery created Gallery Group without items",t)}return(0,s.default)(e,[{key:"processScheme",value:function(e){this.id=e.id,this.idx=e.idx,this.width=e.width,this.height=e.height,this.totalHeight=e.totalHeight,this.ratio=e.ratio,this.top=e.top,this.left=e.left,this.right=e.right,this.bottom=e.bottom,this.visible=e.visible,this.rendered=e.rendered,this.required=e.required}},{key:"renderProps",value:function(e){return{className:"group",id:this.id,idx:this.idx,key:this.key,type:this.type,top:this.top,left:this.left,right:this.right,bottom:this.bottom,width:this.width,height:this.height,bottomInfoHeight:this.bottomInfoHeight,totalHeight:this.totalHeight,items:this.items,visible:this.visible,rendered:this.rendered,required:this.required,galleryConfig:e}}},{key:"key",get:function(){return"group_"+this.id}}]),e}();t.default=f},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(0),o=r(n),a=i(1),s=r(a),l=i(52),u=r(l),c=i(135),d=function(){function e(t){(0,o.default)(this,e),this.pgVersionManager=t||c.pgVersionManager}return(0,s.default)(e,[{key:"isNewSpacing",value:function(){return this.pgVersionManager.getVersion("spacing")!==u.default.Versions.min}}]),e}(),h=new d;e.exports={spacingVersionManager:h,SpacingVersionManager:d}},function(e,t,i){e.exports=!i(18)&&!i(25)(function(){return 7!=Object.defineProperty(i(53)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var r=i(21),n=i(26),o=i(147)(!1),a=i(58)("IE_PROTO");e.exports=function(e,t){var i,s=n(e),l=0,u=[];for(i in s)i!=a&&r(s,i)&&u.push(i);for(;t.length>l;)r(s,i=t[l++])&&(~o(u,i)||u.push(i));return u}},function(e,t,i){var r=i(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,i){var r=i(21),n=i(35),o=i(58)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,i){var r=i(14),n=i(8),o=i(25);e.exports=function(e,t){var i=(n.Object||{})[e]||Object[e],a={};a[e]=t(i),r(r.S+r.F*o(function(){i(1)}),"Object",a)}},function(e,t,i){e.exports={default:i(151),__esModule:!0}},function(e,t,i){"use strict";var r=i(34),n=i(14),o=i(91),a=i(20),s=i(27),l=i(156),u=i(43),c=i(87),d=i(12)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,i,p,g,m,y){l(i,t,p);var v,b,w,_=function(e){if(!h&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},S=t+" Iterator",I="values"==g,k=!1,x=e.prototype,E=x[d]||x["@@iterator"]||g&&x[g],T=E||_(g),P=g?I?_("entries"):T:void 0,C="Array"==t?x.entries||E:E;if(C&&(w=c(C.call(new e)))!==Object.prototype&&w.next&&(u(w,S,!0),r||"function"==typeof w[d]||a(w,d,f)),I&&E&&"values"!==E.name&&(k=!0,T=function(){return E.call(this)}),r&&!y||!h&&!k&&x[d]||a(x,d,T),s[t]=T,s[S]=f,g)if(v={values:I?T:_("values"),keys:m?T:_("keys"),entries:P},y)for(b in v)b in x||o(x,b,v[b]);else n(n.P+n.F*(h||k),t,v);return v}},function(e,t,i){e.exports=i(20)},function(e,t,i){var r=i(11).document;e.exports=r&&r.documentElement},function(e,t,i){var r=i(85),n=i(60).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},function(e,t,i){var r=i(42),n=i(31),o=i(26),a=i(54),s=i(21),l=i(84),u=Object.getOwnPropertyDescriptor;t.f=i(18)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"a",function(){return a});var r=i(65),n=i.n(r),o=n.a.shape({trySubscribe:n.a.func.isRequired,tryUnsubscribe:n.a.func.isRequired,notifyNestedSubs:n.a.func.isRequired,isSubscribed:n.a.func.isRequired}),a=n.a.shape({subscribe:n.a.func.isRequired,dispatch:n.a.func.isRequired,getState:n.a.func.isRequired})},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function s(){}function l(e,t){var i={run:function(r){try{var n=e(t.getState(),r);(n!==i.props||i.error)&&(i.shouldComponentUpdate=!0,i.props=n,i.error=null)}catch(e){i.shouldComponentUpdate=!0,i.error=e}}};return i}function u(e){var t,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.getDisplayName,h=void 0===c?function(e){return"ConnectAdvanced("+e+")"}:c,w=u.methodName,_=void 0===w?"connectAdvanced":w,S=u.renderCountProp,I=void 0===S?void 0:S,k=u.shouldHandleStateChanges,x=void 0===k||k,E=u.storeKey,T=void 0===E?"store":E,P=u.withRef,C=void 0!==P&&P,M=a(u,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=T+"Subscription",A=v++,L=(t={},t[T]=m.a,t[O]=m.b,t),R=(i={},i[O]=m.b,i);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by "+_+". Instead received "+JSON.stringify(t));var i=t.displayName||t.name||"Component",a=h(i),u=y({},M,{getDisplayName:h,methodName:_,renderCountProp:I,shouldHandleStateChanges:x,storeKey:T,withRef:C,displayName:a,wrappedComponentName:i,WrappedComponent:t}),c=function(i){function c(e,t){r(this,c);var o=n(this,i.call(this,e,t));return o.version=A,o.state={},o.renderCount=0,o.store=e[T]||t[T],o.propsMode=Boolean(e[T]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+T+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+T+'" as a prop to "'+a+'".'),o.initSelector(),o.initSubscription(),o}return o(c,i),c.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[O]=t||this.context[O],e},c.prototype.componentDidMount=function(){x&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},c.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},c.prototype.getWrappedInstance=function(){return f()(C,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+_+"() call."),this.wrappedInstance},c.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},c.prototype.initSelector=function(){var t=e(this.store.dispatch,u);this.selector=l(t,this.store),this.selector.run(this.props)},c.prototype.initSubscription=function(){if(x){var e=(this.propsMode?this.props:this.context)[O];this.subscription=new g.a(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(b)):this.notifyNestedSubs()},c.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.prototype.addExtraProps=function(e){if(!(C||I||this.propsMode&&this.subscription))return e;var t=y({},e);return C&&(t.ref=this.setWrappedInstance),I&&(t[I]=this.renderCount++),this.propsMode&&this.subscription&&(t[O]=this.subscription),t},c.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(p.createElement)(t,this.addExtraProps(e.props))},c}(p.Component);return c.WrappedComponent=t,c.displayName=a,c.childContextTypes=R,c.contextTypes=L,c.propTypes=L,d()(c,t)}}t.a=u;var c=i(180),d=i.n(c),h=i(181),f=i.n(h),p=i(2),g=(i.n(p),i(182)),m=i(96),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},v=0,b={}},function(e,t,i){"use strict";function r(e,t,i){function s(){y===m&&(y=m.slice())}function l(){return g}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return s(),y.push(e),function(){if(t){t=!1,s();var i=y.indexOf(e);y.splice(i,1)}}}function c(e){if(!Object(n.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,g=p(g,e)}finally{v=!1}for(var t=m=y,i=0;i<t.length;i++){(0,t[i])()}return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");p=e,c({type:a.INIT})}function h(){var e,t=u;return e={subscribe:function(e){function i(){e.next&&e.next(l())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return i(),{unsubscribe:t(i)}}},e[o.a]=function(){return this},e}var f;if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var p=e,g=t,m=[],y=m,v=!1;return c({type:a.INIT}),f={dispatch:c,subscribe:u,getState:l,replaceReducer:d},f[o.a]=h,f}i.d(t,"a",function(){return a}),t.b=r;var n=i(67),o=i(194),a={INIT:"@@redux/INIT"}},function(e,t,i){"use strict";var r=i(187),n=r.a.Symbol;t.a=n},function(e,t,i){"use strict"},function(e,t,i){"use strict";function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=r},function(e,t,i){"use strict";function r(e){return function(t,i){function r(){return n}var n=e(t,i);return r.dependsOnOwnProps=!1,r}}function n(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,i){var r=(i.displayName,function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)});return r.dependsOnOwnProps=!0,r.mapToProps=function(t,i){r.mapToProps=e,r.dependsOnOwnProps=n(e);var o=r(t,i);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=n(o),o=r(t,i)),o},r}}t.a=r,t.b=o;i(103)},function(e,t,i){"use strict";i(67),i(66)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={videoModeChanged:"VIDEO_MODE_CHANGED"}},function(e,t,i){"use strict";function r(){return{type:a}}function n(e){return{idx:e,type:s}}function o(){return{type:l}}Object.defineProperty(t,"__esModule",{value:!0}),t.itemViewAction=r,t.playVideo=n,t.pauseVideo=o;var a=t.ITEM_VIEW_ACTION="ITEM_VIEW_ACTION",s=t.PLAY_VIDEO="PLAY_VIDEO",l=t.PAUSE_VIDEO="PAUSE_VIDEO"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(209),o=r(n),a=i(46),s=r(a);t.default=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=(0,s.default)(e);!(r=(a=l.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,i){var r=i(15);e.exports=function(e,t,i,n){try{return n?t(r(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,i){var r=i(27),n=i(12)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[n]===e)}},function(e,t,i){var r=i(12)("iterator"),n=!1;try{var o=[7][r]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:i=!0}},o[r]=function(){return a},e(o)}catch(e){}return i}},function(e,t,i){var r=i(15),n=i(40),o=i(12)("species");e.exports=function(e,t){var i,a=r(e).constructor;return void 0===a||void 0==(i=r(a)[o])?t:n(i)}},function(e,t,i){var r,n,o,a=i(24),s=i(230),l=i(92),u=i(53),c=i(11),d=c.process,h=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,m=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};h&&f||(h=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},f=function(e){delete y[e]},"process"==i(33)(d)?r=function(e){d.nextTick(a(v,e,1))}:g&&g.now?r=function(e){g.now(a(v,e,1))}:p?(n=new p,o=n.port2,n.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,i){var r=i(15),n=i(17),o=i(75);e.exports=function(e,t){if(r(e),n(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_114__},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(237),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(116),b=r(v),w=i(129),_=r(w),S=i(7),I=r(S),k=i(130),x=r(k),E=i(3),T=r(E),P=i(79);T.default.fixViewport("Gallery");var C=function(e){function t(e){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.handleArrowKeys=i.handleArrowKeys.bind(i),i.showMoreItems=i.showMoreItems.bind(i),i.createGalleryConfig=i.createGalleryConfig.bind(i),i.createEmptyState=i.createEmptyState.bind(i),i.screenLogs=i.screenLogs.bind(i),i.createGallery=i.createGallery.bind(i),i.id=Date.now()+"|"+Math.floor(1e4*Math.random()),i.state={currentIdx:0},T.default.isLocal()||(0,P.appPartiallyLoaded)("pro-gallery-statics"),i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"handleArrowKeys",value:function(e){var t=document.activeElement.getAttribute("data-idx");if(t){var i=this.props.galleryStructure.findNeighborItem,r=Number(t),n=-1;switch(e.keyCode||e.charCode){case 38:n=i(r,"up");break;case 37:n=i(r,"left");break;case 40:n=i(r,"down");break;case 39:n=i(r,"right")}if(n>=0)return e.preventDefault(),e.stopPropagation(),T.default.setStateAndLog(this,"Set Gallery Current Item",{currentIdx:n}),!1}return!0}},{key:"showMoreItems",value:function(){var e=this;if(T.default.isAccessibilityEnabled())try{var t=this.props.galleryStructure.lastVisibleItemIdx();T.default.setStateAndLog(this,"Focus on Last Gallery Item",{currentIdx:t+1},function(){e.props.actions.toggleInfiniteScroll()})}catch(e){console.warn("Cannot find item to focus",e)}else this.props.actions.toggleInfiniteScroll()}},{key:"createGallery",value:function(e){var t=this,i=this.createGalleryConfig(),r=e?this.props.container.galleryHeight-138*T.default.getViewportScaleRatio()+"px":"100%",n=y.default.createElement(_.default,this.props.debug),o=this.props.galleryStructure.columns,a=I.default.map(o,function(e,r){var n=0;if(t.props.gotScrollEvent){var o=I.default.find(e.groups,function(e){return e.rendered});o||(o=t.props.scroll.top>0&&e.groups.length>0?{top:e.groups[e.groups.length-1].bottom}:{top:0}),n=o.top||0}return!!e.galleryGroups.length&&y.default.createElement("div",{"data-hook":"gallery-column",className:"gallery-column",key:"column"+r,style:{width:e.width,paddingTop:n}},e.galleryGroups.map(function(e){return!!e.rendered&&y.default.createElement(b.default,I.default.merge(e.renderProps(i),{store:t.props.store}))}))});return y.default.createElement("div",{id:"pro-gallery-container",className:"pro-gallery inline-styles "+(this.props.styleParams.oneRow?" one-row slider hide-scrollbars ":"")+(T.default.isAccessibilityEnabled()?" accessible ":""),style:{height:r,width:this.props.container.galleryWidth,overflowX:"hidden"},onKeyDown:this.handleArrowKeys},n,a)}},{key:"createGalleryConfig",value:function(){return{scroll:this.props.scroll,container:this.props.container,styleParams:this.props.styleParams,multishare:this.props.multishare,watermark:this.props.watermark,settings:this.props.settings,currentIdx:this.state.currentIdx,actions:{getMoreItemsIfNeeded:this.props.actions.getMoreItemsIfNeeded,toggleFullscreen:this.props.actions.toggleFullscreen,addItemToMultishare:this.props.actions.addItemToMultishare,removeItemFromMultishare:this.props.actions.removeItemFromMultishare}}}},{key:"createEmptyState",value:function(){return this.props.renderedItemsCount>0||!T.default.isEditor()?"":y.default.createElement(x.default,{actions:{setWixHeight:this.props.actions.setWixHeight}})}},{key:"screenLogs",value:function(){return T.default.shouldDebug("screenLogs")?y.default.createElement("div",{className:"screen-logs"},"URL width: ",T.default.parseGetParam("width"),", Container: ",(0,o.default)(this.props.container.galleryWidth),", document.body.clientWidth ",document.body.clientWidth,", window.innerWidth ",window.innerWidth,", window.screen.width: ",window.screen.width):""}},{key:"createShowMoreButton",value:function(){var e=!1;if(!this.props.scroll.isInfinite&&this.props.galleryStructure.height>T.default.getWindowHeight()){var t=this.props.styleParams.loadMoreButtonText||"Load More";e=y.default.createElement("div",{className:"show-more-container"},y.default.createElement("button",{tabIndex:T.default.getTabIndex("loadMoreButton"),className:"show-more",onClick:this.showMoreItems,"data-hook":"show-more","aria-label":t},t))}return e}},{key:"getStyles",value:function(){return{margin:-1*(this.props.styleParams.imageMargin-this.props.styleParams.galleryMargin)}}},{key:"render",value:function(){T.default.isVerbose()&&(console.count("galleryView render"),console.time("Rendering Gallery took "),console.log("[DEBUG_RENDER] GalleryView styleParams",this.props.styleParams),console.log("[DEBUG_RENDER] GalleryView props changed",T.default.printableObjectsDiff(this.lastProps||{},this.props)),this.lastProps=I.default.cloneDeep(this.props),console.log("[DEBUG_RENDER] GalleryView state changed",T.default.printableObjectsDiff(this.lastState||{},this.state)),this.lastState=I.default.cloneDeep(this.state),this.renderCount=(this.renderCount||0)+1);var e=this.createShowMoreButton(),t=this.createGallery(e),i=this.createEmptyState();T.default.isVerbose()&&console.timeEnd("Rendering Gallery took ");var r=this.screenLogs();return y.default.createElement("div",{className:"pro-gallery-parent-container",key:"pro-gallery-"+this.id,style:this.getStyles()},r,i,t,e)}}]),t}(y.default.Component);t.default=C},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(76),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(241),b=r(v),w=i(7),_=r(w),S=i(3),I=r(S),k=function(e){function t(e){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.displayName="GroupView",i.dom=[],i.state={visibleVertically:!1,renderedVertically:!1,visibleHorizontally:!1,renderedHorizontally:!1},i.useRefactoredProGallery=!(!window||!window.petri||"true"!==window.petri["specs.pro-gallery.newGalleryContainer"]),i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"isRenderedVertically",value:function(e){var t=e.target,i=I.default.parseGetParam("renderedPadding")||2*t.clientHeight,r=t.offsetTop+this.props.bottom>t.scrollTop-i,n=t.offsetTop+this.props.top<t.scrollTop+t.clientHeight+i;return r&&n}},{key:"isVisibleVertically",value:function(e){var t=e.target,i=I.default.parseGetParam("displayPadding")||.5*t.clientHeight,r=t.offsetTop+this.props.bottom>t.scrollTop-i,n=t.offsetTop+this.props.top<t.scrollTop+t.clientHeight+i,o=r&&n;return 0===this.props.idx&&console.log("PROGALLERY [visibility] - Gallery #"+t.offsetTop+" Group #"+this.props.idx+" is vertically "+(o?"VISIBLE":"HIDDEN"),t),o}},{key:"isVisibleHorizontally",value:function(e){var t=e.target;if(!this.props.galleryConfig.styleParams.oneRow)return!0;var i=I.default.parseGetParam("displayPadding")||.5*t.clientWidth,r=this.props.right>t.scrollLeft-i,n=this.props.left<t.scrollLeft+t.clientWidth+i;return r&&n}},{key:"isRenderedHorizontally",value:function(e){var t=e.target;if(!this.props.galleryConfig.styleParams.oneRow)return!0;var i=I.default.parseGetParam("renderedPadding")||2*t.clientWidth,r=this.props.right>t.scrollLeft-i,n=this.props.left<t.scrollLeft+t.clientWidth+i;return r&&n}},{key:"setVisibilityState",value:function(e){var t=this,i={};(0,o.default)(e).forEach(function(r){e[r]!==t.state[r]&&(i[r]=e[r])}),this.setState(i)}},{key:"setVerticalVisibility",value:function(e){this.setVisibilityState({visibleVertically:this.isVisibleVertically(e),renderedVertically:this.isRenderedVertically(e)})}},{key:"setHorizontalVisibility",value:function(e){this.setVisibilityState({visibleHorizontally:this.isVisibleHorizontally(e),renderedHorizontally:this.isRenderedHorizontally(e)})}},{key:"setInitialVisibility",value:function(){var e=this.props.galleryConfig.container,t=e.scrollBase,i=e.height,r=e.width,n=e.galleryHeight,o=e.galleryWidth;this.setVerticalVisibility({target:{scrollTop:0,offsetTop:t,clientHeight:i||n}}),this.setHorizontalVisibility({target:{scrollLeft:0,clientWidth:r||o}})}},{key:"initScrollListener",value:function(){this.onVerticalScroll=_.default.throttle(this.setVerticalVisibility.bind(this),500);var e=this.props.galleryConfig.container.getScrollingElement;e.vertical().addEventListener("scroll",this.onVerticalScroll),this.props.galleryConfig.styleParams.oneRow&&(this.onHorizontalScroll=_.default.throttle(this.setHorizontalVisibility.bind(this),500),e.horizontal().addEventListener("scroll",this.onHorizontalScroll))}},{key:"removeScrollListener",value:function(){var e=this.props.galleryConfig.container.getScrollingElement;e.vertical().removeEventListener("scroll",this.onVerticalScroll),e.horizontal().removeEventListener("scroll",this.onHorizontalScroll)}},{key:"componentDidMount",value:function(){this.useRefactoredProGallery&&(this.initScrollListener(),this.setInitialVisibility())}},{key:"componentWillUnmount",value:function(){this.useRefactoredProGallery&&this.removeScrollListener()}},{key:"componentDidUpdate",value:function(e,t){this.useRefactoredProGallery&&this.props.galleryConfig.actions.getMoreItemsIfNeeded&&this.state.visible&&this.props.galleryConfig.actions.getMoreItemsIfNeeded(this.props.idx)}},{key:"createDom",value:function(e,t){if(this.useRefactoredProGallery&&!e)return null;for(var i,r=[],n=0;i=this.props.items[n];n++)r.push(y.default.createElement(b.default,_.default.merge(i.renderProps(_.default.merge(this.props.galleryConfig,{visible:t,bottomInfoHeight:this.props.bottomInfoHeight})),{store:this.props.store})));return r}},{key:"render",value:function(){var e=this.useRefactoredProGallery?this.state.visibleVertically&&this.state.visibleHorizontally:this.props.visible,t=this.useRefactoredProGallery?this.state.renderedVertically&&this.state.renderedHorizontally:this.props.rendered;return y.default.createElement("div",{className:" gallery-group gallery-group-"+(t?e?"visible":"hidden":"none"),style:{width:this.props.width,height:this.props.totalHeight},"data-hook":"group-view",key:"group_"+this.props.idx,"data-group-idx":this.props.idx,"data-group-type":this.props.type,"data-group-ratios":this.props.ratios,"data-visible":t?e?"visible":"rendered":"hidden"},!!this.useRefactoredProGallery&&this.props.idx,this.createDom(t,e))}}]),t}(y.default.Component);t.default=k},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(258),y=r(m),v=i(3),b=r(v),w=i(29),_=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.styleParams,t=b.default.isStoreGallery()?"Buy Now":"Click here",i=e.customButtonText||t;return g.default.createElement("div",{className:"custom-button-wrapper",style:{justifyContent:e.galleryHorizontalAlign}},this.props.small?g.default.createElement(y.default,null):g.default.createElement("button",{"data-hook":"custom-button-button",onClick:function(){return w.logger.trackBi(w.logger.biEvents.buyNowClick)},tabIndex:-1},i,g.default.createElement("div",{className:"overlay"})))}}]),t}(g.default.Component);t.default=_},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.title,i=e.style;return g.default.createElement("div",{className:"gallery-item-title","data-hook":"item-title",style:i},t)}}]),t}(g.default.Component);t.default=m},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(10),s=r(a),l=i(4),u=r(l),c=i(0),d=r(c),h=i(1),f=r(h),p=i(5),g=r(p),m=i(6),y=r(m),v=i(2),b=r(v),w=i(3),_=r(w),S=i(22),I=i(7),k=r(I),x=i(268),E=r(x),T=function(e){function t(e){(0,d.default)(this,t);var i=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return i.toggleLove=i.toggleLove.bind(i),i.updateLoveCount=i.updateLoveCount.bind(i),i.state={isLoved:S.itemActions.isLoved(e.itemId),loveCount:S.itemActions.getLoveCount(e.itemId),animate:!1},i}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=S.itemActions.isLoved(e.itemId),i=S.itemActions.getLoveCount(e.itemId);e.itemId===this.props.itemId&&this.state.isLoved===t&&this.state.loveCount===i||this.setState({isLoved:t,loveCount:i})}},{key:"toggleLove",value:function(e){e.stopPropagation(),e.preventDefault();var t=k.default.pick(this.props,["layout","type","itemId","id","item","idx","hashtag"]);(0,s.default)(t,{type:"image"}),S.itemActions.postLoveActivity(t),S.itemActions.toggleLove(t.itemId,t.layout),this.setState({animate:!this.state.isLoved,isLoved:!this.state.isLoved})}},{key:"componentDidMount",value:function(){window.addEventListener("love_count_fetched",this.updateLoveCount)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("love_count_fetched",this.updateLoveCount)}},{key:"containerClassName",value:function(){switch(this.props.layout){case"fullscreen":return"fullscreen-social-love-container show-tooltip";default:return"block-fullscreen gallery-item-social-love gallery-item-social-button show-tooltip"}}},{key:"buttonClasssName",value:function(){var e=[];switch(this.props.layout){case"fullscreen":e.push("fullscreen-social-love");break;default:e.push("gallery-item-social-love"),_.default.isStoreGallery()||e.push("block-fullscreen")}return e.push(this.viewClassName()),this.state.isLoved?(e.push("progallery-svg-font-icons-love_full pro-gallery-loved"),e.push(E.default.loved)):e.push("progallery-svg-font-icons-love_empty"),this.state.animate&&e.push("love-animation"),e.join(" ")}},{key:"viewClassName",value:function(){switch(this.props.layout){case"fullscreen":return"desktop"===this.props.device?"fullscreen-icon":"";default:return""}}},{key:"counterClassName",value:function(){switch(this.props.layout){case"fullscreen":return"fullscreen-social-love-count shown "+this.viewClassName();default:return"block-fullscreen gallery-item-social-love-count "+this.viewClassName()}}},{key:"createLoveCounter",value:function(){var e=this.state.loveCount+(this.state.isLoved?1:0);return this.props.showCounter&&e>0?b.default.createElement("i",{"data-hook":"love-counter",className:this.counterClassName()},e):null}},{key:"createMouseOver",value:function(){var e=this;return function(t){e.props.isSettings&&S.itemActions.showTooltip(t,"This option is not available in editor")}}},{key:"createMouseOut",value:function(){var e=this;return function(){e.props.isSettings&&S.itemActions.hideTooltip()}}},{key:"updateLoveCount",value:function(){this.setState({loveCount:S.itemActions.getLoveCount(this.props.itemId)})}},{key:"render",value:function(){var e=this.createLoveCounter(),t=_.default.getMobileEnabledClick(this.toggleLove);return b.default.createElement("span",(0,o.default)({"data-hook":"love-button",className:this.containerClassName(),onMouseOver:this.createMouseOver(),onMouseOut:this.createMouseOut()},t),b.default.createElement("button",{"data-hook":"love-icon",className:this.buttonClasssName(),role:"checkbox"}),e)}}]),t}(b.default.Component);t.default=T},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={getByKey:function(e){try{var t=null;return window.translations&&(t=window.translations[e]),t||(t=e),window&&(window.isClientDev&&(t=e),window.unescape&&(t=window.unescape(t))),t}catch(t){return e}}};t.default=r},function(e,t,i){"use strict";function r(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")}function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={mapToQuery:r,generateGuid:n}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(276),s=r(a),l=i(277),u=r(l),c=i(123),d=r(c),h=i(127),f=r(h),p=i(50),g=r(p),m=i(278),y=r(m),v=function(){function e(t,i,r,o){var a=o.sessionId,l=o.errorHandlerToggle,u=o.disableAutoLoadFinish;n(this,e),this.appName=t,this.appVersion=i,this.reporter=r,this.params={sessionId:a},this.errorHandlerToggle=l,this.disableAutoLoadFinish=u,this.dataSource=new s.default({appName:t}),l&&window.fedopsLoggerErrorHandler.subscribeListener(t,this.reportError.bind(this))}return o(e,[{key:"reportNetworkAnalysis",value:function(){var e=this,t=g.default.getResources();setTimeout(function(){try{var i=new y.default(e.sessionId),r=i.performNetworkAnalysis(t);if(!r)return;var n=e.dataSource.clone().addItem(i).addItem(r);e._report(n)}catch(e){console.error("[fedops] Failed to report resource metrics",e)}},1e3)}},{key:"reportError",value:function(e,t,i){var r=void 0;r=this._appLoadedCalled?Object.keys(this._outgoingInteractions)[0]:"[APP LOAD]";var n=this.dataSource.clone().addItem({interactionName:r}).addItem({errorType:t}).addItem({errorInfo:i}).addItem(new f.default(this.sessionId));r&&this._report(n)}},{key:"_report",value:function(e){return this.reporter.report(e.mergeItems())}},{key:"getAppName",value:function(){return this.appName}},{key:"getAppVersion",value:function(){return this.appVersion}},{key:"getReporter",value:function(){return this.reporter}},{key:"getParam",value:function(e){return this.params[e]}},{key:"_isDisableAutoLoadFinish",value:function(){return this.disableAutoLoadFinish}},{key:"appLoadingPhase",value:function(e){var t=this.dataSource.clone().addItem({name:e}).addItem(new u.default(this.sessionId)).addItem(new d.default);return this._report(t)}},{key:"sessionId",get:function(){return this.getParam("sessionId")}}]),e}();t.default=v},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(124),u=r(l),c=i(80),d=r(c),h=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{duration:Math.floor(u.default.appLoadTime(e))}));return i.appName=e,i}return a(t,e),s(t,[{key:"setFirstRequestDuration",value:function(){return this.data.frd=Math.floor(u.default.firstRequestDuration(this.appName)),this}}]),t}(d.default);t.default=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return s.default.getStartLoadTime(e)||0}function o(){return u.default.now()}Object.defineProperty(t,"__esModule",{value:!0});var a=i(125),s=r(a),l=i(50),u=r(l);t.default={appLoadTime:function(e){return o()-n(e)},loadStarted:function(e){s.default.setStartLoadTime(e,u.default.now())},firstRequestDuration:function(e){return n(e)}}},function(e,t,i){"use strict";function r(e){return window.fedops.apps[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.default={init:function(e){window.fedops.apps[e]=window.fedops.apps[e]||{}},getStartLoadTime:function(e){var t=r(e);return t?t.startLoadTime:null},setStartLoadTime:function(e,t){return r(e).startLoadTime=t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return"undefined"!=typeof window&&window.location};t.default={getHost:function(){return r()&&window.location.host},isFedopsDev:function(){return((r()||{}).search||"").indexOf("fedops=dev")>-1}}},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EVID=void 0;var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t.EVID=17,u=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l,e))}return o(t,e),t}(s.default);t.default=u},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommonItemContainer=t.CommonItemContainerNotConnected=void 0;var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(47),b=i(105),w=i(45),_=i(22),S=t.CommonItemContainerNotConnected=function(e){return function(t){function i(e,t){(0,u.default)(this,i);var r=(0,f.default)(this,(i.__proto__||(0,s.default)(i)).call(this,e,t));return r.updateLoveCount=r.updateLoveCount.bind(r),r.state={isLoved:_.itemActions.isLoved(e.photoId),loveCount:0},r}return(0,g.default)(i,t),(0,d.default)(i,[{key:"componentDidMount",value:function(){window.addEventListener("love_count_fetched",this.updateLoveCount)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("love_count_fetched",this.updateLoveCount)}},{key:"componentWillReceiveProps",value:function(e){var t=e.photoId;this.setState({isLoved:_.itemActions.isLoved(t),loveCount:_.itemActions.getLoveCount(t)})}},{key:"updateLoveCount",value:function(){this.setState({loveCount:_.itemActions.getLoveCount(this.props.photoId)})}},{key:"toggleLove",value:function(){_.itemActions.postLoveActivity(this.props),_.itemActions.toggleLove(this.props.photoId,"gallery"),this.setState({isLoved:!this.state.isLoved})}},{key:"render",value:function(){var t=(this.props.photoId,this.state),i=t.isLoved,r=t.loveCount;return y.default.createElement(e,(0,o.default)({},this.props,{love:{isLoved:i,count:r+(i?1:0),toggleLove:this.toggleLove.bind(this)}}))}}]),i}(y.default.Component)};t.CommonItemContainer=function(e){var t=S(e),i=function(e,t){var i=e.gallery||{};return{playing:i.videoIndexPlay===t.idx,documentHeight:i.documentHeight,previewHover:i.previewHover}};return(0,w.connect)(i,{videoEnded:v.videoEnded,videoAdded:v.videoAdded,videoRemoved:v.videoRemoved,playVideo:b.playVideo,pauseVideo:b.pauseVideo})(t)}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(3),y=r(m),v=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){if("true"!==y.default.getTopUrlParam("pgdebug"))return!1;var e=g.default.createElement("div",{className:"version-header "},"Pro Gallery Version #",window.staticsVersion),t="";try{t=" psw"+window.top.screen.width+" piw"+window.top.innerWidth+" pbw"+window.top.document.body.clientWidth}catch(e){}var i=g.default.createElement("div",{className:"version-header "},y.default.isLandscape()?"land":"port"," sw",window.screen.width,"sh",window.screen.height," iw",window.innerWidth," bw",document.body.clientWidth," sr",y.default.getViewportScaleRatio(),"rc",this.props.resizeCount," oc",this.props.orientationCount," nh",this.props.newHeight," lh",this.props.lastHeight,t,"www",this.props.maxGalleryWidth);return g.default.createElement("div",null,e,i)}}]),t}(g.default.Component);t.default=v},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(120),y=r(m),v=i(3),b=r(v),w=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.props.actions.setWixHeight(390,window.innerHeight)}},{key:"render",value:function(){b.default.isVerbose()&&console.log("Not rendering - gallery is empty");var e=b.default.isStoreGallery()?g.default.createElement("div",null,g.default.createElement("div",{className:"pro-gallery-empty-title"},y.default.getByKey("Gallery_ArtStore_Organize_Images_EmptyState_Header"),g.default.createElement("br",null),y.default.getByKey("Gallery_ArtStore_Organize_Images_EmptyState_Header2")),g.default.createElement("div",{className:"pro-gallery-empty-info"},y.default.getByKey("Gallery_ArtStore_Organize_Images_EmptyState_Text"),g.default.createElement("br",null))):g.default.createElement("div",null,g.default.createElement("div",{className:"pro-gallery-empty-title"},y.default.getByKey("Gallery_Empty_Title"),g.default.createElement("br",null),y.default.getByKey("Gallery_Empty_Title2")),g.default.createElement("div",{className:"pro-gallery-empty-info"},y.default.getByKey("Gallery_Empty_Description"),g.default.createElement("br",null),y.default.getByKey("Gallery_Empty_Description2")));return g.default.createElement("div",{className:"pro-gallery-empty"},g.default.createElement("div",{className:"pro-gallery-empty-wrapper"},g.default.createElement("div",{className:"pro-gallery-empty-image"}),e))}}]),t}(g.default.Component);t.default=w},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(106),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(3),y=r(m),v=i(2),b=r(v),w=i(116),_=r(w),S=i(130),I=r(S),k=i(39),x=i(129),E=r(x),T=i(79),P=i(7),C=r(P);y.default.fixViewport("Gallery");var M=function(e){function t(e){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.scrollToThumbnail=i.scrollToThumbnail.bind(i),i.stopAutoSlideshow=i.stopAutoSlideshow.bind(i),i.startAutoSlideshowIfNeeded=i.startAutoSlideshowIfNeeded.bind(i),i.handleKeypress=i.handleKeypress.bind(i),i.createEmptyState=i.createEmptyState.bind(i),i._setCurrentItemByScroll=C.default.throttle(i.setCurrentItemByScroll,600,{leading:!1,trailing:!0}).bind(i),i._nextItem=C.default.throttle(i.nextItem,400,{leading:!0,trailing:!1}).bind(i),i.state={flatItems:[],currentIdx:0,isInView:!0},y.default.isLocal()||(0,T.appPartiallyLoaded)("pro-gallery-statics"),i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"isFirstItem",value:function(){return 0===this.state.currentIdx||0===this.props.scroll.top}},{key:"isLastItem",value:function(){var e=this.props.galleryStructure.groups.slice(-1),t=(0,o.default)(e,1),i=t[0];return this.state.currentIdx>=this.props.totalItemsCount-1||!i||this.props.container.galleryWidth+this.props.scroll.top>=i.right}},{key:"nextItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,r=this.setCurrentItemByScroll()||this.state.currentIdx,n=(this.props.styleParams.showArrows,this.props.actions.scrollToItem),o=r+e;if(t)this.isLastItem()&&(o=0,i=0);else{this.startAutoSlideshowIfNeeded(this.props.styleParams);if(1===e&&this.isLastItem()||-1===e&&this.isFirstItem())return}try{n(o,!1,!0,i)}catch(e){return console.error("Cannot proceed to the next Item",e),void this.stopAutoSlideshow()}this.isAutoScrolling=!0,y.default.setStateAndLog(this,"Next Item",{currentIdx:o})}},{key:"stopAutoSlideshow",value:function(){clearInterval(this.autoSlideshowInterval)}},{key:"startAutoSlideshowIfNeeded",value:function(e){var t=this,i=e.isAutoSlideshow,r=e.autoSlideshowInterval,n=e.galleryLayout;this.stopAutoSlideshow(),5!==n&&4!==n&&3!==n||i&&r>0&&this.state.isInView&&(this.autoSlideshowInterval=setInterval(function(){t._nextItem(1,!0,800)},1e3*r))}},{key:"scrollToThumbnail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;this.isAutoScrolling=!0,this.startAutoSlideshowIfNeeded(this.props.styleParams),e+=this.firstItemIdx,y.default.setStateAndLog(this,"Scroll to Item",{currentIdx:e}),this.props.actions.scrollToItem(e,!1,!0,t)}},{key:"handleKeypress",value:function(e){if(y.default.isInWix()){switch(e.charCode||e.keyCode){case 38:case 37:case 33:return e.preventDefault(),this._nextItem(-1),!1;case 39:case 40:case 32:case 34:return e.preventDefault(),this._nextItem(1),!1}return!0}}},{key:"createThumbnails",value:function(e){var t=this,i=this.state.currentIdx;y.default.isVerbose()&&console.log("creating thumbnails for idx",i);var r=this.props.thumbnailSize,n=this.props.thumbnailSize,o=void 0,a=void 0;switch(e){case"top":case"bottom":r=this.props.container.galleryWidth+this.props.styleParams.thumbnailSpacings,n=this.props.thumbnailSize+2*this.props.styleParams.thumbnailSpacings,o=!0,a=Math.ceil(r/this.props.thumbnailSize);break;case"left":case"right":n=this.props.container.galleryHeight+2*this.props.styleParams.thumbnailSpacings,r=this.props.thumbnailSize+2*this.props.styleParams.thumbnailSpacings,o=!1,a=Math.ceil(n/this.props.thumbnailSize)}this.firstItemIdx=i-Math.floor(a/2),this.lastItemIdx=this.firstItemIdx+a-1,this.firstItemIdx<0&&(this.lastItemIdx-=this.firstItemIdx,this.firstItemIdx=0),this.lastItemIdx>this.props.items.length-1&&(this.firstItemIdx-=this.lastItemIdx-(this.props.items.length-1),this.firstItemIdx<0&&(this.firstItemIdx=0),this.lastItemIdx=this.props.items.length-1),(a=this.lastItemIdx-this.firstItemIdx+1)%2==0&&(a+=1,this.lastItemIdx+=1);var s=a*(this.props.thumbnailSize+this.props.styleParams.thumbnailSpacings),l={width:r,height:n};if(i>a/2-1&&i<this.props.items.length-a/2)switch(e){case"top":case"bottom":l.width=s+"px",l.left=0;break;case"left":case"right":l.height=s+"px",l.marginTop=(n-s)/2+"px"}else if(i<a/2-1)switch(e){case"top":case"bottom":l.width=s+"px",l.left=0;break;case"left":case"right":l.height=s+"px",l.marginTop=0}else if(this.lastItemIdx>a&&i>=this.lastItemIdx-3){var u=s-this.props.styleParams.thumbnailSpacings;switch(e){case"top":case"bottom":l.left=r-u+"px",l.overflow="visible";break;case"left":case"right":l.top=n-u+"px",l.overflow="visible"}}var c=C.default.merge({},this.props.container,{galleryWidth:r,galleryHeight:n}),d=this.props.convertToGalleryItems(new k.Layouter({items:this.props.items.slice(this.firstItemIdx,this.lastItemIdx+1).map(function(e){return t.props.convertDtoToLayoutItem(e)}),container:c,watermark:this.props.watermark,styleParams:{gotStyleParams:!1,isVertical:!1,gallerySize:this.props.thumbnailSize,minItemSize:this.props.thumbnailSize,imageMargin:this.props.styleParams.thumbnailSpacings,galleryMargin:0,groupSize:1,chooseBestGroup:!1,groupTypes:"1",cubeImages:!0,smartCrop:!1,collageAmount:0,collageDensity:0,cubeRatio:1,fixedColumns:0,oneRow:o},gotScrollEvent:!0,showAllItems:!0}),{watermark:this.props.watermark}),h={scroll:C.default.merge({},this.props.scroll||{}),thumbnailHighlightId:C.default.get(this,"props.items."+i+".itemId"),watermark:this.props.watermark,container:c,styleParams:C.default.merge({},this.props.styleParams,{allowSocial:!1,allowDownload:!1,allowTitle:!1,allowMultishare:!1,loveButton:!1,loveCounter:!1,videoLoop:!1,videoSpeed:1,videoPlay:"onClick",sharpParams:{quality:90,usm:{}},imageMargin:this.props.styleParams.thumbnailSpacings,galleryMargin:0,enableInfiniteScroll:0,showArrows:!1,itemClick:"expand"}),actions:{scrollToItem:this.scrollToThumbnail,toggleFullscreen:this.props.actions.toggleFullscreen},hidePlay:!0},f=void 0,p=this.props.styleParams.thumbnailSpacings;switch(this.props.styleParams.galleryThumbnailsAlignment){case"bottom":f=p+"px -"+p+"px 0 -"+p+"px";break;case"left":f="-"+p+"px "+p+"px -"+p+"px 0";break;case"top":f="0 -"+p+"px "+p+"px -"+p+"px";break;case"right":f="-"+p+"px 0 -"+p+"px "+p+"px"}return b.default.createElement("div",{className:"pro-gallery inline-styles thumbnails-gallery "+(o?" one-row hide-scrollbars ":"")+(y.default.isAccessibilityEnabled()?" accessible ":""),style:{width:r,height:n,margin:f},"data-hook":"gallery-thumbnails"},d.columns.map(function(e,i){return b.default.createElement("div",{"data-hook":"gallery-thumbnails-column",className:"gallery-column",key:"thumbnails-column"+i,style:l},e.galleryGroups.map(function(e){return b.default.createElement(_.default,C.default.merge(e.renderProps(h),{store:t.props.store}))}))}))}},{key:"setFlattenItems",value:function(e){var t=C.default.flattenDeep(e.columns.map(function(e){return e.galleryGroups.map(function(e){return e.items})}));this.setState({flatItems:t})}},{key:"setCurrentItemByScroll",value:function(){if(y.default.isVerbose()&&console.log("Setting current Idx by scroll",this.isAutoScrolling),this.isAutoScrolling)return void(this.isAutoScrolling=!1);if("true"===(this.container&&this.container.getAttribute("data-scrolling")))return void this.stopAutoSlideshow();this.startAutoSlideshowIfNeeded(this.props.styleParams);for(var e,t=this.container&&this.container.scrollLeft||0,i=this.state.flatItems,r=void 0,n=0;e=i[n];n++)if(e.offset.left>t+(this.props.container.galleryWidth-e.width)/2){r=n-1;break}return C.default.isUndefined(r)||y.default.setStateAndLog(this,"Set Current Item",{currentIdx:r}),r}},{key:"createDebugMsg",value:function(){return b.default.createElement(E.default,this.props.debug)}},{key:"createNavArrows",value:function(){var e=this;return this.props.galleryStructure.columns.some(function(t){var i=C.default.filter(t.groups,function(e){return e.rendered})||[],r=i.reduce(function(e,t){return e+Math.max(0,t.width)},0);return e.props.styleParams.oneRow&&e.props.container.galleryWidth>=r})?null:[this.isFirstItem()?"":b.default.createElement("button",{className:"nav-arrows-container prev ",onClick:function(){return e._nextItem(-1)},"aria-label":"Previous Item",tabIndex:y.default.getTabIndex("slideshowPrev"),key:"nav-arrow-back","data-hook":"nav-arrow-back"},b.default.createElement("img",{src:i(292)})),this.isLastItem()?"":b.default.createElement("button",{className:"nav-arrows-container next",onClick:function(){return e._nextItem(1)},"aria-label":"Next Item",tabIndex:y.default.getTabIndex("slideshowNext"),key:"nav-arrow-next","data-hook":"nav-arrow-next"},b.default.createElement("img",{src:i(293)}))]}},{key:"createLayout",value:function(){var e=this,t={renderedItemsCount:this.props.renderedItemsCount,scroll:this.props.scroll,styleParams:this.props.styleParams,container:this.props.container,multishare:this.props.multishare,watermark:this.props.watermark,settings:this.props.settings,currentIdx:this.state.currentIdx,actions:{getMoreItemsIfNeeded:this.props.actions.getMoreItemsIfNeeded,toggleFullscreen:this.props.actions.toggleFullscreen,addItemToMultishare:this.props.actions.addItemToMultishare,removeItemFromMultishare:this.props.actions.removeItemFromMultishare}};return this.props.galleryStructure.columns.map(function(i,r){var n=0,o=C.default.find(i.groups,function(e){return e.rendered})||{};return e.props.gotScrollEvent&&(n=o.left||0),!!i.galleryGroups.length&&b.default.createElement("div",{"data-hook":"gallery-column",id:"gallery-horizontal-scroll",className:"gallery-horizontal-scroll gallery-column hide-scrollbars",key:"column"+r,style:{width:i.width}},b.default.createElement("div",{className:"gallery-left-padding",style:{width:n}}),i.galleryGroups.map(function(i){return!!i.rendered&&b.default.createElement(_.default,C.default.merge(i.renderProps(t),{store:e.props.store}))}))})}},{key:"createGallery",value:function(){var e={height:this.props.container.galleryHeight,width:this.props.container.galleryWidth};return b.default.createElement("div",{id:"pro-gallery-container",className:"pro-gallery inline-styles one-row hide-scrollbars "+(this.props.styleParams.enableScroll?" slider ":"")+(y.default.isAccessibilityEnabled()?" accessible ":""),style:e},this.createEmptyState(),this.createDebugMsg(),this.createLayout(),this.createNavArrows())}},{key:"getThumbnails",value:function(){var e=this.props.styleParams.hasThumbnails,t=this.props.styleParams.galleryThumbnailsAlignment,i=!!e&&this.createThumbnails(t),r=[];switch(t){case"top":case"left":r[0]=i,r[1]=!1;break;case"right":case"bottom":r[0]=!1,r[1]=i}return r}},{key:"getClassNames",value:function(){var e="";return this.props.styleParams.isSlideshow?e=" gallery-slideshow":this.props.styleParams.isSlider?e=" gallery-slider":this.props.styleParams.hasThumbnails?e=" gallery-thumbnails":this.props.styleParams.isColumns&&(e=" gallery-columns"),this.props.container.galleryWidth>=y.default.getWindowWidth()-10&&(e+=" streched"),e}},{key:"getStyles",value:function(){return{margin:-1*(this.props.styleParams.imageMargin-this.props.styleParams.galleryMargin)}}},{key:"componentWillReceiveProps",value:function(e){e.items&&this.setFlattenItems(e.galleryStructure),y.default.isSite()||this.props.styleParams.isAutoSlideshow===e.styleParams.isAutoSlideshow&&this.props.styleParams.autoSlideshowInterval===e.styleParams.autoSlideshowInterval||this.startAutoSlideshowIfNeeded(e.styleParams)}},{key:"createEmptyState",value:function(){return this.props.renderedItemsCount>0||!y.default.isEditor()?"":b.default.createElement(I.default,{actions:{setWixHeight:this.props.actions.setWixHeight}})}},{key:"componentDidMount",value:function(){var e=this;this.props.galleryStructure&&this.setFlattenItems(this.props.galleryStructure),window.addEventListener("keydown",this.handleKeypress),window.addEventListener("gallery_navigation_out",function(){y.default.setStateAndLog(e,"Next Item",{isInView:!1}),e.stopAutoSlideshow()}),window.addEventListener("gallery_navigation_in",function(){y.default.setStateAndLog(e,"Next Item",{isInView:!0}),e.startAutoSlideshowIfNeeded(e.props.styleParams)}),this.container=document.getElementById("gallery-horizontal-scroll"),this.container&&this.container.addEventListener("scroll",this._setCurrentItemByScroll),this.setCurrentItemByScroll(),this.startAutoSlideshowIfNeeded(this.props.styleParams)}},{key:"componentWillUnmount",value:function(){this.container&&this.container.removeEventListener("scroll",this._setCurrentItemByScroll)}},{key:"render",value:function(){y.default.isDev()&&(console.count("galleryView render"),console.count("Rendering Gallery count"),console.time("Rendering Gallery took "));var e=this.createGallery(),t=this.getThumbnails();return y.default.isDev()&&console.timeEnd("Rendering Gallery took "),b.default.createElement("div",{className:this.getClassNames(),style:this.getStyles()},t[0],e,t[1])}}]),t}(b.default.Component);t.default=M},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(46),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(81),d=i(133),h=i(134),f=i(289),p=i(290),g=function(){function e(t){(0,s.default)(this,e),this.ready=!1,this.pointer=0,this.layoutItems=[],this.findNeighborItem=this.findNeighborItem.bind(this),this.updateParams(t),this.createLayout()}return(0,u.default)(e,[{key:"updateParams",value:function(e){this.srcItems=e.items,this.styleParams=c.utils.convertStyleParams(e.styleParams),this.container=c.utils.convertContainer(e.container,this.styleParams),this.showAllItems=e.showAllItems}},{key:"verifyGalleryState",value:function(){return this.container.galleryWidth?!!this.styleParams.gallerySize||(this.ready=!1,this.reason="gallerySize is undefined or 0",!1):(this.ready=!1,this.reason="galleryWidth is undefined or 0",!1)}},{key:"calcNumberOfColumns",value:function(e,t){return this.styleParams.isVertical?this.styleParams.fixedColumns>0?this.styleParams.fixedColumns:Math.ceil(e/t)||1:1}},{key:"findShortestColumn",value:function(e,t){var i=e[0];if(this.styleParams.placeGroupsLtr)i=e[t%e.length];else{var r=-1,n=!0,a=!1,s=void 0;try{for(var l,u=(0,o.default)(e);!(n=(l=u.next()).done);n=!0){var c=l.value,d=c.height;(d<r||r<0)&&(r=d,i=c)}}catch(e){a=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw s}}}return i}},{key:"createLayout",value:function(e){var t=this;if(void 0!==e&&this.updateParams(e),!this.verifyGalleryState())return!1;this.pointer=0,this.firstGroup=!1,this.layoutItems=[],this.groups=[],this.strips=[];var i=Math.floor(this.styleParams.gallerySize)+Math.ceil(2*(this.styleParams.imageMargin-this.styleParams.galleryMargin)),r=Math.floor(this.container.galleryWidth),n=this.maxGroupSize,o=0,a={},s=[],l=void 0,u=this.container.bounds||{},c=new f.Strip({idx:1,container:this.container,styleParams:this.styleParams}),g=0,m=this.calcNumberOfColumns(r,i);i=this.styleParams.isVertical?Math.floor(r/m):i;var y=Array(m).fill(0).map(function(e,r){return new p.Column(r,i,t.styleParams.cubeRatio)});y[m-1].width+=r-i*m,y[m-1].cubeRatio=this.styleParams.cubeRatio*(y[m-1].width/i);for(var v=10*this.srcItems.length;this.srcItems[this.pointer];){if(--v<=0)return console.error("Cannot create layout, maxLoops reached!!!"),!1;if(a=new d.Item({idx:this.pointer,inGroupIdx:s.length+1,scrollTop:g,dto:this.srcItems[this.pointer],container:this.container,styleParams:this.styleParams}),this.layoutItems[this.pointer]=a,s.push(a),s.length<n&&this.srcItems[this.pointer+1])this.pointer++;else{if(l=new h.Group({idx:o,stripIdx:c.idx,inStripIdx:c.groups.length+1,top:g,items:s,isLastItems:this.isLastImages,gallerySize:i,showAllItems:this.showAllItems,container:this.container,styleParams:this.styleParams}),this.groups[o]=l,this.pointer+=l.realItems.length-s.length,o++,s=[],this.styleParams.isVertical){var b=this.findShortestColumn(y,this.groups.length-1);l.fixItemsRatio(b.cubeRatio),l.resizeToWidth(b.width),l.round(),l.setTop(b.height),l.setLeft(b.idx*i),b.addGroup(l),b.height+=l.totalHeight,g<b.height&&(g=b.height)}else{if(c.isFull(l,this.isLastImage)){c.resizeToHeight(r/c.ratio),c.setWidth(r),g+=c.height,y[0].addGroups(c.groups),this.strips.push(c),c=new f.Strip({idx:c.idx+1,container:this.container,styleParams:this.styleParams}),this.pointer-=l.realItems.length-1,o--;continue}l.setTop(g),l.stripIdx=c.idx,c.ratio+=l.ratio,c.height=r/c.ratio,c.setWidth(r),c.addGroup(l),this.isLastImage&&c.hasGroups&&(this.styleParams.oneRow?c.height=this.container.galleryHeight+(this.styleParams.imageMargin-this.styleParams.galleryMargin):1.5*i<c.height&&(c.height=i,c.markAsIncomplete()),c.resizeToHeight(c.height),g+=c.height,y[0].addGroups(c.groups),this.strips.push(c))}!this.gotScrollEvent&&this.pointer<10?l.calcVisibilities(!0):l.calcVisibilities(u),this.firstGroup||(this.firstGroup=l),this.pointer++}}return this.lastGroup=l,this.columns=y,this.colWidth=Math.floor(r/m),this.height=g-2*(this.styleParams.imageMargin-this.styleParams.galleryMargin),this.calcVisibilities(u),this.ready=!0,this.scheme}},{key:"calcVisibilities",value:function(e){var t=!0,i=!1,r=void 0;try{for(var n,a=(0,o.default)(this.columns);!(t=(n=a.next()).done);t=!0){var s=n.value,l=!0,u=!1,c=void 0;try{for(var d,h=(0,o.default)(s.groups);!(l=(d=h.next()).done);l=!0){d.value.calcVisibilities(e)}}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}return this.scheme}},{key:"lastVisibleItemIdxInHeight",value:function(e){for(var t=this.items.length-1;t>=0;t--){if(this.items[t].offset.top<e)return t}return this.items.length-1}},{key:"lastVisibleItemIdx",value:function(){return this.lastVisibleItemIdxInHeight(this.container.galleryHeight-100)}},{key:"findNeighborItem",value:function(e,t){var i=this,r=this.layoutItems[e],n=void 0,o=function(e,t,r){var n=null,o={},a=void 0,s=void 0,l=void 0;return i.layoutItems.forEach(function(i){a=i.offset.top+i.height/2,s=i.offset.left+i.width/2,l=Math.sqrt(Math.pow(a-t,2)+Math.pow(s-e,2)),(null===n||l>0&&l<n)&&r(e,t,s,a)&&(n=l,o=i)}),o};switch(t){case"up":n=o(r.offset.left+r.width/2,r.offset.top,function(e,t,i,r){return r<t});break;case"left":n=o(r.offset.left,r.offset.top+r.height/2,function(e,t,i){return i<e});break;case"down":n=o(r.offset.left+r.width/2,r.offset.bottom,function(e,t,i,r){return r>t});break;default:case"right":n=o(r.offset.right,r.offset.top+r.height/2,function(e,t,i){return i>e})}return n.idx>=0?n.idx:(console.warn("Could not find offset for itemIdx",e,t),e)}},{key:"isLastImage",get:function(){return!this.srcItems[this.pointer+1]}},{key:"isLastImages",get:function(){return this.styleParams.layoutsVersion>1?!this.srcItems[this.pointer+1]:!this.srcItems[this.pointer+3]}},{key:"imagesLeft",get:function(){return this.srcItems.length-this.pointer-1}},{key:"maxGroupSize",get:function(){var e=1;try{var t="string"==typeof this.styleParams.groupTypes&&this.styleParams.groupTypes.length>0?this.styleParams.groupTypes.split(","):this.styleParams.groupTypes;e=t.reduce(function(e,t){return Math.max(e,parseInt(t))},1),e=Math.min(e,this.styleParams.groupSize)}catch(t){console.error("couldn't calculate max group size - returing 3 (?)",t),e=3}return e}},{key:"items",get:function(){return this.layoutItems}},{key:"scheme",get:function(){return{items:this.items.map(function(e){return e.scheme}),groups:this.groups.map(function(e){return e.scheme}),strips:this.strips.map(function(e){return e.scheme}),columns:this.columns.map(function(e){return e.scheme}),height:this.height}}}]),e}();t.default=g},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var n=i(10),o=r(n),a=i(19),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(81);t.Item=function(){function e(t){if((0,u.default)(this,e),this.style={},this.visibility={},t=t||{},t.dto||(console.error("Item has no DTO",t),t.dto={}),this.dto=t.dto,this.idx=t.idx,this.inGroupIdx=t.inGroupIdx,this.container=t.container,this.cubeType="fill",t.styleParams){var i=t,r=i.styleParams;this.cubeType=r.cubeType,this.cubeImages=r.cubeImages,this._cubeRatio=r.cubeRatio,this.rotatingCropRatios=r.rotatingCropRatios,this.smartCrop=r.smartCrop,this.cropOnlyFill=r.cropOnlyFill,this.imageMargin=r.imageMargin,this.galleryMargin=r.galleryMargin,this.floatingImages=r.floatingImages,this.smartCrop=r.smartCrop}this._groupOffset={top:0,left:0,right:0,bottom:0},this._group={},this.calcPinOffset=function(){return 0},this.resize(1)}return(0,d.default)(e,[{key:"fixMetadataVerticalVideoRatio",value:function(e){if(e.qualities&&e.qualities[0]){var t=e.qualities,i=t[t.length-1],r=i.height,n=i.width;e.height=r,e.width=n}}},{key:"resize",value:function(e){var t=1;if(!1!==e){if(e>0)t=e;else if("object"===(void 0===e?"undefined":(0,s.default)(e)))if(e.width){var i=Math.max(1,e.width);t=i/this.width}else if(e.height){var r=Math.max(1,e.height);t=r/this.height}return this.width*=t,this.height*=t,this.resized=!0,this}}},{key:"pinToCorner",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.indexOf("top")>=0,n=e.indexOf("left")>=0;this.style.top=r?0:"auto",this.style.bottom=r?"auto":0,this.style.left=n?0:"auto",this.style.right=n?"auto":0,this.pin=e,this.isPinnedTop=r,this.isPinnedLeft=n,this.pinAfter=i,this.pinAfterType=r?"top":n?"left":"",this.calcPinOffset=function(e,i){if(t.pinAfter){if(t.pin===i){var r=t.imageMargin;return"top"===i?t.pinAfter.height+2*r:"left"===i?t.pinAfter.width+2*r:0}return 0}return 0}}},{key:"setPosition",value:function(e){this.style.position=e}},{key:"getPosition",value:function(e){return parseInt(e,10)>=0?e:"auto"}},{key:"top",get:function(){return this.getPosition(this.style.top)}},{key:"left",get:function(){return this.getPosition(this.style.left)}},{key:"right",get:function(){return this.getPosition(this.style.right)}},{key:"bottom",get:function(){return this.getPosition(this.style.bottom)}},{key:"group",set:function(e){(0,o.default)(this._group,e)},get:function(){return this._group}},{key:"groupOffset",set:function(e){(0,o.default)(this._groupOffset,e)}},{key:"offset",get:function(){var e={top:this._groupOffset.top+(this.isPinnedTop?this.calcPinOffset(this._group.height,"top"):this._group.height-this.outerHeight)||0,left:this._groupOffset.left+(this.isPinnedLeft?this.calcPinOffset(this._group.width,"left"):this._group.width-this.outerWidth)||0};return e.right=e.left+this.width,e.bottom=e.top+this.height,e}},{key:"transform",get:function(){if(this.floatingImages>0){var e=this.imageMargin,t=this.galleryMargin,i=this.offset.left>0?e:t,r=this.container.galleryWidth-this.offset.right>2*e?e:t,n=this.offset.top>0?e:t,o=this.container.galleryHeight-this.offset.bottom>2*e?e:t;return{transform:"translate3d("+h.utils.hashToInt(this.hash+this.offset.right+"x",-1*i,r)*this.floatingImages+"px, "+h.utils.hashToInt(this.hash+this.offset.top+"y",-1*n,o)*this.floatingImages+"px, 0)"}}return{}}},{key:"id",get:function(){return this.dto.id||this.dto.photoId||this.dto.itemId},set:function(e){this.dto.itemId=this.dto.photoId=this.dto.id=e}},{key:"hash",get:function(){return this.dto.hash||this.dto.mediaUrl||this.dto.id}},{key:"maxWidth",get:function(){return this.dto.width||this.dto.w},set:function(e){this.dto.width=e}},{key:"outerWidth",get:function(){return this.width+2*this.margins}},{key:"orgWidth",get:function(){return this.style.width||this.dto.width||this.dto.w||1}},{key:"width",get:function(){var e=void 0;return e=this.cubeImages&&this.ratio>=this.cubeRatio?this.style.cubedWidth||this.orgHeight*this.cubeRatio:this.orgWidth,Math.max(e,1)},set:function(e){this.style.cubedWidth=this.style.width=Math.max(1,e)}},{key:"outerHeight",get:function(){return this.height+2*this.margins}},{key:"orgHeight",get:function(){return this.style.height||this.dto.height||this.dto.h||1}},{key:"height",get:function(){var e=void 0;return e=this.cubeImages&&this.ratio<this.cubeRatio?this.style.cubedHeight||this.orgWidth/this.cubeRatio:this.orgHeight,Math.max(e,1)},set:function(e){this.style.cubedHeight=this.style.height=Math.max(1,e)}},{key:"maxHeight",get:function(){return this.dto.height||this.dto.h},set:function(e){this.dto.height}},{key:"margins",get:function(){return this.imageMargin||0},set:function(e){this.imageMargin=e}},{key:"cubeRatio",get:function(){var e=void 0;if(this.rotatingCropRatios&&this.rotatingCropRatios.length>0){var t=String(this.rotatingCropRatios).split(",");e=t[this.idx%t.length]}return e||"function"!=typeof this._cubeRatio||(e=this._cubeRatio()),!e&&this.cropOnlyFill&&"fit"===this.cubeType&&(e=this.ratio),e||(e=this._cubeRatio||this.ratio),e=Number(e),!0===this.smartCrop?this.isPortrait?Math.min(e,1/e):Math.max(e,1/e):e},set:function(e){this._cubeRatio=e,this.style.cubedHeight=this.style.cubedWidth=0}},{key:"orientation",get:function(){return this.ratio<.999?"portrait":"landscape"}},{key:"isPortrait",get:function(){return"portrait"===this.orientation}},{key:"isLandscape",get:function(){return"landscape"===this.orientation}},{key:"ratio",get:function(){return this.orgRatio||(this.orgRatio=this.orgWidth/this.orgHeight),this.orgRatio},set:function(e){this.orgRatio=e}},{key:"scheme",get:function(){return{id:this.id,idx:this.idx,inGroupIdx:this.inGroupIdx,dto:this.dto,type:this.type,style:this.style,width:this.width,maxWidth:this.maxWidth,outerWidth:this.outerWidth,height:this.height,maxHeight:this.maxHeight,outerHeight:this.outerHeight,margins:this.margins,ratio:this.ratio,cropRatio:this.cubeRatio,isCropped:this.cubeImages,cropType:this.cubeType,group:this.group,offset:this.offset,groupOffset:this._groupOffset,transform:this.transform,orientation:this.orientation,isPortrait:this.isPortrait,isLandscape:this.isLandscape,visibility:this.visibility}}}]),e}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var n=i(46),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(81),d=i(287),h=r(d),f={lll:"1,2h",llp:"1,3r",lpl:"1,2h",pll:"1,2h,3l",lpp:"1,2h,3r,3h",plp:"1,2h,3l,3r,3h",ppl:"1,2h,3l,3h",ppp:"1,2h,3l,3r,3h"},p={lll:"1,2v,3t,3b,3v",llp:"1,2v,3t,3v",lpl:"1,2v,3t,3b,3v",pll:"1,2v,3b,3v",lpp:"1,2v,3t",plp:"1,2v",ppl:"1,3b",ppp:"1,2h"},g={1:[[1]],2:[[1],[1,2],[2]],3:[[1],[1,2],[1,2,3],[2,3],[3]]};t.Group=function(){function e(t){if((0,s.default)(this,e),this.idx=t.idx,this.stripIdx=t.stripIdx,this.inStripIdx=t.inStripIdx,this.items=t.items,this.top=t.top,this.showAllItems=t.showAllItems,this.isLastItems=t.isLastItems,this.dummyItems=[],t.styleParams){var i=t.styleParams;this.oneRow=i.oneRow,this.cubeType=i.cubeType,this.cubeImages=i.cubeImages,this.isVertical=i.isVertical,this.minItemSize=i.minItemSize,this.gallerySize=i.gallerySize,this.collageAmount=i.collageAmount,this.collageDensity=i.collageDensity,this.groupTypes=i.groupTypes,this.rotatingGroupTypes=i.rotatingGroupTypes,this.chooseBestGroup=i.chooseBestGroup,this.layoutsVersion=i.layoutsVersion,this.bottomInfoHeight=i.bottomInfoHeight,this.imageMargin=i.imageMargin}this.visible=!0,this.rendered=!0,this.required=!0;for(var r=this.items.length;!this.isWithinMinItemSize&&r>0;)this.placeItems(r),this.resize(),r--}return(0,u.default)(e,[{key:"resize",value:function(){this.isVertical?this.resizeToWidth(this.gallerySize):this.resizeToHeight(this.gallerySize),this.setLeft(this.left),this.setTop(this.top)}},{key:"safeGetItem",value:function(e){if(this.items[e])return this.items[e];if(this.dummyItems[e])return this.dummyItems[e];var t=(0,h.default)(this.items[this.items.length-1]);return t.id+="dummy",t.idx=this.idx*(e+1)+1,t.type="dummy",this.dummyItems[e]=t,t}},{key:"fixItemsRatio",value:function(e){var t=!0,i=!1,r=void 0;try{for(var n,a=(0,o.default)(this.items);!(t=(n=a.next()).done);t=!0){var s=n.value;s.cubeRatio=e,s.resize(1)}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"round",value:function(){this.isLastGroup&&!this.oneRow?this.width=this.stripWidth-this.left:this.width=Math.round(this.width),this.height=Math.round(this.height);var e=!0,t=!1,i=void 0;try{for(var r,n=(0,o.default)(this.items);!(e=(r=n.next()).done);e=!0){var a=r.value;a.width=Math.round(a.width),a.height=Math.round(a.height),a.group={width:this.width,height:this.height}}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}var s=2*this.imageMargin;switch(this.type){default:case"1":this.safeGetItem(0).width=this.width-s,this.safeGetItem(0).height=this.height-s;break;case"2v":this.safeGetItem(0).width=this.safeGetItem(1).width=this.width-s,this.safeGetItem(0).height=this.height-this.safeGetItem(1).height-2*s;break;case"2h":this.safeGetItem(0).height=this.safeGetItem(1).height=this.height-s,this.safeGetItem(0).width=this.width-this.safeGetItem(1).width-2*s;break;case"3t":this.safeGetItem(0).width=this.width-s,this.safeGetItem(0).height=this.height-this.safeGetItem(1).height-2*s,this.safeGetItem(1).width=this.width-this.safeGetItem(2).width-2*s,this.safeGetItem(2).height=this.safeGetItem(1).height;break;case"3b":this.safeGetItem(0).width=this.width-this.safeGetItem(1).width-2*s,this.safeGetItem(1).height=this.safeGetItem(0).height,this.safeGetItem(2).height=this.height-this.safeGetItem(1).height-2*s,this.safeGetItem(2).width=this.width-s;break;case"3l":this.safeGetItem(1).height=this.height-this.safeGetItem(2).height-2*s,this.safeGetItem(2).width=this.safeGetItem(1).width,this.safeGetItem(0).width=this.width-this.safeGetItem(1).width-2*s,this.safeGetItem(0).height=this.height-s;break;case"3r":this.safeGetItem(0).height=this.height-this.safeGetItem(1).height-2*s,this.safeGetItem(1).width=this.safeGetItem(0).width,this.safeGetItem(2).width=this.width-this.safeGetItem(1).width-2*s,this.safeGetItem(2).height=this.height-s;break;case"3v":this.safeGetItem(0).width=this.width-s,this.safeGetItem(1).width=this.width-s,this.safeGetItem(2).width=this.width-s,this.safeGetItem(2).height=this.height-this.safeGetItem(0).height-this.safeGetItem(1).height-3*s;break;case"3h":this.safeGetItem(0).height=this.height-s,this.safeGetItem(1).height=this.height-s,this.safeGetItem(2).height=this.height-s,this.safeGetItem(2).width=this.width-this.safeGetItem(0).width-this.safeGetItem(1).width-3*s}}},{key:"getGroupType",value:function(e){if(this.rotatingGroupTypes){var t=String(this.rotatingGroupTypes).split(",");return t[this.idx%t.length]}var i=this.isVertical,r=void 0;if(this.chooseBestGroup){var n=this.items.map(function(e){return e.orientation.slice(0,1)}).join("");r=(i?f:p)[n]}else 3!==this.items.length&&3!==e||(r=i?"1,2h,3l,3r,3h":"1,2v,3t,3b,3v");2!==this.items.length&&2!==e||(r=i?"1,2h":"1,2v"),1!==this.items.length&&1!==e||(r="1");var o=r.length>0?r.split(","):[];if(this.groupTypes){var a=this.groupTypes.split(",");a.length>1?(o=o.filter(function(e){return a.indexOf(e)>=0}),0===o.length&&(o=["1"])):o=a}if(this.layoutsVersion>1&&this.collageDensity>=0){var s=this.collageDensity,l=parseInt(o[o.length-1]),u=g[l],c=u[Math.floor(s*(u.length-1))];o=o.filter(function(e){return c.indexOf(parseInt(e))>=0}),0===o.length&&(o=["1"])}return o[this.calculateRandomSeed(o.length)]||"1"}},{key:"calculateRandomSeed",value:function(e){var t=void 0;return t=this.isVertical?c.utils.hashToInt(this.items[0].hash)%e:(this.inStripIdx+this.stripIdx)%e,1===this.layoutsVersion&&this.collageAmount>=0&&(t+=(this.collageAmount-.5)*e),Math.round(Math.min(Math.max(0,t),e-1))}},{key:"placeItems",value:function(e){this.type=this.getGroupType(e);var t=[],i=void 0,r=0,n=0;switch(this.type){default:case"1":i=this.safeGetItem(0),i.pinToCorner("top-left"),t.push(i),r=i.width,n=i.height;break;case"2v":i=this.safeGetItem(0),i.pinToCorner("top-left"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(1),i.pinToCorner("bottom-left"),i.resize(r/i.width),n+=i.height,t.push(i);break;case"2h":i=this.safeGetItem(0),i.pinToCorner("top-left"),i.innerOffset=[0,0],t.push(i),r=i.width,n=i.height,i=this.safeGetItem(1),i.pinToCorner("top-right"),i.innerOffset=[0,0],i.resize(n/i.height),r+=i.width,t.push(i);break;case"3b":i=this.safeGetItem(0),i.pinToCorner("top-left"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(1),i.pinToCorner("top-right"),i.resize(n/i.height),r+=i.width,t.push(i),i=this.safeGetItem(2),i.pinToCorner("bottom-left"),i.resize(r/i.width),n+=i.height,t.push(i);break;case"3t":i=this.safeGetItem(1),i.pinToCorner("bottom-left"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(2),i.pinToCorner("bottom-right"),i.resize(n/i.height),r+=i.width,t.push(i),i=this.safeGetItem(0),i.pinToCorner("top-left"),i.resize(r/i.width),n+=i.height,t=[i].concat(t);break;case"3r":i=this.safeGetItem(0),i.pinToCorner("top-left"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(1),i.pinToCorner("bottom-left"),i.resize(r/i.width),n+=i.height,t.push(i),i=this.safeGetItem(2),i.pinToCorner("top-right"),i.resize(n/i.height),r+=i.width,t.push(i);break;case"3l":i=this.safeGetItem(1),i.pinToCorner("top-right"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(2),i.pinToCorner("bottom-right"),i.resize(r/i.width),n+=i.height,t.push(i),i=this.safeGetItem(0),i.pinToCorner("top-left"),i.resize(n/i.height),r+=i.width,t=[i].concat(t);break;case"3v":i=this.safeGetItem(0),i.pinToCorner("top-left"),i.setPosition("relative"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(2),i.pinToCorner("bottom-left"),i.setPosition("relative"),i.resize(r/i.width),n+=i.height,t.push(i),i=this.safeGetItem(1),i.setPosition("relative"),i.resize(r/i.width),n+=i.height,i.pinToCorner("top",t[0]),t=[t[0],i,t[1]];break;case"3h":i=this.safeGetItem(0),i.pinToCorner("top-left"),i.setPosition("relative"),t.push(i),r=i.width,n=i.height,i=this.safeGetItem(2),i.pinToCorner("top-right"),i.setPosition("relative"),i.resize(n/i.height),r+=i.width,t.push(i),i=this.safeGetItem(1),i.setPosition("relative"),i.resize(n/i.height),r+=i.width,i.pinToCorner("left",t[0]),t=[t[0],i,t[1]]}this.width=r,this.height=n,this.items=t,this.placed=!0}},{key:"resizeToHeight",value:function(e){this.height=e,this.width=this.getWidthByHeight(e),this.resizeItems()}},{key:"resizeToWidth",value:function(e){this.width=e,this.height=this.getHeightByWidth(e),this.resizeItems()}},{key:"resizeItems",value:function(){var e=this,t=["3b","3r"].indexOf(this.type)>=0?this.items.slice().reverse():this.items;t.forEach(function(i,r){i.resize(e.getItemDimensions(t,r)),i.group={top:e.top,left:e.left,width:e.width,height:e.height},i.groupOffset={bottom:e.top+e.height,right:e.left+e.width}})}},{key:"getItemDimensions",value:function(e,t){var i=2*this.imageMargin;switch(this.type){default:case"1":case"2v":case"3v":return{width:this.width-i};case"2h":case"3h":return{height:this.height-i};case"3t":case"3b":if(0===t){return{width:this.width-i}}return{height:this.height-e[0].height-2*i};case"3r":case"3l":if(0===t){return{height:this.height-i}}return{width:this.width-e[0].width-2*i}}}},{key:"getHeightByWidth",value:function(e){var t=1,i=1,r=2*this.imageMargin,n=this.items.map(function(e){return e.width/e.height});switch(this.type){default:case"1":t=1/n[0],i=1-t;break;case"2h":t=1/(n[0]+n[1]),i=1-2*t;break;case"2v":t=1/n[0]+1/n[1],i=2-t;break;case"3h":t=1/(n[0]+n[1]+n[2]),i=1-3*t;break;case"3v":t=1/n[0]+1/n[1]+1/n[2],i=3-t;break;case"3t":t=1/(n[2]+n[1])+1/n[0],i=2-2/(n[2]+n[1])+1/n[0];break;case"3b":t=1/(n[0]+n[1])+1/n[2],i=2-2/(n[0]+n[1])+1/n[2];break;case"3l":t=(n[1]+n[2])/(n[0]*n[1]+n[1]*n[2]+n[0]*n[2]),i=2-t*(2+n[0]);break;case"3r":t=(n[0]+n[1])/(n[0]*n[1]+n[1]*n[2]+n[0]*n[2]),i=2-t*(2+n[2])}return e*t+r*i}},{key:"getWidthByHeight",value:function(e){var t=1,i=1,r=2*this.imageMargin,n=this.items.map(function(e){return e.width/e.height});switch(this.type){default:case"1":t=n[0],i=1-t;break;case"2h":t=n[0]+n[1],i=2-t;break;case"2v":t=1/(1/n[0]+1/n[1]),i=1-2*t;break;case"3h":t=n[0]+n[1]+n[2],i=3-t;break;case"3v":t=1/(1/n[0]+1/n[1]+1/n[2]),i=1-3*t;break;case"3t":t=1/(1/(n[2]+n[1])+1/n[0]),i=(2/(n[2]+n[1])+1/n[0]-2)*t;break;case"3b":t=1/(1/(n[0]+n[1])+1/n[2]),i=(2/(n[0]+n[1])+1/n[2]-2)*t;break;case"3l":t=(n[0]*n[1]+n[1]*n[2]+n[0]*n[2])/(n[1]+n[2]),i=2+n[0]-2*t;break;case"3r":t=(n[0]*n[1]+n[1]*n[2]+n[0]*n[2])/(n[0]+n[1]),i=2+n[2]-2*t}return e*t+r*i}},{key:"setTop",value:function(e){this.top=e||0;var t=!0,i=!1,r=void 0;try{for(var n,a=(0,o.default)(this.items);!(t=(n=a.next()).done);t=!0){n.value.groupOffset={top:e,bottom:e+this.height}}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"setLeft",value:function(e){this.left=e||0;var t=!0,i=!1,r=void 0;try{for(var n,a=(0,o.default)(this.items);!(t=(n=a.next()).done);t=!0){n.value.groupOffset={left:e,right:e+this.width}}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"calcVisibilities",value:function(e){!0===e||!0===this.showAllItems?this.onscreen=this.visible=this.rendered=this.required=!0:this.oneRow?(this.onscreen=this.right>=e.onscreenTop&&this.left<=e.onscreenBottom,this.visible=this.right>=e.visibleTop&&this.left<=e.visibleBottom,this.rendered=this.right>=e.renderedTop&&this.left<=e.renderedBottom,this.required=this.right>=e.requiredTop&&this.left<=e.requiredBottom):(this.onscreen=this.bottom>=e.onscreenTop&&this.top<=e.onscreenBottom,this.visible=this.bottom>=e.visibleTop&&this.top<=e.visibleBottom,this.rendered=this.bottom>=e.renderedTop&&this.top<=e.renderedBottom,this.required=this.bottom>=e.requiredTop&&this.top<=e.requiredBottom);for(var t=0;t<this.items.length;t++)this.items[t].visibility={onscreen:this.onscreen,visible:this.visible,rendered:this.rendered,required:this.required}}},{key:"id",get:function(){return"g"+this.idx+"_"+(this.items[0]||{}).id}},{key:"ratio",get:function(){return this.width/this.height}},{key:"totalHeight",get:function(){return this.height+(this.bottomInfoHeight||0)}},{key:"bottom",get:function(){return this.top+this.height}},{key:"right",get:function(){return this.left+this.width}},{key:"items",set:function(e){this._items=e},get:function(){return this._items}},{key:"realItems",get:function(){return this._items.filter(function(e){return"dummy"!==e.type})}},{key:"isWithinMinItemSize",get:function(){var e=this;return!(0===this.items.length||!this.placed)&&(1===this.items.length||this.items.reduce(function(t,i){var r=Math.min(i.width,i.height)>=e.minItemSize;return t&&r},!0))}},{key:"scheme",get:function(){return{id:this.id,idx:this.idx,stripIdx:this.stripIdx,inStripIdx:this.inStripIdx,isLastGroup:this.isLastGroup,items:this.items.map(function(e){return e.scheme}),type:this.type,width:this.width,height:this.height,totalHeight:this.totalHeight,ratio:this.ratio,top:this.top,left:this.left,right:this.right,bottom:this.bottom,visible:this.visible,rendered:this.rendered,required:this.required}}}]),e}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(0),o=r(n),a=i(1),s=r(a),l=i(52),u=r(l),c=i(70),d=i(13),h=r(d),f=i(298),p=r(f),g=i(7),m=r(g),y=i(73),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(y),b=function(){var e=c.renderUtils.getWorkerWindow(),t=void 0;if(e){var i=c.renderUtils.getGalleryDataFromWorker();t=m.default.get(i,"window.gallerySettings.upgrades")}return t||(t=m.default.get(c.renderUtils.getGallerySettingsFromWindow(),"upgrades")),t},w=function(){function e(t,i){(0,o.default)(this,e),this.dateCreated=t,this.versionManager=new u.default(i,t)}return(0,s.default)(e,[{key:"update",value:function(e){this.dateCreated=e||this.dateCreated;var t=b();this.versionManager.update(this.dateCreated,t)}},{key:"getFeaturesWithNewerVersions",value:function(){var e=b(),t=this.versionManager.getFeaturesWithNewerVersions(e);return m.default.isEmpty(t)?null:t}},{key:"getVersion",value:function(e){return this.versionManager.getVersion(e)}},{key:"getFeature",value:function(e){return this.versionManager.getFeature(e)}}]),e}(),_=void 0,S=void 0;try{_=window.dateCreated,S=v.parse(window.location.search),h.default.Utils.getDemoMode()&&(_=(new Date).toString())}catch(e){_={},S=""}var I=m.default.get(S,"debugApp");I&&I.indexOf("features_upgrade")>-1&&(_=null);var k=c.renderUtils.getDateCreatedTicksFromStr(_),x=new w(k,p.default);e.exports={ProGalleryVersionManager:w,pgVersionManager:x,VersionManagerCore:u.default,featuresList:p.default}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=i(0),o=r(n),a=i(1),s=r(a),l=i(52),u=r(l),c=i(135),d=function(){function e(t){(0,o.default)(this,e),this.pgVersionManager=t||c.pgVersionManager}return(0,s.default)(e,[{key:"allowFixedColumnsInMasonry",value:function(){return this.pgVersionManager.getVersion("layouts")!==u.default.Versions.min}}]),e}(),h=new d;e.exports={layoutsVersionManager:h,LayoutsVersionManager:d}},function(e,t,i){"use strict";/*!
 * prepend-http-extra <https://github.com/tunnckoCore/prepend-http-extra>
 *
 * Copyright (c) 2016 Charlike Mike Reagent <@tunnckoCore> (http://www.tunnckocore.tk)
 * Released under the MIT license.
 */
var r=i(299);e.exports=function(e){return e=r(e),/^\/\//.test(e)?"http:"+e:e}},function(e,t,i){"use strict";function r(e){var t=void 0;return d.default.isSite()&&(t=Number(d.default.parseGetParam("width"))),t=d.default.browserIs("chromeIos")?t||document.body.clientWidth:document.body.clientWidth,d.default.isMobile()&&(t=Math.floor(t/d.default.getViewportScaleRatio())),Math.min(Math.floor(e),t)}function n(e,t){var i=Math.floor(e-t);return d.default.isMobile()&&!d.default.isiOS()&&(i=Math.floor(i/d.default.getViewportScaleRatio())),i}function o(e){return Number(e.imageMargin)-Number(e.galleryMargin)}function a(e,t){var i={galleryWidth:s(e,t),galleryHeight:l(e,t)},r=h+e.galleryMargin+3*e.thumbnailSpacings;if(e.hasThumbnails)switch(e.galleryThumbnailsAlignment){case"top":case"bottom":i.galleryHeight-=r;break;case"left":case"right":i.galleryWidth-=r}else e.isSlideshow&&(i.galleryHeight-=f);return i}function s(e,t){return Math.floor((t.width>0?t.width:function(){return r(d.default.isMobile()?document.body.clientWidth:window.innerWidth)}())+2*o(e))}function l(e,t){var i=e.oneRow?t.offsetTop:0;return Math.floor((t.height>0?t.height:function(){return n(window.innerHeight,i)}())+o(e))}function u(e,t){return s(e,t)/l(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.thumbnailSize=t.getGalleryRatio=t.getGalleryWidth=t.getGalleryHeight=t.getGalleryDimensions=void 0;var c=i(3),d=function(e){return e&&e.__esModule?e:{default:e}}(c),h=d.default.isMobile()?90:120,f=220;t.getGalleryDimensions=a,t.getGalleryHeight=l,t.getGalleryWidth=s,t.getGalleryRatio=u,t.thumbnailSize=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommonItemContainer=t.GalleryItem=t.LoveButton=t.ProGallery=void 0,i(140),i(141),i(142);var n=i(143),o=r(n),a=i(119),s=r(a),l=i(51),u=r(l),c=i(128);t.ProGallery=o.default,t.LoveButton=s.default,t.GalleryItem=u.default,t.CommonItemContainer=c.CommonItemContainer},function(e,t){e.exports={"pro-circle-preloader":"_3HLI9",proCirclePreloader:"_3HLI9","semi-rotate":"_2fSBY",semiRotate:"_2fSBY","inner-rotate":"_35BZn",innerRotate:"_35BZn","love-animation":"_2FaRo",loveAnimation:"_2FaRo",loved:"Nv9dE","text-item":"_1cK7o",textItem:"_1cK7o","te-pro-gallery-text-item":"_3wK_8",teProGalleryTextItem:"_3wK_8",clear:"y2Ywp",inactive:"WWMPB","pro-tooltip":"_3h6w_",proTooltip:"_3h6w_",left:"_3YpLx",right:"_2zpOR",top:"_33kgL","hide-scrollbars":"_39dv8",hideScrollbars:"_39dv8",rotation:"_1od_p"}},function(e,t){},function(e,t){e.exports={changing_background:"rVV94",changingBackground:"rVV94"}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(45),b=i(37),w=i(204),_=r(w),S=i(205),I=r(S),k=i(47),x=i(220),E=r(x),T=i(300),P=r(T),C=i(3),M=r(C),O=i(13),A=r(O),L=i(104),R=r(L),D=i(303),N=r(D),G=i(305),W=function(e){function t(e){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return i.canRender="undefined"!=typeof window&&"undefined"!=typeof document,i.canRender&&i.init(e),i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.store&&this.store.dispatch&&!0===this.props.forceHover&&this.store.dispatch((0,k.toggleHoverPreview)(this.props.forceHover))}},{key:"componentWillReceiveProps",value:function(e){this.store&&this.store.dispatch&&e.forceHover!==this.props.forceHover&&this.store.dispatch((0,k.toggleHoverPreview)(e.forceHover))}},{key:"init",value:function(e){this.domId=Math.floor(1e6*Math.random());var t=[_.default,(0,N.default)({videoQueue:new G.VideoQueue,utils:M.default})];this.store=(0,b.createStore)(I.default,{},b.applyMiddleware.apply(void 0,t)),this.initStoreEvents(this.store)}},{key:"initStoreEvents",value:function(e){A.default&&A.default.addEventListener&&A.default.addEventListener(A.default.Events.STYLE_PARAMS_CHANGE,function(t){e.dispatch({type:R.default.videoModeChanged,payload:t.numbers.videoPlay})})}},{key:"render",value:function(){var e=!0===this.props.useRefactoredProGallery?P.default:E.default;return this.canRender&&y.default.createElement("div",{id:"pro-gallery-"+this.domId,className:"pro-gallery"},y.default.createElement(v.Provider,{store:this.store},y.default.createElement(e,(0,o.default)({},this.props,{domId:this.domId,items:this.props.items||i(306).defaultImages,store:this.store,watermarkData:this.props.watermarkData,settings:this.props.settings||{},offsetTop:this.props.offsetTop}))))}}]),t}(y.default.Component);t.default=W},function(e,t,i){i(145),e.exports=i(8).Object.assign},function(e,t,i){var r=i(14);r(r.S+r.F,"Object",{assign:i(146)})},function(e,t,i){"use strict";var r=i(32),n=i(61),o=i(42),a=i(35),s=i(86),l=Object.assign;e.exports=!l||i(25)(function(){var e={},t={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var i=a(e),l=arguments.length,u=1,c=n.f,d=o.f;l>u;)for(var h,f=s(arguments[u++]),p=c?r(f).concat(c(f)):r(f),g=p.length,m=0;g>m;)d.call(f,h=p[m++])&&(i[h]=f[h]);return i}:l},function(e,t,i){var r=i(26),n=i(56),o=i(148);e.exports=function(e){return function(t,i,a){var s,l=r(t),u=n(l.length),c=o(a,u);if(e&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}}},function(e,t,i){var r=i(57),n=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?n(e+t,0):o(e,t)}},function(e,t,i){i(150),e.exports=i(8).Object.getPrototypeOf},function(e,t,i){var r=i(35),n=i(87);i(88)("getPrototypeOf",function(){return function(e){return n(r(e))}})},function(e,t,i){i(152);var r=i(8).Object;e.exports=function(e,t,i){return r.defineProperty(e,t,i)}},function(e,t,i){var r=i(14);r(r.S+r.F*!i(18),"Object",{defineProperty:i(16).f})},function(e,t,i){e.exports={default:i(154),__esModule:!0}},function(e,t,i){i(36),i(44),e.exports=i(63).f("iterator")},function(e,t,i){var r=i(57),n=i(55);e.exports=function(e){return function(t,i){var o,a,s=String(n(t)),l=r(i),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,i){"use strict";var r=i(62),n=i(31),o=i(43),a={};i(20)(a,i(12)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=r(a,{next:n(1,i)}),o(e,t+" Iterator")}},function(e,t,i){var r=i(16),n=i(15),o=i(32);e.exports=i(18)?Object.defineProperties:function(e,t){n(e);for(var i,a=o(t),s=a.length,l=0;s>l;)r.f(e,i=a[l++],t[i]);return e}},function(e,t,i){"use strict";var r=i(159),n=i(160),o=i(27),a=i(26);e.exports=i(90)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,i):"values"==t?n(0,e[i]):n(0,[i,e[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){e.exports={default:i(162),__esModule:!0}},function(e,t,i){i(163),i(95),i(168),i(169),e.exports=i(8).Symbol},function(e,t,i){"use strict";var r=i(11),n=i(21),o=i(18),a=i(14),s=i(91),l=i(164).KEY,u=i(25),c=i(59),d=i(43),h=i(41),f=i(12),p=i(63),g=i(64),m=i(165),y=i(166),v=i(15),b=i(17),w=i(26),_=i(54),S=i(31),I=i(62),k=i(167),x=i(94),E=i(16),T=i(32),P=x.f,C=E.f,M=k.f,O=r.Symbol,A=r.JSON,L=A&&A.stringify,R=f("_hidden"),D=f("toPrimitive"),N={}.propertyIsEnumerable,G=c("symbol-registry"),W=c("symbols"),j=c("op-symbols"),F=Object.prototype,V="function"==typeof O,U=r.QObject,H=!U||!U.prototype||!U.prototype.findChild,z=o&&u(function(){return 7!=I(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,i){var r=P(F,t);r&&delete F[t],C(e,t,i),r&&e!==F&&C(F,t,r)}:C,B=function(e){var t=W[e]=I(O.prototype);return t._k=e,t},q=V&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Y=function(e,t,i){return e===F&&Y(j,t,i),v(e),t=_(t,!0),v(i),n(W,t)?(i.enumerable?(n(e,R)&&e[R][t]&&(e[R][t]=!1),i=I(i,{enumerable:S(0,!1)})):(n(e,R)||C(e,R,S(1,{})),e[R][t]=!0),z(e,t,i)):C(e,t,i)},Z=function(e,t){v(e);for(var i,r=m(t=w(t)),n=0,o=r.length;o>n;)Y(e,i=r[n++],t[i]);return e},X=function(e,t){return void 0===t?I(e):Z(I(e),t)},J=function(e){var t=N.call(this,e=_(e,!0));return!(this===F&&n(W,e)&&!n(j,e))&&(!(t||!n(this,e)||!n(W,e)||n(this,R)&&this[R][e])||t)},K=function(e,t){if(e=w(e),t=_(t,!0),e!==F||!n(W,t)||n(j,t)){var i=P(e,t);return!i||!n(W,t)||n(e,R)&&e[R][t]||(i.enumerable=!0),i}},Q=function(e){for(var t,i=M(w(e)),r=[],o=0;i.length>o;)n(W,t=i[o++])||t==R||t==l||r.push(t);return r},$=function(e){for(var t,i=e===F,r=M(i?j:w(e)),o=[],a=0;r.length>a;)!n(W,t=r[a++])||i&&!n(F,t)||o.push(W[t]);return o};V||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===F&&t.call(j,i),n(this,R)&&n(this[R],e)&&(this[R][e]=!1),z(this,e,S(1,i))};return o&&H&&z(F,e,{configurable:!0,set:t}),B(e)},s(O.prototype,"toString",function(){return this._k}),x.f=K,E.f=Y,i(93).f=k.f=Q,i(42).f=J,i(61).f=$,o&&!i(34)&&s(F,"propertyIsEnumerable",J,!0),p.f=function(e){return B(f(e))}),a(a.G+a.W+a.F*!V,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ie=T(f.store),re=0;ie.length>re;)g(ie[re++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return n(G,e+="")?G[e]:G[e]=O(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in G)if(G[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:X,defineProperty:Y,defineProperties:Z,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),A&&a(a.S+a.F*(!V||u(function(){var e=O();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function(e){for(var t,i,r=[e],n=1;arguments.length>n;)r.push(arguments[n++]);if(i=t=r[1],(b(t)||void 0!==e)&&!q(e))return y(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),r[1]=t,L.apply(A,r)}}),O.prototype[D]||i(20)(O.prototype,D,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,i){var r=i(41)("meta"),n=i(17),o=i(21),a=i(16).f,s=0,l=Object.isExtensible||function(){return!0},u=!i(25)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},h=function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},f=function(e){return u&&p.NEED&&l(e)&&!o(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},function(e,t,i){var r=i(32),n=i(61),o=i(42);e.exports=function(e){var t=r(e),i=n.f;if(i)for(var a,s=i(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,i){var r=i(33);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,i){var r=i(26),n=i(93).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):n(r(e))}},function(e,t,i){i(64)("asyncIterator")},function(e,t,i){i(64)("observable")},function(e,t,i){e.exports={default:i(171),__esModule:!0}},function(e,t,i){i(172),e.exports=i(8).Object.setPrototypeOf},function(e,t,i){var r=i(14);r(r.S,"Object",{setPrototypeOf:i(173).set})},function(e,t,i){var r=i(17),n=i(15),o=function(e,t){if(n(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=i(24)(Function.call,i(94).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,i){return o(e,i),t?e.__proto__=i:r(e,i),e}}({},!1):void 0),check:o}},function(e,t,i){e.exports={default:i(175),__esModule:!0}},function(e,t,i){i(176);var r=i(8).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,i){var r=i(14);r(r.S,"Object",{create:i(62)})},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",i=arguments[1],a=i||t+"Subscription",l=function(e){function i(o,a){r(this,i);var s=n(this,e.call(this,o,a));return s[t]=o.store,s}return o(i,e),i.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[a]=null,e},i.prototype.render=function(){return s.Children.only(this.props.children)},i}(s.Component);return l.propTypes={store:c.a.isRequired,children:u.a.element.isRequired},l.childContextTypes=(e={},e[t]=c.a.isRequired,e[a]=c.b,e),l}t.a=a;var s=i(2),l=(i.n(s),i(65)),u=i.n(l),c=i(96);i(66);t.b=a()},function(e,t,i){"use strict";function r(){}var n=i(179);e.exports=function(){function e(e,t,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return i.checkPropTypes=r,i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,i){"use strict";function r(e,t,i){if("string"!=typeof t){if(d){var h=c(t);h&&h!==d&&r(e,h,i)}var f=s(t);l&&(f=f.concat(l(t)));for(var p=0;p<f.length;++p){var g=f[p];if(!(n[g]||o[g]||i&&i[g])){var m=u(t,g);try{a(e,g,m)}catch(e){}}}return e}return e}var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,s=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,d=c&&c(Object);e.exports=r},function(e,t,i){"use strict";var r=function(e,t,i,r,n,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[i,r,n,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){var e=[],t=[];return{clear:function(){t=o,e=o},notify:function(){for(var i=e=t,r=0;r<i.length;r++)i[r]()},get:function(){return t},subscribe:function(i){var r=!0;return t===e&&(t=e.slice()),t.push(i),function(){r&&e!==o&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(i),1))}}}}i.d(t,"a",function(){return s});var o=null,a={notify:function(){}},s=function(){function e(t,i,n){r(this,e),this.store=t,this.parentSub=i,this.onStateChange=n,this.unsubscribe=null,this.listeners=a}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=n())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},e}()},function(e,t,i){"use strict";function r(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function n(e,t,i){for(var r=t.length-1;r>=0;r--){var n=t[r](e);if(n)return n}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+i+" argument when connecting component "+r.wrappedComponentName+".")}}function o(e,t){return e===t}var a=i(97),s=i(184),l=i(185),u=i(200),c=i(201),d=i(202),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,i=void 0===t?a.a:t,f=e.mapStateToPropsFactories,p=void 0===f?u.a:f,g=e.mapDispatchToPropsFactories,m=void 0===g?l.a:g,y=e.mergePropsFactories,v=void 0===y?c.a:y,b=e.selectorFactory,w=void 0===b?d.a:b;return function(e,t,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=l.pure,c=void 0===u||u,d=l.areStatesEqual,f=void 0===d?o:d,g=l.areOwnPropsEqual,y=void 0===g?s.a:g,b=l.areStatePropsEqual,_=void 0===b?s.a:b,S=l.areMergedPropsEqual,I=void 0===S?s.a:S,k=r(l,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),x=n(e,p,"mapStateToProps"),E=n(t,m,"mapDispatchToProps"),T=n(a,v,"mergeProps");return i(w,h({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:E,initMergeProps:T,pure:c,areStatesEqual:f,areOwnPropsEqual:y,areStatePropsEqual:_,areMergedPropsEqual:I},k))}}()},function(e,t,i){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function n(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(var a=0;a<i.length;a++)if(!o.call(t,i[a])||!r(e[i[a]],t[i[a]]))return!1;return!0}t.a=n;var o=Object.prototype.hasOwnProperty},function(e,t,i){"use strict";function r(e){return"function"==typeof e?Object(s.b)(e,"mapDispatchToProps"):void 0}function n(e){return e?void 0:Object(s.a)(function(e){return{dispatch:e}})}function o(e){return e&&"object"==typeof e?Object(s.a)(function(t){return Object(a.bindActionCreators)(e,t)}):void 0}var a=i(37),s=i(102);t.a=[r,n,o]},function(e,t,i){"use strict";function r(e){return null==e?void 0===e?l:s:u&&u in Object(e)?Object(o.a)(e):Object(a.a)(e)}var n=i(99),o=i(189),a=i(190),s="[object Null]",l="[object Undefined]",u=n.a?n.a.toStringTag:void 0;t.a=r},function(e,t,i){"use strict";var r=i(188),n="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||n||Function("return this")();t.a=o},function(e,t,i){"use strict";(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.a=i}).call(t,i(38))},function(e,t,i){"use strict";function r(e){var t=a.call(e,l),i=e[l];try{e[l]=void 0;var r=!0}catch(e){}var n=s.call(e);return r&&(t?e[l]=i:delete e[l]),n}var n=i(99),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=n.a?n.a.toStringTag:void 0;t.a=r},function(e,t,i){"use strict";function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;t.a=r},function(e,t,i){"use strict";var r=i(192),n=Object(r.a)(Object.getPrototypeOf,Object);t.a=n},function(e,t,i){"use strict";function r(e,t){return function(i){return e(t(i))}}t.a=r},function(e,t,i){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},function(e,t,i){"use strict";(function(e,r){var n,o=i(196);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(n);t.a=a}).call(t,i(38),i(195)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,i){"use strict";function r(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}t.a=r},function(e,t,i){"use strict";function r(e,t){var i=t&&t.type;return"Given action "+(i&&'"'+i.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function n(e){Object.keys(e).forEach(function(t){var i=e[t];if(void 0===i(void 0,{type:a.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===i(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(e){for(var t=Object.keys(e),i={},o=0;o<t.length;o++){var a=t[o];"function"==typeof e[a]&&(i[a]=e[a])}var s=Object.keys(i),l=void 0;try{n(i)}catch(e){l=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(l)throw l;for(var n=!1,o={},a=0;a<s.length;a++){var u=s[a],c=i[u],d=e[u],h=c(d,t);if(void 0===h){var f=r(u,t);throw new Error(f)}o[u]=h,n=n||h!==d}return n?o:e}}t.a=o;var a=i(98);i(67),i(100)},function(e,t,i){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function n(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),n={},o=0;o<i.length;o++){var a=i[o],s=e[a];"function"==typeof s&&(n[a]=r(s,t))}return n}t.a=n},function(e,t,i){"use strict";function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(i,r,a){var s=e(i,r,a),l=s.dispatch,u=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=n.a.apply(void 0,u)(s.dispatch),o({},s,{dispatch:l})}}}t.a=r;var n=i(101),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}},function(e,t,i){"use strict";function r(e){return"function"==typeof e?Object(o.b)(e,"mapStateToProps"):void 0}function n(e){return e?void 0:Object(o.a)(function(){return{}})}var o=i(102);t.a=[r,n]},function(e,t,i){"use strict";function r(e,t,i){return s({},i,e,t)}function n(e){return function(t,i){var r=(i.displayName,i.pure),n=i.areMergedPropsEqual,o=!1,a=void 0;return function(t,i,s){var l=e(t,i,s);return o?r&&n(l,a)||(a=l):(o=!0,a=l),a}}}function o(e){return"function"==typeof e?n(e):void 0}function a(e){return e?void 0:function(){return r}}var s=(i(103),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e});t.a=[o,a]},function(e,t,i){"use strict";function r(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function n(e,t,i,r){return function(n,o){return i(e(n,o),t(r,o),o)}}function o(e,t,i,r,n){function o(n,o){return p=n,g=o,m=e(p,g),y=t(r,g),v=i(m,y,g),f=!0,v}function a(){return m=e(p,g),t.dependsOnOwnProps&&(y=t(r,g)),v=i(m,y,g)}function s(){return e.dependsOnOwnProps&&(m=e(p,g)),t.dependsOnOwnProps&&(y=t(r,g)),v=i(m,y,g)}function l(){var t=e(p,g),r=!h(t,m);return m=t,r&&(v=i(m,y,g)),v}function u(e,t){var i=!d(t,g),r=!c(e,p);return p=e,g=t,i&&r?a():i?s():r?l():v}var c=n.areStatesEqual,d=n.areOwnPropsEqual,h=n.areStatePropsEqual,f=!1,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0;return function(e,t){return f?u(e,t):o(e,t)}}function a(e,t){var i=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,l=r(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),u=i(e,l),c=a(e,l),d=s(e,l);return(l.pure?o:n)(u,c,d,e,l)}t.a=a;i(203)},function(e,t,i){"use strict";i(66)},function(e,t,i){"use strict";function r(e){return function(t){var i=t.dispatch,r=t.getState;return function(t){return function(n){return"function"==typeof n?n(i,r,e):t(n)}}}}Object.defineProperty(t,"__esModule",{value:!0});var n=r();n.withExtraArgument=r,t.default=n},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(37),o=i(206),a=r(o),s=i(208),l=r(s),u=i(217),c=r(u),d=i(219),h=r(d);t.default=(0,n.combineReducers)({loveButton:a.default,gallery:l.default,fullscreen:c.default,multishare:h.default})},function(e,t,i){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case n.TOGGLE_LOVE:var i=t.isLoved?e.count+1:e.count-1;return a.default.merge({},e,{isLoved:t.isLoved,count:i});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=i(207),o=i(7),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s={isLoved:!1,count:0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TOGGLE_LOVE="TOGGLE_LOVE",t.PROOF_ITEM_HOVER="PROOF_ITEM_HOVER",t.PROOF_ITEM_SELECT="PROOF_ITEM_SELECT",t.PROOF_MODE_CHANGE="PROOF_MODE_CHANGE"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.gallery,t=arguments[1];switch(t.type){case s.SET_WIX_DATA:if(t.boundingRectAndOffsets){var i=t.boundingRectAndOffsets,r=i.offsets.y,n=-1*i.rect.top/m.default.getViewportScaleRatio(),o=void 0;return i&&i.rect&&!p.default.isUndefined(i.rect.width)&&(o=i.rect.width),p.default.merge({},e,{wixInit:!0,scrollBase:r,scrollTop:n,maxGalleryWidth:o})}return p.default.merge({},e,{wixInit:!0,scrollBase:0});case u.default.videoModeChanged:var l=t.payload;e.videoPlayMode!==l&&(e=(0,a.default)({},e,{videoPlayMode:l}));break;case s.SET_ITEMS:return p.default.merge({},e,{items:t.items});case s.SET_RENDERED_ITEMS_COUNT:return p.default.merge({},e,{renderedItemsCount:t.count});case s.GALLERY_WINDOW_LAYOUT_CHANGED:var d={documentHeight:t.documentHeight};return p.default.merge({},e,d);case s.SET_VIDEO_PLAY_INDEX:e=(0,a.default)({},e,{videoIndexPlay:t.payload});break;case c.PLAY_VIDEO:return p.default.merge({},e,{videoIndexPlay:t.idx});case c.PAUSE_VIDEO:return p.default.merge({},e,{videoIndexPlay:-1});case s.TOGGLE_HOVER_PREVIEW:return p.default.merge({},e,{previewHover:t.toggle});default:return e}return e}Object.defineProperty(t,"__esModule",{value:!0});var o=i(9),a=r(o);t.default=n;var s=i(68),l=i(104),u=r(l),c=i(105),d=i(69),h=r(d),f=i(7),p=r(f),g=i(3),m=r(g)},function(e,t,i){e.exports={default:i(210),__esModule:!0}},function(e,t,i){i(44),i(36),e.exports=i(211)},function(e,t,i){var r=i(71),n=i(12)("iterator"),o=i(27);e.exports=i(8).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,i){i(44),i(36),e.exports=i(213)},function(e,t,i){var r=i(15),n=i(72);e.exports=i(8).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},n="undefined"!=typeof document?document:{addEventListener:function(){},removeEventListener:function(){}},o={closeWindow:function(){},addEventListener:function(e,t){n.addEventListener(e,t)},removeEventListener:function(e,t){n.removeEventListener(e,t)},stylesMock:{fonts:{testKey:{cssFontFamily:"1111"}},numbers:{},colors:{},booleans:{}},colorMock:{colors:{testColorKey:"color-1"}},getBoundingRectAndOffsets:function(e){e({offsets:{x:0,y:0}})},getCurrentPageId:function(e){e("mock-page-id")},Utils:{navigateToSection:function(){},getOrigCompId:function(){},getCompId:function(){return"mock-comp-id"},getViewMode:function(){},getDemoMode:function(){},getInstance:function(){return"instance"},getInstanceValue:function(){return""},getInstanceId:function(){return"instance-id"},getBusinessId:function(){return"business-id"},isOverEditor:function(){return!1},getSectionUrl:function(e,t){setTimeout(function(){t("https://mock_section_url")},0)},Media:{getResizedImageUrl:function(e,t,i){return"/images/test-"+e+"-"+t+"-"+i+".jpg"}}},setHeight:function(){},UI:{create:function(){return{}},initialize:function(){},onChange:function(e,t){n.addEventListener(e,function(){t(r[e])})},get:function(e){return r[e]},set:function(e,t){r[e]=t},modelCache:r},Styles:{getColorByreference:function(){return{value:"#123456"}},getSiteColors:function(){for(var e=[],t=0;t<31;t++)e[t]=t;return e},getStyleParams:function(e){return e?e(o.stylesMock):o.stylesMock},getStyleParamsByStyleId:function(e,t){return t?t(o.stylesMock):o.stylesMock},restoreParam:function(){o.stylesMock={fonts:{testKey:{cssFontFamily:"1111"}},numbers:{},colors:{},booleans:{}}},setFontParam:function(e,t,i){o.stylesMock.fonts[e]={cssFontFamily:t.value.cssFontFamily},i&&i()},setColorParam:function(e,t,i){o.colorMock.colors[e]=t,i&&i()},getSiteTextPresets:function(){return{Title:{editorKey:"font_0",fontFamily:"fontFamilyTitle",lineHeight:"1.4em",size:"40px",style:"normal",value:"value",weight:"normal"}}},getEditorFonts:function(){return[{language:"hebrew",fonts:[{cssFontFamily:"fontFamilyTitle0",fontFamily:"fontFamilyTitle0",genericFamily:"cursive0",permissions:"all0",provider:"google0",spriteIndex:132}]},{language:"latin",fonts:[{cssFontFamily:"fontFamilyTitle",fontFamily:"fontFamilyTitle",genericFamily:"cursive",permissions:"all",provider:"google",spriteIndex:154}]},{language:"arabic",fonts:[{cssFontFamily:"fontFamilyTitleArabic",fontFamily:"fontFamilyTitleArabic",genericFamily:"cursiveArabic",permissions:"allArabic",provider:"googleArabic",spriteIndex:160}]}]},getStyleId:function(e){e("mock-style-id")}},Settings:{openModal:function(e,t,i,r,n){n()},triggerSettingsUpdatedEvent:function(){},getSiteInfo:function(e){return e({baseUrl:"www.test.boost.co.il"})},getDashboardAppUrl:function(e){e.call()},refreshApp:function(){return""},setExternalId:function(){},addComponent:function(){},MediaType:{IMAGE:"photos",BACKGROUND:"backgrounds",AUDIO:"audio",DOCUMENT:"documents",SWF:"swf",SECURE_MUSIC:"secure_music",VIDEO:"video",SHAPE:"shape",MUSIC:"music",CLIPART:"clipart",BG_VIDEO:"bg_video",ICON_DOCUMENT:"icon_document",ICON_SOCIAL:"bg_social",ICON_FAVICON:"bg_favicon",MUSIC_PRO:"secure_music",IMAGE_PRO:"secure_picture",FLASH:"swf",BG_IMAGE:"backgrounds"}},Events:{PUBLIC_DATA_CHANGED:"PUBLIC_DATA_CHANGED",SETTINGS_UPDATED:"SETTINGS_UPDATED",EDIT_MODE_CHANGE:"EDIT_MODE_CHANGE",STYLE_PARAMS_CHANGE:"STYLE_PARAMS_CHANGE",THEME_CHANGE:"THEME_CHANGE",PAGE_NAVIGATION_IN:"PAGE_NAVIGATION_IN",PAGE_NAVIGATION_OUT:"PAGE_NAVIGATION_OUT"},Theme:{BARE:"bare"},scrollTo:function(){},scrollBy:function(){},getSiteInfo:function(){},Data:{Public:{get:function(e,t,i){i({pg:1})}}},Features:{isSupported:function(){},Types:{ADD_COMPONENT:"ADD_COMPONENT"}},PubSub:{subscribe:function(){},publish:function(){}},getSitePages:function(e){"function"==typeof e&&e([])},replaceSectionState:function(){},Performance:{applicationLoaded:function(){}}};t.default=o},function(e,t,i){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,i){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,s,l=r(e),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var c in i)o.call(i,c)&&(l[c]=i[c]);if(n){s=n(i);for(var d=0;d<s.length;d++)a.call(i,s[d])&&(l[s[d]]=i[s[d]])}}return l}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.fullscreen,t=arguments[1];switch(t.type){case o.SET_SLIDE:return u.default.merge({},e,{slideIdx:t.slideIdx});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=i(218),a=i(69),s=r(a),l=i(7),u=r(l)},function(e,t,i){"use strict";function r(e){return{type:n,slideIdx:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSlide=r;var n=t.SET_SLIDE="SET_SLIDE"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.multishare;return arguments[1].type,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=i(69),a=r(o),s=i(7);r(s)},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function mapStateToProps(e){return e.gallery}function mapDispatchToProps(e){return{actions:(0,_redux.bindActionCreators)(actions,e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GalleryContainer=void 0;var _extends2=__webpack_require__(9),_extends3=_interopRequireDefault(_extends2),_typeof2=__webpack_require__(19),_typeof3=_interopRequireDefault(_typeof2),_assign=__webpack_require__(10),_assign2=_interopRequireDefault(_assign),_toConsumableArray2=__webpack_require__(221),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_promise=__webpack_require__(74),_promise2=_interopRequireDefault(_promise),_getPrototypeOf=__webpack_require__(4),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(0),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(1),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(5),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(114),_reactDom2=_interopRequireDefault(_reactDom),_reactRedux=__webpack_require__(45),_redux=__webpack_require__(37),_galleryActions=__webpack_require__(47),actions=_interopRequireWildcard(_galleryActions),_galleryView=__webpack_require__(115),_galleryView2=_interopRequireDefault(_galleryView),_slideshowView=__webpack_require__(131),_slideshowView2=_interopRequireDefault(_slideshowView),_proGalleryLayouter=__webpack_require__(39),_galleryItem=__webpack_require__(51),_galleryItem2=_interopRequireDefault(_galleryItem),_galleryGroup=__webpack_require__(82),_galleryGroup2=_interopRequireDefault(_galleryGroup),_lodash=__webpack_require__(7),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(3),_utils2=_interopRequireDefault(_utils),_spacing=__webpack_require__(83),_layouts=__webpack_require__(136),_itemActions=__webpack_require__(22),_biLogger=__webpack_require__(29),_WixSdkWrapper=__webpack_require__(13),_WixSdkWrapper2=_interopRequireDefault(_WixSdkWrapper),_consts=__webpack_require__(49),_consts2=_interopRequireDefault(_consts),_axios=__webpack_require__(30),_axios2=_interopRequireDefault(_axios),_prependHttpExtra=__webpack_require__(137),_prependHttpExtra2=_interopRequireDefault(_prependHttpExtra);try{window.itemActions=_itemActions.itemActions}catch(e){}var FullscreenContainer=void 0,GalleryContainer=exports.GalleryContainer=function(_React$Component){function GalleryContainer(e,t){(0,_classCallCheck3.default)(this,GalleryContainer);var i=(0,_possibleConstructorReturn3.default)(this,(GalleryContainer.__proto__||(0,_getPrototypeOf2.default)(GalleryContainer)).call(this,e,t));i.closeFullscreenCallback=i.closeFullscreenCallback.bind(i),i.toggleInfiniteScroll=i.toggleInfiniteScroll.bind(i),i.toggleFullscreen=i.toggleFullscreen.bind(i),i.getGalleryScroll=i.getGalleryScroll.bind(i),i.setWixHeight=i.setWixHeight.bind(i),i.scrollToItem=i.scrollToItem.bind(i),i.addItemToMultishare=i.addItemToMultishare.bind(i),i.removeItemFromMultishare=i.removeItemFromMultishare.bind(i),i.updateMultishareItems=i.updateMultishareItems.bind(i),i.handleVisibilityChange=i.handleVisibilityChange.bind(i),i.dispatchNavigationOutIfNeeded=i.dispatchNavigationOutIfNeeded.bind(i),i.dispatchNavigationInIfNeeded=i.dispatchNavigationInIfNeeded.bind(i),i.reRenderForHorizontalScroll=i.reRenderForHorizontalScroll.bind(i),i.reRenderForScroll=i.reRenderForScroll.bind(i),i.reRenderForStyles=i.reRenderForStyles.bind(i),i.reRenderForSettings=i.reRenderForSettings.bind(i),i.reRenderForResize=i.reRenderForResize.bind(i),i.reRenderForOrientation=i.reRenderForOrientation.bind(i),i.reRenderForEditMode=i.reRenderForEditMode.bind(i),i.reRenderForDevice=i.reRenderForDevice.bind(i),i.onResizeEvent=i.onResizeEvent.bind(i);var r=_lodash2.default.throttle,n=2e3;if(!_utils2.default.browserIs("explorer")&&!_utils2.default.isTest())try{switch(_utils2.default.safeLocalStorage().scrollThrottleMode){case"throttle250":n=250;break;case"throttle500":n=500;break;case"throttle1000":n=1e3;break;default:case"throttle2000":n=2e3;break;case"debounce100":n=100,r=_lodash2.default.debounce;break;case"debounce300":n=300,r=_lodash2.default.debounce;break;case"debounce500":n=500,r=_lodash2.default.debounce}i.reRenderForScroll=r(i.reRenderForScroll,n),i.reRenderForHorizontalScroll=r(i.reRenderForHorizontalScroll,n),_utils2.default.isVerbose()&&console.log("debouncing scroll",r,n)}catch(e){console.error("Could not debounce scroll",e)}i.renderTriggers={SCROLL:"Scroll",STYLES:"Styles",ITEMS:"Items",RESIZE:"Resize",ORIENTATION:"Orientation",MODE:"Mode",NONE:"None",LAYOUT:"Layout",ALL:"All"},i.lastHeight=0,i.newHeight=0,i.resizeCount=0,i.orientationCount=0,i.scrollBase=0,i.lastOffsetTop=0,i.thumbnailSize=_utils2.default.isMobile()?90:120,i.slideshowInfoSize=220,i.preloadedItems=[];i.init();i.defaultStateStyles={gotStyleParams:!1,galleryLayout:_utils2.default.isStoreGallery()?2:0,selectedLayout:0,isVertical:!1,gallerySize:320,minItemSize:120,groupSize:3,chooseBestGroup:!0,groupTypes:"1,2h,2v,3t,3b,3l,3r",cubeImages:!1,cubeType:"fill",smartCrop:!1,fullscreen:!0,allowSocial:!0,allowDownload:!1,allowTitle:!0,allowDescription:!1,allowMultishare:!1,loveButton:!0,loveCounter:!0,videoLoop:!0,videoSpeed:1,videoPlay:"hover",gallerySliderImageRatio:0,galleryImageRatio:2,numberOfImagesPerRow:3,sharpParams:{quality:90,usm:{}},collageAmount:.8,collageDensity:.8,borderRadius:0,boxShadow:0,imageMargin:5,galleryMargin:0,floatingImages:0,viewMode:"preview",galleryHorizontalAlign:"center",galleryTextAlign:"center",galleryVerticalAlign:"center",enableInfiniteScroll:1,itemClick:"expand",cubeRatio:1,fixedColumns:0,oneRow:!1,showArrows:!1,isSlideshow:!1,hasThumbnails:!1,galleryThumbnailsAlignment:"bottom",thumbnailSpacings:0,gridStyle:0,useCustomButton:_utils2.default.isStoreGallery(),titlePlacement:_consts2.default.placements.SHOW_ON_HOVER,mobilePanorama:!1,isAutoSlideshow:!1,autoSlideshowInterval:4};var o=i.getGalleryWidth();i.galleryStructure={},i.items=i.props.items;var a=i.itemsIds(i.items);return i.newProps={},i.state={items:a,renderedItemsCount:i.props.renderedItemsCount||a.length,totalItemsCount:i.props.totalItemsCount||a.length,scroll:{isInfinite:i.isInfiniteScroll(),base:i.scrollBase||0,top:i.currentScrollPosition||0},container:{maxGalleryWidth:i.props.maxGalleryWidth,galleryWidth:o,galleryHeight:i.getGalleryHeight(),viewMode:"site",bounds:{visibleTop:0,visibleBottom:1e3,renderedTop:0,renderedBottom:3e3}},styleParams:_lodash2.default.clone(i.defaultStateStyles),hashtag:{filter:_utils2.default.getWorkerWindow()["pro-gallery-hashtag-filter"]||"",items:[]},multishare:{items:[],isMultisharing:!0===i.props.defaultSelectMode}},window.isWebpSupported=_utils2.default.isWebpSupported(),_lodash2.default.isFunction(e.onInit)&&e.onInit(),setTimeout(function(){void 0===i.state.styleParams.gotStyleParams&&console.error("Gallery Container: styleParams are empty")},5e3),i}return(0,_inherits3.default)(GalleryContainer,_React$Component),(0,_createClass3.default)(GalleryContainer,[{key:"init",value:function(){var e=this,t=[];if(this.currentScrollPosition=0,this.compId=_utils2.default.isSemiNative()?"compId":_WixSdkWrapper2.default.Utils.getCompId(),this.galleryId=window.galleryId,this.currentWindowWidth=window.innerWidth,this.currentWindowHeight=window.innerHeight,_utils2.default.isSemiNative()||(_WixSdkWrapper2.default.getCurrentPageId(function(t){e.pageId=t,_WixSdkWrapper2.default.Styles.getStyleId(function(t){e.styleId=t,_WixSdkWrapper2.default.Utils.getSectionUrl({sectionId:_utils2.default.getFullscreenSectionId()},function(t){e.fullscreenUrl=t.url,e.setState({itemActionsInit:_itemActions.itemActions.initWidgetData({compId:e.compId,pageId:e.pageId,styleId:e.styleId,galleryId:e.galleryId,fullscreenUrl:e.fullscreenUrl})}),_utils2.default.getWorkerWindow()["pro-gallery-data-"+e.compId]={info:{compId:e.compId,pageId:e.pageId,styleId:e.styleId,galleryId:e.galleryId,dateCreated:_utils2.default.getDateCreatedTicksFromStr(window.dateCreated)},window:{infiniteScrollUrl:window.infiniteScrollUrl,instance:window.instance}}})})}),_WixSdkWrapper2.default.getBoundingRectAndOffsets(function(t){e.scrollBase=t.offsets.y*t.scale||0,t&&t.rect&&!_lodash2.default.isUndefined(t.rect.width)&&(e.maxGalleryWidth=_lodash2.default.get(t,"rect.width")||0)})),this.initEventsFunction(),t.length)return _promise2.default.all(t)}},{key:"initEventsFunction",value:function(){this.windowEventsFunctions=[],this.wixEventsFunctions=[],_utils2.default.isInWix()||_utils2.default.isWixIframe()?(this.wixEventsFunctions.push([_WixSdkWrapper2.default.Events.STYLE_PARAMS_CHANGE,this.reRenderForStyles]),this.wixEventsFunctions.push([_WixSdkWrapper2.default.Events.SETTINGS_UPDATED,this.reRenderForSettings]),this.wixEventsFunctions.push([_WixSdkWrapper2.default.Events.DEVICE_TYPE_CHANGED,this.reRenderForDevice]),this.wixEventsFunctions.push([_WixSdkWrapper2.default.Events.EDIT_MODE_CHANGE,this.reRenderForEditMode]),this.props.ignoreWixScrollEvent||this.wixEventsFunctions.push([_WixSdkWrapper2.default.Events.SCROLL,this.reRenderForScroll])):this.windowEventsFunctions.push(["scroll",this.reRenderForScroll]),this.windowEventsFunctions.push(["resize",this.onResizeEvent]),this.windowEventsFunctions.push(["orientationchange",this.reRenderForOrientation]),_utils2.default.isSemiNative()?this.onItemClickEvent=new window.CustomEvent("on_item_click"):(this.onItemClickEvent=document.createEvent("CustomEvent"),this.onItemClickEvent.initCustomEvent("on_item_click",!1,!1,null))}},{key:"initEventListeners",value:function(){_utils2.default.isInWix()||_utils2.default.isSemiNative()||window.addEventListener("beforeunload",function(){window.scrollTop=0}),this.windowEventsFunctions.forEach(function(e){var t;return(t=window).addEventListener.apply(t,(0,_toConsumableArray3.default)(e))}),document.addEventListener("scroll",this.reRenderForHorizontalScroll,!0),_utils2.default.isSemiNative()||this.wixEventsFunctions.forEach(function(e){return _WixSdkWrapper2.default.addEventListener&&_WixSdkWrapper2.default.addEventListener.apply(_WixSdkWrapper2.default,(0,_toConsumableArray3.default)(e))})}},{key:"removeEventListeners",value:function(){this.windowEventsFunctions.forEach(function(e){var t;return(t=window).removeEventListener.apply(t,(0,_toConsumableArray3.default)(e))}),document.removeEventListener("scroll",this.reRenderForHorizontalScroll,!0),_utils2.default.isSemiNative()||this.wixEventsFunctions.forEach(function(e){return _WixSdkWrapper2.default.removeEventListener&&_WixSdkWrapper2.default.removeEventListener.apply(_WixSdkWrapper2.default,(0,_toConsumableArray3.default)(e))})}},{key:"dispatchNavigationOutIfNeeded",value:function(){this.tabFocused&&this.wixFocused||window.dispatchEvent(this.navigationOutEvent)}},{key:"dispatchNavigationInIfNeeded",value:function(){this.tabFocused&&this.wixFocused&&window.dispatchEvent(this.navigationInEvent)}},{key:"handleVisibilityChange",value:function(){var e=void 0;void 0!==document.hidden?e="hidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),document[e]?(this.tabFocused=!1,this.dispatchNavigationOutIfNeeded()):(this.tabFocused=!0,this.dispatchNavigationInIfNeeded())}},{key:"initNavigationEventListeners",value:function(){var e=this;if(!_utils2.default.isSemiNative()){_WixSdkWrapper2.default.addEventListener(_WixSdkWrapper2.default.Events.PAGE_NAVIGATION_IN,function(){e.initEventListeners(),e.props.actions.navigationIn(),_itemActions.itemActions.getStats(),e.wixFocused=!0,e.dispatchNavigationInIfNeeded()}),_WixSdkWrapper2.default.addEventListener(_WixSdkWrapper2.default.Events.PAGE_NAVIGATION_OUT,function(){e.removeEventListeners(),e.wixFocused=!1,e.dispatchNavigationOutIfNeeded()});var t=void 0;void 0!==document.hidden?t="visibilitychange":void 0!==document.msHidden?t="msvisibilitychange":void 0!==document.webkitHidden&&(t="webkitvisibilitychange"),window.addEventListener(t,this.handleVisibilityChange,!1)}}},{key:"initPersistentEventListeners",value:function(){window.addEventListener("fullscreen_closed",this.closeFullscreenCallback)}},{key:"initCustomEvents",value:function(){_utils2.default.isSemiNative()?(this.galleryScrollEvent=new window.CustomEvent("gallery_scroll"),this.navigationOutEvent=new window.CustomEvent("gallery_navigation_out"),this.navigationInEvent=new window.CustomEvent("gallery_navigation_in")):(this.galleryScrollEvent=document.createEvent("CustomEvent"),this.galleryScrollEvent.initCustomEvent("gallery_scroll",!1,!1,null),this.navigationOutEvent=document.createEvent("CustomEvent"),this.navigationOutEvent.initCustomEvent("gallery_navigation_out",!1,!1,null),this.navigationInEvent=document.createEvent("CustomEvent"),this.navigationInEvent.initCustomEvent("gallery_navigation_in",!1,!1,null))}},{key:"preloadItem",value:function(e,t){if(e&&e.itemId&&e.isGalleryItem)try{var i=e.itemId;if(void 0!==this.preloadedItems[i])return;return this.preloadedItems[i]=new Image,_utils2.default.isVerbose()&&console.log("Preloading item #"+e),console.time("[DIMENSIONS] preloading item #"+e.idx),this.preloadedItems[i].src=e.thumbnail_url.img,"function"==typeof t&&(this.preloadedItems[i].onload=function(i){console.timeEnd("[DIMENSIONS] preloading item #"+e.idx),t(i)}),this.preloadedItems[i]}catch(t){return void console.error("Could not preload item",e)}}},{key:"loadItemsDimensions",value:function(){var e=this;if(this.galleryItems()){this.galleryItems().filter(function(e,t){try{return e.isVisible&&e.isDimensionless}catch(e){return!1}}).forEach(function(t,i,r){e.preloadItem(t,function(r){try{_utils2.default.isVerbose()&&console.log("item loaded event",i,r);var n=r.srcElement,o=e.items.findIndex(function(e){return e.itemId===t.itemId});e.items[o].metaData.width=n.width,e.items[o].metaData.height=n.height}catch(r){console.error("Could not calc element dimensions",r)}e.reRender(e.renderTriggers.ITEMS)})})}}},{key:"getStyleBySeed",value:function(e){!e>0&&(e=999999),e=Math.floor(e);var t=function(e){e=String(e);for(var t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t},i=function(e,t){return Math.floor(1e7*(e/t-Math.floor(e/t)))};if(_utils2.default.isSite()&&_lodash2.default.get(this,"state.styleParams.gotStyleParams")&&!this.props.styleParams)return void(_utils2.default.isVerbose()&&console.log("already got style params, not fetching again",this.state.styleParams));var r=function(r,n,o){var a=t(o),s=n-r+1;return i(e,a)%s+r},n=function(e){return!!r(0,1,e)},o={cubeImages:n("cubeImages"),cubeRatio:r(1,25,"cubeRatio")/5,isVertical:n("isVertical"),gallerySize:r(300,800,"gallerySize"),collageAmount:r(5,10,"collageAmount")/10,collageDensity:(_spacing.spacingVersionManager.isNewSpacing()?r(1,100,"collageDensity"):r(5,10,"collageDensity"))/100,groupTypes:["1"].concat(_lodash2.default.filter("2h,2v,3t,3b,3l,3r,3h,3v".split(","),function(e,t){return n("groupTypes"+t)})),oneRow:n("oneRow"),borderRadius:0,boxShadow:0,imageMargin:r(0,_spacing.spacingVersionManager.isNewSpacing()?r(300,800,"gallerySize")/5:5,"imageMargin"),galleryMargin:_spacing.spacingVersionManager.isNewSpacing()?0:r(0,5,"imageMargin"),floatingImages:0,chooseBestGroup:n("chooseBestGroup"),smartCrop:n("smartCrop"),showArrows:!1,cubeType:"fill",hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlideshow:!1,isSlider:!1,isColumns:!1,cropOnlyFill:!1,fixedColumns:0,enableInfiniteScroll:1};return o.oneRow&&(o.isVertical=!1),o.galleryType=o.isVertical?"Columns":"Strips",o.groupSize=parseInt(_lodash2.default.last(o.groupTypes)),o.groupTypes=o.groupTypes.join(","),o.minItemSize=o.gallerySize/o.groupSize/2,_utils2.default.isVerbose()&&console.log("Created magic layout style",e,o),o}},{key:"getStyleByGalleryType",value:function(e,t){var i={collage_ver:{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*t+500),fixedColumns:0},collage_hor:{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*t+500),fixedColumns:0},grid:{cubeImages:!0,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:Math.round(8.5*t+150),fixedColumns:0,placeGroupsLtr:!0,isGrid:!0},masonry_ver:{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:Math.round(8*t+200),fixedColumns:0},masonry_hor:{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:Math.round(5*t+200),fixedColumns:0},one_col:{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:this.getGalleryWidth(),fixedColumns:1},one_row:{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:this.getGalleryHeight(),fixedColumns:0},slideshow:{showArrows:!0,cubeImages:!0,cubeRatio:this.getGalleryRatio(),isVertical:!0,gallerySize:this.getGalleryWidth(),galleryType:"Columns",groupSize:1,groupTypes:"1",fixedColumns:1}},r=void 0;switch(e){case"-1":r={gallerySize:t};break;case"0":r=i.collage_ver;break;default:case"1":r=i.collage_hor;break;case"2":r=i.grid;break;case"3":r=i.masonry_ver;break;case"4":r=i.masonry_hor;break;case"5":r=i.one_col;break;case"6":r=i.one_row;break;case"7":r=i.slideshow}return r}},{key:"getStyleByLayout",value:function(e,t){var i=this,r=e.gallerySize,n=e.magicLayoutSeed,o=t||e.galleryLayout,a={collage:{showArrows:!1,cubeImages:!1,groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*r+500),fixedColumns:0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!1,isMasonry:!1,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1},masonry:{showArrows:!1,cubeImages:!1,groupSize:1,groupTypes:"1",gallerySize:r,fixedColumns:0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!1,isMasonry:!0,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1,oneRow:!1},grid:{showArrows:!1,cubeImages:!0,smartCrop:!1,imageResize:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",fixedColumns:void 0,gallerySize:Math.round(8.5*r+150),hasThumbnails:!1,enableScroll:!0,cropOnlyFill:!1,isSlider:!1,isColumns:!1,isGrid:!0,placeGroupsLtr:!0,isMasonry:!1,isSlideshow:!1,minItemSize:50},thumbnails:{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:function(){var e=i.getGalleryDimensions();return e.galleryWidth/e.galleryHeight},isVertical:!1,galleryType:"Strips",groupSize:1,gallerySize:this.getGalleryWidth(),groupTypes:"1",oneRow:!0,hasThumbnails:!0,enableScroll:!1,isGrid:!1,isSlider:!1,isMasonry:!1,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0},slider:{showArrows:!0,cubeImages:!0,smartCrop:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:this.getGalleryHeight(),oneRow:!0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!0,isColumns:!1,isMasonry:!1,isSlideshow:!1,cropOnlyFill:!0},slideshow:{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeRatio:function(){var e=i.getGalleryDimensions();return e.galleryWidth/e.galleryHeight},cubeType:"fill",isVertical:!1,gallerySize:550,galleryType:"Strips",groupSize:1,groupTypes:"1",fixedColumns:1,oneRow:!0,hasThumbnails:!1,enableScroll:!1,isGrid:!1,isColumns:!1,isMasonry:!1,isSlider:!1,isSlideshow:!0,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0},panorama:{showArrows:!1,cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:this.getGalleryWidth(),oneRow:!1,fixedColumns:1,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isColumns:!1,isMasonry:!1,isSlider:!1,isSlideshow:!1,cropOnlyFill:!1},column:{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:.35,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:this.getGalleryHeight(),fixedColumns:0,hasThumbnails:!1,oneRow:!0,enableScroll:!0,isGrid:!1,isColumns:!0,isMasonry:!1,isSlider:!1,isSlideshow:!1,cropOnlyFill:!1},fullsize:{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:function(){var e=i.getGalleryDimensions();return e.galleryWidth/e.galleryHeight},isVertical:!1,galleryType:"Strips",groupSize:1,gallerySize:this.getGalleryWidth(),groupTypes:"1",oneRow:!0,hasThumbnails:!1,enableScroll:!1,isGrid:!1,isSlider:!1,isColumns:!1,isMasonry:!1,isSlideshow:!1,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0},empty:{gallerySize:Math.round(9*r+100)},magic:this.getStyleBySeed(n)},s=["empty","collage","masonry","grid","thumbnails","slider","slideshow","panorama","column","magic","fullsize"],l=s[o+1];_lodash2.default.isUndefined(l)&&(_utils2.default.isStoreGallery()?(o=2,l="grid"):(o=0,l="collage"));var u={};return _utils2.default.isStoreGallery()&&_utils2.default.isMobile()&&(o=2,l="grid",u.forceMobileCustomButton=!0),_utils2.default.isVerbose()&&console.log("chosen layout is",l),_lodash2.default.merge(a[l],u,{galleryLayout:o})}},{key:"getStyleParamsState",value:function getStyleParamsState(){function canSet(e,t){return _lodash2.default.isUndefined(t)?_lodash2.default.isUndefined(stateStyles[e])&&!_lodash2.default.isUndefined(wixStyles[e]):_lodash2.default.isUndefined(stateStyles[t])&&!_lodash2.default.isUndefined(wixStyles[e])}var wixStyles={},stateStyles=(0,_assign2.default)({},this.props.styles||{},this.props.behaviour||{},this.newProps.styles||{},this.newProps.behaviour||{},window.styles||{},window.behaviour||{});if(_utils2.default.isSite()&&_lodash2.default.get(this,"state.styleParams.gotStyleParams")&&_lodash2.default.isEmpty(stateStyles))return _utils2.default.isVerbose()&&console.log("already got style params, not fetching again",this.state.styleParams),this.state.styleParams;var gotStyleParams=!(_utils2.default.isInWix()&&!_utils2.default.isDemo());if(wixStyles={},_utils2.default.isInWix()&&_WixSdkWrapper2.default&&_WixSdkWrapper2.default.Styles&&_WixSdkWrapper2.default.Styles.getStyleParams()){var sp=_WixSdkWrapper2.default.Styles.getStyleParams();_lodash2.default.merge(wixStyles,sp.booleans,sp.numbers,sp.colors,sp.fonts),gotStyleParams=!0}if(_lodash2.default.isObject(window.galleryStyle)&&_lodash2.default.merge(wixStyles,window.galleryStyle),_utils2.default.parseGetParam("galleryStyle")){var galleryStyle=_utils2.default.parseGetParam("galleryStyle");/^[\],:{}\s]*$/.test(galleryStyle.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&_lodash2.default.merge(wixStyles,JSON.parse(decodeURIComponent(galleryStyle)))}this.props.styleParams&&_lodash2.default.merge(wixStyles,this.props.styleParams),wixStyles.gallerySize=stateStyles.gallerySize||wixStyles.gallerySize||30;var emptyLayout={galleryType:void 0,groupSize:void 0,showArrows:void 0,cubeImages:void 0,cubeType:void 0,cubeRatio:void 0,isVertical:void 0,gallerySize:void 0,collageAmount:void 0,collageDensity:void 0,groupTypes:void 0,oneRow:void 0,borderRadius:void 0,boxShadow:void 0,imageMargin:void 0,galleryMargin:void 0,floatingImages:void 0,chooseBestGroup:void 0,smartCrop:void 0,hasThumbnails:void 0,enableScroll:void 0,isGrid:void 0,isSlider:void 0,isColumns:void 0,isSlideshow:void 0,cropOnlyFill:void 0,fixedColumns:void 0,enableInfiniteScroll:void 0};"1"===String(wixStyles.mobilePanorama)&&_utils2.default.isMobile()&&(stateStyles.galleryLayout=6,stateStyles.rotatingGroupTypes="1",stateStyles.isVertical=!0,stateStyles.numberOfImagesPerRow=1,stateStyles.oneRow=!1);var galleryLayoutV1=_lodash2.default.isUndefined(stateStyles.galleryType)?wixStyles.galleryType:stateStyles.galleryType,galleryLayoutV2=_lodash2.default.isUndefined(stateStyles.galleryLayout)?wixStyles.galleryLayout:stateStyles.galleryLayout;if(!_lodash2.default.isUndefined(galleryLayoutV1)&&_lodash2.default.isUndefined(galleryLayoutV2)){_utils2.default.isVerbose()&&console.log("Using galleryType for defaults",wixStyles),stateStyles=(0,_assign2.default)(stateStyles,this.getStyleByGalleryType(String(galleryLayoutV1),wixStyles.gallerySize)),stateStyles.layoutsVersion=1;var selectedLayoutVars=["galleryType","galleryThumbnailsAlignment","magicLayoutSeed","imageResize","isVertical","scrollDirection","enableInfiniteScroll"];stateStyles.selectedLayout=selectedLayoutVars.map(function(e){return String(wixStyles[e])}).join("|")}else{_utils2.default.isVerbose()&&console.log("Using galleryLayout for defaults",wixStyles),stateStyles=(0,_assign2.default)(emptyLayout,stateStyles,this.getStyleByLayout(wixStyles,galleryLayoutV2));var _selectedLayoutVars=["galleryLayout","galleryThumbnailsAlignment","magicLayoutSeed","imageResize","isVertical","scrollDirection","enableInfiniteScroll"];stateStyles.selectedLayout=_selectedLayoutVars.map(function(e){return String(wixStyles[e])}).join("|"),stateStyles.layoutsVersion=2,stateStyles.selectedLayoutV2=galleryLayoutV2,_utils2.default.isVerbose()&&console.log("new selected layout",stateStyles.selectedLayout)}if(canSet("fullscreen")?stateStyles.fullscreen="0"===wixStyles.fullscreen.toString():stateStyles.fullscreen=!0,canSet("allowSocial")&&(stateStyles.allowSocial=wixStyles.allowSocial),canSet("allowTitle")&&(stateStyles.allowTitle=!!_utils2.default.isOnBoarding()||wixStyles.allowTitle),canSet("isInAdi")&&(stateStyles.isInAdi=wixStyles.isInAdi),canSet("useCustomButton")&&(stateStyles.useCustomButton=wixStyles.useCustomButton),canSet("allowDescription")&&(stateStyles.allowDescription=wixStyles.allowDescription),canSet("allowDownload")&&(stateStyles.allowDownload=wixStyles.allowDownload),canSet("loveButton")&&(stateStyles.loveButton=wixStyles.loveButton),canSet("loveCounter")&&(stateStyles.loveCounter="0"===String(wixStyles.loveCounter)),canSet("enableInfiniteScroll")&&(stateStyles.enableInfiniteScroll="1"===String(wixStyles.enableInfiniteScroll)),canSet("isVertical")&&(stateStyles.isVertical="1"===String(wixStyles.isVertical)),canSet("imageOrientation","isVertical")&&(stateStyles.isVertical="1"===String(wixStyles.imageOrientation)),canSet("collageAmount")&&(stateStyles.collageAmount=Number(wixStyles.collageAmount)/10),canSet("collageDensity")&&(stateStyles.collageDensity=Number(wixStyles.collageDensity)/100),canSet("minItemSize")&&(stateStyles.minItemSize=wixStyles.minItemSize),canSet("gallerySize")&&(stateStyles.gallerySize=wixStyles.gallerySize),canSet("gallerySizePx")&&(stateStyles.gallerySizePx=wixStyles.gallerySizePx),canSet("gallerySizeRatio")&&(stateStyles.gallerySizeRatio=wixStyles.gallerySizeRatio),canSet("gallerySizeType")&&(stateStyles.gallerySizeType=["smart","px","ratio"][Number(wixStyles.gallerySizeType)]),canSet("gridStyle")&&(stateStyles.gridStyle=wixStyles.gridStyle),canSet("groupSize")&&(stateStyles.groupSize=Number(wixStyles.groupSize)),canSet("chooseBestGroup")&&(stateStyles.chooseBestGroup="1"===String(wixStyles.chooseBestGroup)),canSet("groupTypes")&&(stateStyles.groupTypes=String(wixStyles.groupTypes)),canSet("rotatingGroupTypes")&&(stateStyles.rotatingGroupTypes=String(wixStyles.rotatingGroupTypes)),canSet("rotatingCropRatios")&&(stateStyles.rotatingCropRatios=String(wixStyles.rotatingCropRatios)),canSet("borderRadius")&&(stateStyles.borderRadius=Number(wixStyles.borderRadius)),canSet("boxShadow")&&(stateStyles.boxShadow=Number(wixStyles.boxShadow)/100),canSet("imageMargin")&&(stateStyles.imageMargin=Number(wixStyles.imageMargin)),stateStyles.imageMargin>0&&(_utils2.default.isMobile()&&(stateStyles.imageMargin=Math.min(stateStyles.imageMargin,50)),stateStyles.imageMargin/=2),canSet("galleryMargin")&&(stateStyles.galleryMargin=Number(wixStyles.galleryMargin)),canSet("floatingImages")&&(stateStyles.floatingImages=Number(wixStyles.floatingImages)/100),canSet("thumbnailSpacings")&&(stateStyles.thumbnailSpacings=Number(wixStyles.thumbnailSpacings)/2),canSet("cubeImages")&&(stateStyles.cubeImages="1"===String(wixStyles.cubeImages)),canSet("smartCrop")&&(stateStyles.smartCrop="1"===String(wixStyles.smartCrop)),canSet("cubeRatio")&&(stateStyles.cubeRatio=Number(eval(wixStyles.cubeRatio))),canSet("imageResize","cubeType")&&(stateStyles.cubeType="1"===String(wixStyles.imageResize)?"fit":"fill","fit"===stateStyles.cubeType&&!0===stateStyles.cropOnlyFill&&(stateStyles.cubeImages=!1)),stateStyles.isSlider&&canSet("gallerySliderImageRatio","cubeRatio")?stateStyles.cubeRatio=Number(eval(["16/9","4/3","1","3/4","9/16"][Number(wixStyles.gallerySliderImageRatio)])):stateStyles.isSlider&&_lodash2.default.isUndefined(stateStyles.cubeRatio)?stateStyles.cubeRatio=Number(eval(["16/9","4/3","1","3/4","9/16"][Number(this.defaultStateStyles.gallerySliderImageRatio)])):stateStyles.isGrid&&canSet("galleryImageRatio","cubeRatio")&&(stateStyles.cubeRatio=Number(eval(["16/9","4/3","1","3/4","9/16"][Number(wixStyles.galleryImageRatio)]))),canSet("fixedColumns")&&(stateStyles.fixedColumns=Number(wixStyles.fixedColumns)),canSet("groupsPerStrip")&&(stateStyles.groupsPerStrip=Number(wixStyles.groupsPerStrip)),canSet("scrollDirection","oneRow")&&(stateStyles.oneRow="1"===String(wixStyles.scrollDirection),stateStyles.oneRow&&(stateStyles.isVertical=!1)),(stateStyles.isGrid&&!stateStyles.oneRow||_layouts.layoutsVersionManager.allowFixedColumnsInMasonry()&&stateStyles.isMasonry&&stateStyles.isVertical)&&(stateStyles.fixedColumns="1"===String(stateStyles.gridStyle)?Number(wixStyles.numberOfImagesPerRow||stateStyles.numberOfImagesPerRow||this.defaultStateStyles.numberOfImagesPerRow):0,stateStyles.groupTypes="1",stateStyles.groupSize=1,stateStyles.collageAmount=0,stateStyles.collageDensity=0),canSet("numberOfImagesPerCol")&&stateStyles.isGrid&&stateStyles.oneRow)switch(stateStyles.numberOfImagesPerCol=Number(wixStyles.numberOfImagesPerCol),stateStyles.fixedColumns=0,stateStyles.numberOfImagesPerCol){case 1:default:stateStyles.groupTypes="1",stateStyles.groupSize=1,stateStyles.collageAmount=0,stateStyles.collageDensity=0;break;case 2:stateStyles.groupTypes="2v",stateStyles.groupSize=2,stateStyles.collageAmount=1,stateStyles.collageDensity=1;break;case 3:stateStyles.groupTypes="3v",stateStyles.groupSize=3,stateStyles.collageAmount=1,stateStyles.collageDensity=1}if(canSet("galleryThumbnailsAlignment")&&(stateStyles.galleryThumbnailsAlignment=["bottom","left","top","right"][wixStyles.galleryThumbnailsAlignment]),canSet("allowMultishare")&&(stateStyles.allowMultishare=!1),canSet("itemOpacity")&&(stateStyles.itemOpacity=wixStyles.itemOpacity),canSet("galleryLayout")&&(stateStyles.galleryLayout=wixStyles.galleryLayout),canSet("titlePlacement")){var selectedPlacement=void 0;if("1"===String(wixStyles.titlePlacement)?selectedPlacement=_consts2.default.placements.SHOW_ON_HOVER:"0"===String(wixStyles.titlePlacement)&&(selectedPlacement=_consts2.default.placements.SHOW_ALWAYS),!stateStyles.isVertical||stateStyles.groupSize>1||!0===stateStyles.oneRow)stateStyles.titlePlacement=_consts2.default.placements.SHOW_ON_HOVER;else{var defaultValue=_utils2.default.isStoreGallery()?_consts2.default.placements.SHOW_ALWAYS:_consts2.default.placements.SHOW_ON_HOVER;stateStyles.titlePlacement=selectedPlacement||defaultValue}}if(canSet("itemFont")&&(stateStyles.itemFont=wixStyles.itemFont),canSet("itemFontSlideshow")&&(stateStyles.itemFontSlideshow=wixStyles.itemFontSlideshow),canSet("galleryHorizontalAlign")){var horizontalAlign=void 0,textAlign=void 0;switch(wixStyles.galleryHorizontalAlign){case 0:horizontalAlign="flex-start",textAlign="left";break;case 1:default:horizontalAlign="center",textAlign="center";break;case 2:horizontalAlign="flex-end",textAlign="right"}stateStyles.galleryHorizontalAlign=horizontalAlign,stateStyles.galleryTextAlign=textAlign}if(canSet("galleryVerticalAlign")){var verticalAlign=void 0;switch(wixStyles.galleryVerticalAlign){case 0:default:verticalAlign="flex-start";break;case 1:verticalAlign="center";break;case 2:verticalAlign="flex-end"}stateStyles.galleryVerticalAlign=verticalAlign}if(canSet("itemClick"))switch(wixStyles.itemClick){case 0:default:stateStyles.itemClick="expand";break;case 1:stateStyles.itemClick="link";break;case 2:stateStyles.itemClick="nothing"}if(canSet("loadMoreButtonText")&&(stateStyles.loadMoreButtonText=String(wixStyles.loadMoreButtonText)),canSet("customButtonText")&&(stateStyles.customButtonText=String(wixStyles.customButtonText)),stateStyles.sharpParams={quality:90,usm:{}},canSet("imageQuality")&&(stateStyles.sharpParams.quality=wixStyles.imageQuality),canSet("usmToggle")&&!0===wixStyles.usmToggle&&(canSet("usm_a")&&(stateStyles.sharpParams.usm.usm_a=(wixStyles.usm_a||0)/100),canSet("usm_r")&&(stateStyles.sharpParams.usm.usm_r=wixStyles.usm_r),canSet("usm_t")&&(stateStyles.sharpParams.usm.usm_t=(wixStyles.usm_t||0)/255)),canSet("videoPlay"))switch(wixStyles.videoPlay){case 0:default:stateStyles.videoPlay="hover";break;case 1:stateStyles.videoPlay="auto";break;case 2:stateStyles.videoPlay="onClick"}canSet("videoSpeed")&&(stateStyles.videoSpeed=wixStyles.videoSpeed),canSet("videoLoop")&&(stateStyles.videoLoop=wixStyles.videoLoop),canSet("mobilePanorama")&&(stateStyles.mobilePanorama="1"===String(wixStyles.mobilePanorama)),canSet("placeGroupsLtr")&&(stateStyles.placeGroupsLtr="1"===String(wixStyles.placeGroupsLtr)),canSet("isAutoSlideshow")&&(stateStyles.isAutoSlideshow="1"===String(wixStyles.isAutoSlideshow)),canSet("autoSlideshowInterval")&&(stateStyles.autoSlideshowInterval=Number(wixStyles.autoSlideshowInterval)||0),"1"===String(stateStyles.selectedLayoutV2)&&(stateStyles.isVertical?stateStyles.gallerySize=Math.round(8*stateStyles.gallerySize+200):stateStyles.gallerySize=Math.round(5*stateStyles.gallerySize+200)),stateStyles.forceMobileCustomButton&&(stateStyles.gallerySize=Math.round(405),stateStyles.titlePlacement=_consts2.default.placements.SHOW_ALWAYS,stateStyles.galleryLayout=2,stateStyles.fixedColumns=1,stateStyles.numberOfImagesPerRow=1),stateStyles.fixedColumns>0&&_utils2.default.isMobile()&&(stateStyles.fixedColumns=1),"px"===stateStyles.gallerySizeType&&stateStyles.gallerySizePx>0?stateStyles.gallerySize=stateStyles.gallerySizePx:"ratio"===stateStyles.gallerySizeType&&stateStyles.gallerySizeRatio>0&&(stateStyles.gallerySize=this.getGalleryWidth()*(stateStyles.gallerySizeRatio/100)),stateStyles.gotStyleParams=gotStyleParams,_utils2.default.isVerbose()&&console.log("Got styles from Wix",stateStyles);var finalStyleParams=_lodash2.default.merge({},this.defaultStateStyles,stateStyles);return finalStyleParams.bottomInfoHeight=this.getBottomInfoHeight(finalStyleParams),finalStyleParams}},{key:"componentWillReceiveProps",value:function(e){var t=this;_utils2.default.isVerbose()&&console.log("Received new props",e);try{if(this.newProps=e,e.items)if(this.getHashtagFilter())this.initHashtagFilter(function(){_utils2.default.setStateAndLog(t,"Receiving Props",{items:t.sortItemsByHashtag(e.items),totalItemsCount:e.totalItemsCount},function(){t.reRender(t.renderTriggers.ALL)})});else{var i=e.items.length>this.state.items.length||_lodash2.default.includes(["manuallySetImages","albumSetFromBuilder"],e.galleryDataSrc)||_utils2.default.isPlayground();i?(_utils2.default.isVerbose()&&console.log("Got new props with new items",e,this.state.items),this.items=e.items,_utils2.default.setStateAndLog(this,"Receiving Props",{items:this.itemsIds(e.items),totalItemsCount:e.totalItemsCount},function(){t.reRender(t.renderTriggers.ALL)})):e.items.length<this.state.items.length&&_utils2.default.isDev()&&console.warn("Got new props with fewer items",e,this.state.items)}if(e.styles&&!_lodash2.default.isEqual(this.props.styles,e.styles)&&this.reRender(this.renderTriggers.STYLES),e.offsetTop!==this.props.offsetTop&&this.reRender(this.renderTriggers.RESIZE),_lodash2.default.isUndefined(this.galleryWrapper)||e.domId!==this.props.domId)try{this.galleryWrapper=document.getElementById("pro-gallery-"+e.domId),this.boundingRect=this.galleryWrapper.getBoundingClientRect()}catch(e){this.galleryWrapper=null,this.boundingRect=null}}catch(e){console.error("Failed settings new props",e)}}},{key:"componentDidMount",value:function(){this.initEventListeners(),this.initPersistentEventListeners(),this.initCustomEvents(),this.initNavigationEventListeners(),this.initHashtagFilter(),this.wixFocused=!0,this.tabFocused=!0,_utils2.default.isInWix()&&!_utils2.default.isTest()||this.reRender(this.renderTriggers.ALL)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"itemsIds",value:function(e){return e.map(function(e){return e.itemId})}},{key:"allItems",value:function(){return this.items}},{key:"currentItems",value:function(){return this.state?this.allItems().slice(0,this.state.renderedItemsCount):this.allItems().slice(0,50)}},{key:"layoutItems",value:function(){return this.galleryStructure.layoutItems}},{key:"galleryItems",value:function(){return this.galleryStructure.galleryItems}},{key:"findVisibleItems",value:function(){var e=this.getLatestState("container",{}),t=this.getLatestState("styleParams",{}),i=this.getLatestState("container.galleryWidth",980);if(this.getHashtagFilter())return this.state.totalItemsCount;if(!this.galleryStructure.ready)return this.state.renderedItemsCount;var r=_lodash2.default.last(this.galleryStructure.groups),n=this.galleryStructure.height*_utils2.default.getViewportScaleRatio(),o=this.getLatestState("gotScrollEvent")&&n-e.galleryHeight<=2*(10+t.imageMargin+t.galleryMargin)&&(!r||r.rendered),a=r?_lodash2.default.last(r.items).idx+1:0;if(o){_utils2.default.shouldLog("infinite_scroll")&&console.log("INFINITE SCROLL - Adding new items",n,a,r);var s=n>0&&a>0?n/a:t.gallerySize/t.groupSize/(i/t.gallerySize),l=Math.ceil(_utils2.default.getScreenHeight()/s),u=10*l;u=_utils2.default.isMobile()||u<100?100:500,a+=u}else _utils2.default.shouldLog("infinite_scroll")&&console.log("INFINITE SCROLL - NOT adding new items",n,a,r);return a}},{key:"concatNewItems",value:function(e){var t=this.currentItems();return!e||!e.length>0?t:t=t.concat(e)}},{key:"getRequiredItemsFromDbIfNeeded",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_lodash2.default.noop;e=Math.min(this.state.totalItemsCount,e);var r=this.state.renderedItemsCount||0,n=this.allItems().length||0,o={items:[],totalItemsCount:this.state.totalItemsCount},a="\n(current items count: "+r+" | new items count: "+e+" | items in memory: "+n+" | total items: "+this.state.totalItemsCount+" | rendered items: "+this.state.renderedItemsCount+")";if(!0===this.alreadyGettingItems)return i(o),!1;if(Math.min(n,e)>r)_utils2.default.shouldLog("infinite_scroll")&&console.log("Infinite Scroll - Fetching items from MEMORY "+a),this.alreadyGettingItems=!1,i({items:this.allItems().slice(r,e),totalItemsCount:this.state.totalItemsCount});else if(e>r){_utils2.default.shouldLog("infinite_scroll")&&(console.log("Infinite Scroll - Fetching items from DB "+a),console.time("Fetching items from DB")),this.alreadyGettingItems=!0;var s="";_utils2.default.isStoreGallery()&&(s="&isStore=true"),(0,_axios2.default)({url:window.infiniteScrollUrl+"from/"+r+"/to/"+(e+1)+"?instance="+window.instance+s,method:"GET",withCredentials:!0,xsrfCookieName:null}).then(function(e){return e.data}).then(function(e){e?(_utils2.default.shouldLog("infinite_scroll")&&(console.timeEnd("Infinite Scroll - Fetching items from DB"),console.log("Infinite Scroll - Fetched items from DB",e)),t.alreadyGettingItems=!1,i(e||o)):(t.alreadyGettingItems=!1,i(o))}).catch(function(e){t.alreadyGettingItems=!1,console.error("Cannot fetch items from server",e)})}else _utils2.default.shouldLog("infinite_scroll")&&console.log("Infinite Scroll - Not fetching items "+a),i(o)}},{key:"scrollToItemIfNeeded",value:function(){var e=this;this.shouldScrollTo>=0&&setTimeout(function(){e.scrollToItem(e.shouldScrollTo)&&(e.shouldScrollTo=-1)},10)}},{key:"scrollToItem",value:function(e,t,i){var r=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=void 0,a=void 0;if(this.state.styleParams.oneRow){var s=this.galleryWrapper||document;a=s.querySelector("#gallery-horizontal-scroll")}if(!0===t)o=this.state.styleParams.oneRow?a.scrollLeft+e*this.state.container.galleryWidth/2:this.state.scroll.top+e*this.state.container.galleryHeight/2;else{_utils2.default.isVerbose()&&console.log("Scrolling to items #"+e);var l=this.galleryStructure.items,u=_lodash2.default.find(l,function(t){return t.idx===e});if(o=this.state.styleParams.oneRow?_lodash2.default.get(u,"offset.left"):_lodash2.default.get(u,"offset.top"),_utils2.default.isVerbose()&&console.log("Scrolling to position "+o,u),!(o>=0))return console.warn("Position not found, not scrolling"),!1;if(this.state.styleParams.oneRow){i&&_lodash2.default.isFunction(_lodash2.default.get(window,"galleryWixCodeApi.onItemChanged"))&&window.galleryWixCodeApi.onItemChanged(u);var c=(this.state.container.galleryWidth-u.width)/2;c>0&&(o-=c),o=Math.max(0,o)/_utils2.default.getViewportScaleRatio(),_utils2.default.isVerbose()&&console.log("Scrolling to new position "+o,this)}}return _utils2.default.setStateAndLog(this,"Scroll To Item",{scrollTop:o},function(){if(r.state.styleParams.oneRow)_utils2.default.isVerbose()&&console.log("Scrolling horiontally",o,a),_utils2.default.scrollTo(a,Math.round(o*_utils2.default.getViewportScaleRatio()),n,!0);else if(_utils2.default.isInWix()){if(_utils2.default.isVerbose()&&console.log("Scrolling vertically (in wix)"),"editor"!==_utils2.default.getViewModeFromCache()){var e=Math.round(r.scrollBase+o*_utils2.default.getViewportScaleRatio()),t=!0;if(t){var i=!1,s=10,l=function t(r){r.scrollTop>0&&r.scrollTop!==e&&(i=!0,_WixSdkWrapper2.default.removeEventListener(_WixSdkWrapper2.default.Events.SCROLL,t))};_WixSdkWrapper2.default.addEventListener(_WixSdkWrapper2.default.Events.SCROLL,l);!function t(){!i&&s>0&&(_WixSdkWrapper2.default.scrollTo(0,e),0===s&&(i=!0),s--,setTimeout(t,500))}(),t=!1}}}else _utils2.default.isVerbose()&&console.log("Scrolling vertically (not in wix)"),window.scrollTop=Math.round(o*_utils2.default.getViewportScaleRatio())}),!0}},{key:"resetItems",value:function(e){for(var t,i=0;t=e[i];i++)t.width=t.maxWidth,t.height=t.maxHeight;return e}},{key:"getLatestState",value:function(e,t){try{return _lodash2.default.isUndefined(this.newState)||_lodash2.default.isUndefined(_lodash2.default.get(this.newState,e))?this.state?_lodash2.default.get(this.state,e):_lodash2.default.isUndefined(t)?void 0:t:_lodash2.default.get(this.newState,e)}catch(t){return console.warn("Cannot find key in newState",e,t),null}}},{key:"getDimensionFix",value:function(){return Number(this.getLatestState("styleParams.imageMargin",0))-Number(this.getLatestState("styleParams.galleryMargin",0))}},{key:"getGalleryWidth",value:function(){var e=this.protectGalleryWidth(_utils2.default.isMobile()?document.body.clientWidth:window.innerWidth),t=_lodash2.default.get(this.props,"layout.width")||_lodash2.default.get(this.props,"container.width");return Math.floor((t>0?t:e)+2*this.getDimensionFix())}},{key:"getGalleryHeight",value:function(){var e=_lodash2.default.get(this,"state.styleParams.oneRow")?this.props.offsetTop||0:0,t=this.protectGalleryHeight(window.innerHeight,e),i=_lodash2.default.get(this.props,"layout.height")||_lodash2.default.get(this.props,"container.height");return Math.floor((i>0?i:t)+this.getDimensionFix())}},{key:"getGalleryRatio",value:function(){return this.getGalleryWidth()/this.getGalleryHeight()}},{key:"getVisibleBounds",value:function(e,t){this.debugScroll&&console.time("SCROLL - getVisibleBounds time"),void 0===e&&(e=0),void 0===t&&(t=1);var i=_utils2.default.getScreenHeight()/t,r=_utils2.default.parseGetParam("renderedPadding")||10*i,n=_utils2.default.parseGetParam("displayPadding")||1.5*i,o=_utils2.default.parseGetParam("onscreenPadding")||0;this.state.styleParams.oneRow&&(i=_utils2.default.getScreenWidth()/t,r=_utils2.default.parseGetParam("renderedPadding")||10*i,n=_utils2.default.parseGetParam("displayPadding")||5*i,o=_utils2.default.parseGetParam("onscreenPadding")||0);var a=e,s=a+i;this.isInfiniteScroll()||this.state.styleParams.oneRow||(a=0,s=this.getGalleryHeight()/t);var l=a-o,u=s+o,c=a-n,d=s+n,h=a-r,f=s+r,p={docViewTop:a,docViewBottom:s,onscreenTop:l,onscreenBottom:u,visibleTop:c,visibleBottom:d,renderedTop:h,renderedBottom:f};return this.debugScroll&&console.timeEnd("SCROLL - getVisibleBounds time"),{bounds:p}}},{key:"getGalleryScroll",value:function(e){if(!this.state.styleParams.oneRow){if(e&&_lodash2.default.isNumber(e.customScrollTop))return this.currentScrollPosition=e.customScrollTop,this.currentScrollPosition;if(_utils2.default.isInWix()||_utils2.default.isWixIframe()){if(e&&_lodash2.default.isNumber(e.scrollTop)&&_lodash2.default.isNumber(e.y)){var t=e.y||0;this.boundingRect&&(t+=this.boundingRect.y);var i=e.scrollTop;this.pageScale=e.scale||1,this.scrollBase!==t&&_lodash2.default.isNumber(t)&&!_lodash2.default.isNaN(t)&&(_utils2.default.isDev()&&console.log("gallery "+this.compId+" scroll base has changed from "+this.scrollBase+" to "+t),this.scrollBase=t*this.pageScale),this.currentScrollPosition=(i-this.scrollBase)/_utils2.default.getViewportScaleRatio()*this.pageScale}return this.currentScrollPosition}return this.currentScrollPosition=window.scrollTop,this.currentScrollPosition}var r=this.galleryWrapper||document,n=r.querySelector("#gallery-horizontal-scroll");this.currentScrollPosition=n&&n.scrollLeft||0}},{key:"getGalleryDimensions",value:function(){var e={galleryWidth:this.getGalleryWidth(),galleryHeight:this.getGalleryHeight()},t=this.thumbnailSize+this.getLatestState("styleParams.galleryMargin",0)+3*this.getLatestState("styleParams.thumbnailSpacings",0);if(this.getLatestState("styleParams.hasThumbnails",!1))switch(this.getLatestState("styleParams.galleryThumbnailsAlignment","")){case"top":case"bottom":e.galleryHeight-=t;break;case"left":case"right":e.galleryWidth-=t}else this.getLatestState("styleParams.isSlideshow",!1)&&(e.galleryHeight-=this.slideshowInfoSize);return e}},{key:"protectGalleryHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Math.floor(e-t);return _utils2.default.isMobile()&&!_utils2.default.isiOS()&&(i=Math.floor(i/_utils2.default.getViewportScaleRatio())),i}},{key:"protectGalleryWidth",value:function(e){var t=void 0;return _utils2.default.isSite()&&(t=Number(_utils2.default.parseGetParam("width"))),t=_utils2.default.browserIs("chromeIos")?t||document.body.clientWidth:document.body.clientWidth,_utils2.default.isMobile()&&(t=Math.floor(t/_utils2.default.getViewportScaleRatio())),Math.min(Math.floor(e),t)}},{key:"setWixHeight",value:function(e,t,i){var r=this,n=this.props.offsetTop||0,o=this.lastOffsetTop!==n;if(e<=0)return void console.warn("Wix setHeight called with height less than 0");if(this.state.styleParams.oneRow&&this.horizontalLayoutHeight)return void _WixSdkWrapper2.default.setHeight(this.horizontalLayoutHeight+n);this.lastHeight=Math.round(t+n),this.newHeight=Math.round(e+n);var a=function(e,t){var i=Math.round(e*_utils2.default.getViewportScaleRatio()),n=!0,a=_lodash2.default.get(r,"state.styleParams.oneRow"),s=!r.isInfiniteScroll();!o&&(a||s)&&(n=!1),r.state.styleParams.hasThumbnails&&["top","bottom"].indexOf(r.state.styleParams.galleryThumbnailsAlignment)>=0&&(i+=r.thumbnailSize);var l=function(){var e=.6*window.screen.height,t=r.state.container.galleryWidth/r.galleryStructure.firstGroup.ratio*.8,i=9*r.state.container.galleryWidth/16+r.slideshowInfoSize;return r.state.styleParams.isSlideshow||r.state.styleParams.hasThumbnails?i:r.state.styleParams.oneRow?Math.min(e,t):!r.state.styleParams.enableInfiniteScroll&&e}();if((_utils2.default.isEditor()||_utils2.default.isInAlbumsBuilder())&&l)if(t===r.renderTriggers.LAYOUT)!_lodash2.default.get(r,"state.styleParams.oneRow")&&_lodash2.default.get(r,"state.styleParams.enableInfiniteScroll")||(n=!1,i>l?(i=l,n=!0):r.state.styleParams.isSlideshow&&(i=l,n=!0));else if(r.state.styleParams.isInAdi){var u=_utils2.default.isMobile()?700:2e3,c=_utils2.default.isMobile()?300:600;r.state.styleParams.oneRow||r.state.styleParams.enableInfiniteScroll?r.state.styleParams.oneRow&&(i=c,n=!0):(i=Math.min(i,u),n=!0)}return n&&i}(this.newHeight,i);a&&(_utils2.default.isVerbose()&&console.log("updating height",a),Math.abs(t-a)<6||0===a?_utils2.default.isVerbose()&&console.log("Skipping Wix height change: was "+this.lastHeight+", now it's "+a):(_utils2.default.setStateAndLog(this,"setWixHeight",_lodash2.default.merge(this.state.container,{galleryHeight:a})),_utils2.default.isInWix()&&(_utils2.default.isVerbose()&&console.warn("Changing wix height from: "+t+"  to: "+a+" inner gallery height is: "+this.newHeight),_WixSdkWrapper2.default.setHeight(a),this.lastOffsetTop=n,this.heightWasSetInternally=!0))),this.scrollToItemIfNeeded()}},{key:"getBottomInfoHeight",value:function(e){var t=e.titlePlacement,i=e.itemFontSlideshow,r=e.allowTitle,n=e.galleryLayout,o=e.useCustomButton;if("SHOW_ALWAYS"!==t)return 0;var a=16,s=o?33:0,l=2===n,u=0,c=l&&!_utils2.default.isMobile();return r||c?u=i?i.size:22:a=0,u+30+a+s}},{key:"isInfiniteScroll",value:function(){var e=_lodash2.default.get(this,"state.styleParams.enableInfiniteScroll"),t=_lodash2.default.get(this,"state.scroll.isInfinite");return!!_lodash2.default.get(this,"state.styleParams.gotStyleParams")&&(e||t)}},{key:"onResizeEvent",value:function(e){(!_utils2.default.isiPhone()||this.currentWindowWidth!==window.innerWidth||Math.abs(this.currentWindowHeight-window.innerHeight)>50)&&(this.currentWindowWidth=window.innerWidth,this.currentWindowHeight=window.innerHeight,this.reRenderForResize(e))}},{key:"toggleInfiniteScroll",value:function(e){var t=this;_utils2.default.setStateAndLog(this,"Toggle Infinite Scroll",{scroll:_lodash2.default.merge(this.state.scroll,{isInfinite:!0})},function(){t.reRenderForResize()})}},{key:"getConnectedProviders",value:function(){var e=window.connectedProviders;try{if(!e&&window.prerenderedGallery&&prerenderedGallery.gallerySettings){var t=prerenderedGallery.gallerySettings;"string"==typeof t&&(t=JSON.parse(_utils2.default.stripSlashes(t))),t&&"object"===(void 0===t?"undefined":(0,_typeof3.default)(t))&&t.connectedProviders&&(e=t.connectedProviders)}}catch(e){console.error("Error getting connected providers",e)}return e||console.error("No connected providers"),e}},{key:"toggleFullscreen",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.state.styleParams.fullscreen&&"nothing"!==this.state.styleParams.itemClick&&void 0!==e&&!1!==e){this.state.totalItemsCount>0&&(e=(e+this.state.totalItemsCount)%this.state.totalItemsCount);var r=this.allItems()[e],n=new _galleryItem2.default({dto:r.dto||r,createdBy:"toggleFullscreen"});if("link"===this.state.styleParams.itemClick)n.linkType&&"none"!==n.linkType&&("web"===n.linkType?window.open((0,_prependHttpExtra2.default)(n.linkUrl),n.linkOpenType):"wix"===n.linkType?_WixSdkWrapper2.default.navigateTo(n.linkData):_WixSdkWrapper2.default.navigateToPage(n.linkUrl,{noTransition:!0}));else{_utils2.default.isVerbose()&&console.log("Time to Fullscreen VM - START");window.staticsVersion;if(window.currentGalleryItems=this.allItems(),window.totalItemsCount=this.state.totalItemsCount,_utils2.default.isInWix()){window.onunload=function(){_utils2.default.isVerbose()&&console.log("Fullscreen iFrame unloaded")};var o=null,a=null;_utils2.default.isStoreGallery()&&(a=this.props.watermarkData,o=this.getConnectedProviders());var s=_utils2.default.getWorkerWindow();_WixSdkWrapper2.default.Styles.getStyleId(function(r){s["pro-gallery-data-"+t.compId]={createdAt:Date.now(),info:{config:i,itemIdx:e,itemId:n.id,compId:t.compId,pageId:t.pageId,galleryId:t.galleryId,styleId:r,watermarkData:a,connectedProviders:o,dateCreated:_utils2.default.getDateCreatedTicksFromStr(window.dateCreated)},items:{galleryStructure:t.galleryStructure,totalItemsCount:t.state.totalItemsCount,currentGalleryItems:t.allItems()},window:{infiniteScrollUrl:window.infiniteScrollUrl,instance:window.instance,gallerySettings:_utils2.default.getGallerySettingsFromWindow()}},s["pro-gallery-fullscreen-comp-id"]=t.compId,t.fullscreenOpenedAt=Date.now(),_WixSdkWrapper2.default.Utils.navigateToSection({sectionId:_utils2.default.getFullscreenSectionId(),noTransition:!0})})}else{var l=document.getElementById("gallery-fullscreen");l&&(this.fullscreenElem=_react2.default.createElement(this.props.FullscreenContainer,{demoModeParams:{items:this.allItems(),galleryStructure:this.galleryStructure,item:e,closeFullscreenCallback:this.closeFullscreenCallback},store:this.props.store}),_reactDom2.default.render(this.fullscreenElem,l),window.history.pushState({},"",_utils2.default.addItemHashParam(window.location.href,this.props.items[e].photoId))),_utils2.default.isSemiNative()||(document.getElementById("fullscreen").style.display="block",document.getElementById("gallery-fullscreen").style.display="block",document.getElementById("content").style.display="none")}}_biLogger.logger.track("expand",{selection:"expand"})}}},{key:"closeFullscreenCallback",value:function(){_utils2.default.isDev()&&console.log("Fullscreen closed callback");var e=(_utils2.default.getWorkerWindow()["pro-gallery-data-"+this.compId]||{}).fullscreenData;if(!e)return void console.warn("Closed fullscreen without data");_utils2.default.isSemiNative()||(document.getElementById("content").style.display="block"),_utils2.default.setStateAndLog(this,"Fullscreen Callback",{items:this.itemsIds(e.currentGalleryItems)}),this.shouldScrollTo=e.currentGalleryItemIdx,this.scrollToItemIfNeeded()}},{key:"initHashtagFilter",value:function(e){var t=this,i=this.getHashtagFilter(),r={filter:i};i&&(_utils2.default.isSemiNative()||_axios2.default.get(_utils2.default.getApiUrlPrefix()+"gallery/"+this.galleryId+"/hashtags/"+i+"/items?instance="+window.instance).then(function(i){var n=i.data;n&&n.items&&n.items.length>0&&(r.items=n.items,_utils2.default.isVerbose()&&console.log("Got hashtag items",r),_utils2.default.setStateAndLog(t,"Get Hashtag Items",{hashtag:r},function(){e&&_lodash2.default.isFunction(e)&&e()}))}))}},{key:"getHashtagFilter",value:function(){return this.state.hashtagFilter||_utils2.default.getWorkerWindow()["pro-gallery-hashtag-filter"]||_utils2.default.parseGetParam("ht",_itemActions.itemActions.getSiteUrl())}},{key:"sortItemsByHashtag",value:function(e){var t=_lodash2.default.get(this,"state.hashtag.items");if(!t)return e;try{var i=_lodash2.default.differenceBy(e,t,"itemId");return _lodash2.default.concat(t,i)}catch(i){return console.warn("Could not sort hashtag items",i,t,e),e}}},{key:"updateMultishareItems",value:function(e){_utils2.default.isVerbose()&&console.log("multishare pubsub",e);var t=e.data;_lodash2.default.isBoolean(t.update)&&!0===t.update&&_lodash2.default.isArray(t.items)&&_utils2.default.setStateAndLog(this,"updateMultishareItems",{multishare:{items:t.items,isMultisharing:!0===this.props.defaultSelectMode||!!t.items.length}})}},{key:"addItemToMultishare",value:function(e){_utils2.default.isInWix()?(e.compId=this.compId,_WixSdkWrapper2.default.PubSub.publish("gallery2multishare",{call:"addItemToMultishare",data:e},!0)):(this.onItemClickEvent.itemId=e.id,window.dispatchEvent(this.onItemClickEvent),_utils2.default.setStateAndLog(this,"updateMultishareItems",{multishare:{items:this.state.multishare.items.concat([e]),isMultisharing:!0}}))}},{key:"removeItemFromMultishare",value:function(e){if(_utils2.default.isInWix())_WixSdkWrapper2.default.PubSub.publish("gallery2multishare",{call:"removeItemFromMultishare",data:e},!0);else{var t=this.state.multishare.items;t=_lodash2.default.filter(t,function(t){return(t.itemId||t.photoId)!==(e.itemId||e.photoId)}),_utils2.default.setStateAndLog(this,"updateMultishareItems",{multishare:{items:t,isMultisharing:!0}})}}},{key:"createGalleryStructure",value:function(e){var t=this,i=function(i,r){return _lodash2.default.get(e,i)||t.getLatestState(i,r)},r={items:this.items.slice(0,i("renderedItemsCount",50)).map(function(e){return GalleryContainer.convertDtoToLayoutItem(e)}),container:i("container"),styleParams:i("styleParams"),gotScrollEvent:i("gotScrollEvent"),showAllItems:!!this.props.ignoreWixScrollEvent};_utils2.default.isVerbose()&&(console.count("galleryContainer createGalleryStructure"),console.log("creating Gallery Structure",r));var n=this.galleryStructure;return this.galleryStructure.ready?this.renderTrigger===this.renderTriggers.SCROLL?(_utils2.default.isVerbose()&&console.time("Recalculating Gallery - visibilities"),n.calcVisibilities(i("container.bounds")),_utils2.default.isVerbose()&&console.timeEnd("Recalculating Gallery - visibilities")):(_utils2.default.isVerbose()&&console.time("Recalculating Gallery - prepare"),n.createLayout(r),_utils2.default.isVerbose()&&console.timeEnd("Recalculating Gallery - prepare")):(_utils2.default.isVerbose()&&console.time("Recalculating Gallery - new"),n=new _proGalleryLayouter.Layouter(r),_utils2.default.isVerbose()&&console.timeEnd("Recalculating Gallery - new")),n=GalleryContainer.convertToGalleryItems(n,{watermark:this.props.watermarkData,sharpParams:r.styleParams.sharpParams}),window.galleryStructure=n,n}},{key:"reRenderForEditMode",value:function(){_utils2.default.isDev()&&console.count("galleryContainer reRenderForEditMode"),_utils2.default.updateViewMode(),this.reRender(this.renderTriggers.MODE)}},{key:"reRenderForSettings",value:function(){_utils2.default.isDev()&&console.count("galleryContainer reRenderForSettings"),this.reRender(this.renderTriggers.STYLES)}},{key:"reRenderForDevice",value:function(){_utils2.default.isDev()&&console.count("galleryContainer reRenderForDevice"),this.reRender(this.renderTriggers.MODE)}},{key:"reRenderForStyles",value:function(){_utils2.default.isDev()&&console.count("galleryContainer reRenderForStyles"),_WixSdkWrapper2.default.Styles.getStyleParams(function(e){window.postMessage({type:_WixSdkWrapper2.default.Events.STYLE_PARAMS_CHANGE,payload:e},_utils2.default.getUrlPrefix())}),this.reRender(this.renderTriggers.STYLES)}},{key:"reRenderForScroll",value:function(e){var t=this;if(this.state.styleParams.oneRow)return!0;_utils2.default.isVerbose()&&(console.count("galleryContainer reRenderForScroll"),console.log("SCROLL - got vertical scroll event",e));try{_utils2.default.shouldDebug("paralax_raf")&&window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){t._reRenderForScroll(e)}):_utils2.default.browserIs("explorer")||_utils2.default.isTest()?this._reRenderForScroll(e):setTimeout(function(){t._reRenderForScroll(e)},500)}catch(t){console.error("Could not delay scroll handling",t),this._reRenderForScroll(e)}}},{key:"reRenderForHorizontalScroll",value:function(e){var t=void 0;try{t=this.state.styleParams.oneRow&&e.target.className.indexOf("gallery-horizontal-scroll")>=0}catch(e){t=!1}return t&&(_utils2.default.isVerbose()&&(console.count("galleryContainer reRenderForHorizontalScroll"),console.log("SCROLL - got horizontal scroll event")),this._reRenderForScroll()),!0}},{key:"_reRenderForScroll",value:function(e){_utils2.default.shouldLog("scroll")&&(this.debugScroll=Date.now(),console.time("SCROLL - full cycle time"),console.time("SCROLL - js logic time")),window.dispatchEvent(this.galleryScrollEvent),this.reRender(this.renderTriggers.SCROLL,e)}},{key:"reRenderForResize",value:function(e){_utils2.default.isVerbose()&&(_utils2.default.isSemiNative()||console.log("Got resize event ("+this.lastWindowHeight+" > "+window.innerHeight+")",e),console.count("galleryContainer reRenderForResize")),!0===this.heightWasSetInternally&&(this.heightWasSetInternally=!1,this.state.styleParams.oneRow||_utils2.default.isVerbose()&&console.warn("Not reRendering on resize event after Wix.setHeight was called!",e)),this.lastWindowHeight=this.getGalleryHeight(),this.resizeCount=this.resizeCount+1;var t="ratio"===this.state.styleParams.gallerySizeType?this.renderTriggers.STYLES:this.renderTriggers.RESIZE;this.reRender(t)}},{key:"reRenderForOrientation",value:function(){var e=this;_utils2.default.isVerbose()&&console.count("galleryContainer reRenderForOrientation");!function(){e.orientationCount=e.orientationCount+1,_utils2.default.fixViewport("Gallery orientation"),e.reRender(e.renderTriggers.ORIENTATION),"editor"!==_utils2.default.getViewModeFromCache()&&_WixSdkWrapper2.default.scrollBy(0,1)}()}},{key:"reRender",value:function(e,t){var i=this,r=this.renderTriggers,n=r.ALL,o=r.STYLES,a=r.RESIZE,s=r.ORIENTATION,l=r.LAYOUT,u=r.MODE,c=r.SCROLL,d=r.ITEMS;r.NONE;_utils2.default.isVerbose()&&(console.count("galleryContainer reRender"),console.count("reRendering (trigger: "+e+")"),console.log("reRendering",e,t));var h=function(t){return _lodash2.default.isArray(t)||(t=[t]),e===n||_lodash2.default.indexOf(t,e)>=0};this.getGalleryScroll(t);var f={scroll:_lodash2.default.merge(this.state.scroll,{top:this.currentScrollPosition,base:this.scrollBase}),container:_lodash2.default.merge(this.state.container,this.getVisibleBounds(this.currentScrollPosition,this.pageScale)),gotScrollEvent:this.state.gotScrollEvent||h(c)};this.newState=f;var p={styleParams:h(o)?this.getStyleParamsState():this.state.styleParams},g=h(o)&&p.styleParams&&this.state.styleParams&&p.styleParams.selectedLayout!==this.state.styleParams.selectedLayout;g&&(e=l),this.newState.styleParams=p.styleParams;var m=h([o,s,l])||!_utils2.default.isiOS()&&h([a]),y={container:m?this.getGalleryDimensions(p.styleParams):this.state.container};m&&_lodash2.default.merge(this.newState.container,y.container);var v={};h(u)&&(v={container:{viewMode:_utils2.default.isInWix()?_utils2.default.getViewModeFromCache():"view"}},_lodash2.default.merge(this.newState.container,v.container));var b=h([u,c,a,s,o,l]),w=b?this.findVisibleItems():this.allItems();this.debugScroll&&console.time("SCROLL - time of getRequiredItemsFromDbIfNeeded"),this.getRequiredItemsFromDbIfNeeded(w,function(r){i.debugScroll&&console.timeEnd("SCROLL - time of getRequiredItemsFromDbIfNeeded");var n={};r.items.length>0&&(i.items.length>i.state.renderedItemsCount?n={items:i.state.items,renderedItemsCount:i.state.renderedItemsCount+r.items.length,totalItemsCount:r.totalItemsCount}:(i.items=i.concatNewItems(r.items),n={items:i.itemsIds(i.items),renderedItemsCount:i.items.length,totalItemsCount:r.totalItemsCount}),_lodash2.default.merge(i.newState,n),i.items.length!==i.state.renderedItemsCount&&(e=d)),i.renderTrigger=e,i.debugScroll&&console.time("SCROLL - ("+e+") create new gallery"),i.galleryStructure=i.createGalleryStructure(),i.loadItemsDimensions(),i.debugScroll&&(console.timeEnd("SCROLL - ("+e+") create new gallery"),console.time("SCROLL - ("+e+") time of setting new state for gallery"));var a=function(e){return String(e)&&""!==String(e).replace(/(undefined)[|]?/g,"")},s=g&&a(i.newState.styleParams.selectedLayout)&&a(i.state.styleParams.selectedLayout),h=Math.round(i.getGalleryHeight());_utils2.default.setStateAndLog(i,"Gallery ReRender",i.newState,function(){i.debugScroll&&(console.timeEnd("SCROLL - ("+e+") time of setting new state for gallery"),console.timeEnd("SCROLL - full cycle time")),(i.isInfiniteScroll()&&!i.state.styleParams.oneRow||i.state.styleParams.isInAdi||e!==l||s)&&i.setWixHeight(i.galleryStructure.height,h,e),g&&_utils2.default.isEditor()&&i.scrollToItem(0)});var f=i.props.actions;switch(e){case c:t&&f.galleryWindowLayoutChanged&&f.galleryWindowLayoutChanged(t);break;case u:f.editorModeChanged();break;case o:f.videoPlayModeChanged(i.newState.styleParams.videoPlay)}}),h(l)&&_WixSdkWrapper2.default.Styles.getStyleParams(function(e){i.horizontalLayoutHeight=e.numbers.horizontalLayoutHeight,i.newState.styleParams.oneRow&&i.horizontalLayoutHeight&&i.setWixHeight(i.horizontalLayoutHeight)}),this.scrollToItemIfNeeded()}},{key:"shouldRender",value:function(){var e=this;_utils2.default.isVerbose()&&console.count("galleryContainer shouldRender");var t=this.state;return!1===_lodash2.default.get(t,"styleParams.gotStyleParams")?(_utils2.default.isVerbose()&&console.warn("Could not render gallery - did not get style params",t.styleParams),!1):_lodash2.default.get(t,"container.galleryWidth")<=0?(_utils2.default.isVerbose()&&console.warn("Could not render gallery - width is 0"),!1):!!this.galleryStructure.ready||(_utils2.default.isVerbose()&&console.warn("Could not render gallery - preparation failed",t.galleryStructure.reason),setTimeout(function(){e.galleryStructure.ready||console.error("galleryStructure.ready === false")},4e3),!1)}},{key:"render",value:function(){return!!this.shouldRender()&&(_utils2.default.isVerbose()&&(console.count("galleryContainer render"),console.timeEnd("SCROLL - js logic time"),console.log("[DEBUG_RENDER] GalleryContainer props changed",_utils2.default.printableObjectsDiff(this.lastProps||{},this.state)),this.lastProps=_lodash2.default.cloneDeep(this.props),console.log("[DEBUG_RENDER] GalleryContainer state changed",_utils2.default.printableObjectsDiff(this.lastState||{},this.state)),this.lastState=_lodash2.default.cloneDeep(this.state),this.renderCount=(this.renderCount||0)+1),this.shouldRender()&&(this.state.styleParams.oneRow?_react2.default.createElement(_slideshowView2.default,(0,_extends3.default)({totalItemsCount:this.state.totalItemsCount,renderedItemsCount:this.state.renderedItemsCount,items:this.currentItems(),galleryStructure:this.galleryStructure,styleParams:this.state.styleParams,container:this.state.container,scroll:_lodash2.default.merge({},this.state.scroll,{isInfinite:this.isInfiniteScroll()}),thumbnailSize:this.thumbnailSize,multishare:this.state.multishare,watermark:this.props.watermarkData,settings:this.props.settings,gotScrollEvent:this.state.gotScrollEvent,convertToGalleryItems:GalleryContainer.convertToGalleryItems,convertDtoToLayoutItem:GalleryContainer.convertDtoToLayoutItem,domId:this.props.domId,actions:_lodash2.default.merge(this.props.actions,{toggleInfiniteScroll:this.toggleInfiniteScroll,toggleFullscreen:this.toggleFullscreen,setWixHeight:this.setWixHeight,scrollToItem:this.scrollToItem,addItemToMultishare:this.addItemToMultishare,removeItemFromMultishare:this.removeItemFromMultishare}),debug:{lastHeight:this.lastHeight,newHeight:this.newHeight,resizeCount:this.resizeCount,orientationCount:this.orientationCount,maxGalleryWidth:this.props.maxGalleryWidth},store:this.props.store},this.props.gallery)):_react2.default.createElement(_galleryView2.default,(0,_extends3.default)({totalItemsCount:this.state.totalItemsCount,renderedItemsCount:this.state.renderedItemsCount,items:this.currentItems(),galleryStructure:this.galleryStructure,styleParams:this.state.styleParams,container:this.state.container,scroll:_lodash2.default.merge({},this.state.scroll,{isInfinite:this.isInfiniteScroll()}),multishare:this.state.multishare,watermark:this.props.watermarkData,settings:this.props.settings,gotScrollEvent:this.state.gotScrollEvent,domId:this.props.domId,actions:_lodash2.default.merge(this.props.actions,{toggleInfiniteScroll:this.toggleInfiniteScroll,toggleFullscreen:this.toggleFullscreen,setWixHeight:this.setWixHeight,scrollToItem:this.scrollToItem,addItemToMultishare:this.addItemToMultishare,removeItemFromMultishare:this.removeItemFromMultishare}),debug:{lastHeight:this.lastHeight,newHeight:this.newHeight,resizeCount:this.resizeCount,orientationCount:this.orientationCount,maxGalleryWidth:this.props.maxGalleryWidth},store:this.props.store},this.props.gallery))))}}],[{key:"convertDtoToLayoutItem",value:function(e){var t=e.metadata||e.metaData,i=_lodash2.default.isObject(t)?t:_utils2.default.parseStringObject(t)||{};return(0,_extends3.default)({id:e.itemId||e.photoId,width:i.width,height:i.height},e)}},{key:"convertToGalleryItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0;e.galleryItems=[];for(var r=0;r<e.columns.length;r++){var n=e.columns[r];n.galleryGroups=[];for(var o=n.groups||n,a=0;a<o.length;a++){for(var s=o[a],l=[],u=0;u<s.items.length;u++){var c=s.items[u];l[u]=new _galleryItem2.default((0,_assign2.default)({scheme:c.scheme,dto:c.dto},t)),e.galleryItems[c.idx]=l[u],i++}n.galleryGroups[a]=new _galleryGroup2.default({scheme:s.scheme,dto:s.dto,items:l})}}return e}}]),GalleryContainer}(_react2.default.Component);exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(GalleryContainer)},function(e,t,i){"use strict";t.__esModule=!0;var r=i(222),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,n.default)(e)}},function(e,t,i){e.exports={default:i(223),__esModule:!0}},function(e,t,i){i(36),i(224),e.exports=i(8).Array.from},function(e,t,i){"use strict";var r=i(24),n=i(14),o=i(35),a=i(107),s=i(108),l=i(56),u=i(225),c=i(72);n(n.S+n.F*!i(109)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,n,d,h=o(e),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,y=0,v=c(h);if(m&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==v||f==Array&&s(v))for(t=l(h.length),i=new f(t);t>y;y++)u(i,y,m?g(h[y],y):h[y]);else for(d=v.call(h),i=new f;!(n=d.next()).done;y++)u(i,y,m?a(d,g,[n.value,y],!0):n.value);return i.length=y,i}})},function(e,t,i){"use strict";var r=i(16),n=i(31);e.exports=function(e,t,i){t in e?r.f(e,t,n(0,i)):e[t]=i}},function(e,t,i){i(95),i(36),i(44),i(227),i(235),i(236),e.exports=i(8).Promise},function(e,t,i){"use strict";var r,n,o,a,s=i(34),l=i(11),u=i(24),c=i(71),d=i(14),h=i(17),f=i(40),p=i(228),g=i(229),m=i(110),y=i(111).set,v=i(231)(),b=i(75),w=i(112),_=i(232),S=i(113),I=l.TypeError,k=l.process,x=k&&k.versions,E=x&&x.v8||"",T=l.Promise,P="process"==c(k),C=function(){},M=n=b.f,O=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[i(12)("species")]=function(e){e(C,C)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t&&0!==E.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var i=e._c;v(function(){for(var r=e._v,n=1==e._s,o=0;i.length>o;)!function(t){var i,o,a,s=n?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(n||(2==e._h&&N(e),e._h=1),!0===s?i=r:(c&&c.enter(),i=s(r),c&&(c.exit(),a=!0)),i===t.promise?u(I("Promise-chain cycle")):(o=A(i))?o.call(i,l,u):l(i)):u(r)}catch(e){c&&!a&&c.exit(),u(e)}}(i[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){y.call(l,function(){var t,i,r,n=e._v,o=D(e);if(o&&(t=w(function(){P?k.emit("unhandledRejection",n,e):(i=l.onunhandledrejection)?i({promise:e,reason:n}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",n)}),e._h=P||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(l,function(){var t;P?k.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},G=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},W=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw I("Promise can't be resolved itself");(t=A(e))?v(function(){var r={_w:i,_d:!1};try{t.call(e,u(W,r,1),u(G,r,1))}catch(e){G.call(r,e)}}):(i._v=e,i._s=1,L(i,!1))}catch(e){G.call({_w:i,_d:!1},e)}}};O||(T=function(e){p(this,T,"Promise","_h"),f(e),r.call(this);try{e(u(W,this,1),u(G,this,1))}catch(e){G.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=i(233)(T.prototype,{then:function(e,t){var i=M(m(this,T));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=P?k.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&L(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(W,e,1),this.reject=u(G,e,1)},b.f=M=function(e){return e===T||e===a?new o(e):n(e)}),d(d.G+d.W+d.F*!O,{Promise:T}),i(43)(T,"Promise"),i(234)("Promise"),a=i(8).Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(e){return S(s&&this===a?T:this,e)}}),d(d.S+d.F*!(O&&i(109)(function(e){T.all(e).catch(C)})),"Promise",{all:function(e){var t=this,i=M(t),r=i.resolve,n=i.reject,o=w(function(){var i=[],o=0,a=1;g(e,!1,function(e){var s=o++,l=!1;i.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,i[s]=e,--a||r(i))},n)}),--a||r(i)});return o.e&&n(o.v),i.promise},race:function(e){var t=this,i=M(t),r=i.reject,n=w(function(){g(e,!1,function(e){t.resolve(e).then(i.resolve,r)})});return n.e&&r(n.v),i.promise}})},function(e,t){e.exports=function(e,t,i,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var r=i(24),n=i(107),o=i(108),a=i(15),s=i(56),l=i(72),u={},c={},t=e.exports=function(e,t,i,d,h){var f,p,g,m,y=h?function(){return e}:l(e),v=r(i,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(f=s(e.length);f>b;b++)if((m=t?v(a(p=e[b])[0],p[1]):v(e[b]))===u||m===c)return m}else for(g=y.call(e);!(p=g.next()).done;)if((m=n(g,v,p.value,t))===u||m===c)return m};t.BREAK=u,t.RETURN=c},function(e,t){e.exports=function(e,t,i){var r=void 0===i;switch(t.length){case 0:return r?e():e.call(i);case 1:return r?e(t[0]):e.call(i,t[0]);case 2:return r?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var r=i(11),n=i(111).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==i(33)(a);e.exports=function(){var e,t,i,u=function(){var r,n;for(l&&(r=a.domain)&&r.exit();e;){n=e.fn,e=e.next;try{n()}catch(r){throw e?i():t=void 0,r}}t=void 0,r&&r.enter()};if(l)i=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);i=function(){c.then(u)}}else i=function(){n.call(r,u)};else{var d=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),i=function(){h.data=d=!d}}return function(r){var n={fn:r,next:void 0};t&&(t.next=n),e||(e=n,i()),t=n}}},function(e,t,i){var r=i(11),n=r.navigator;e.exports=n&&n.userAgent||""},function(e,t,i){var r=i(20);e.exports=function(e,t,i){for(var n in t)i&&e[n]?e[n]=t[n]:r(e,n,t[n]);return e}},function(e,t,i){"use strict";var r=i(11),n=i(8),o=i(16),a=i(18),s=i(12)("species");e.exports=function(e){var t="function"==typeof n[e]?n[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){"use strict";var r=i(14),n=i(8),o=i(11),a=i(110),s=i(113);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,n.Promise||o.Promise),i="function"==typeof e;return this.then(i?function(i){return s(t,e()).then(function(){return i})}:e,i?function(i){return s(t,e()).then(function(){throw i})}:e)}})},function(e,t,i){"use strict";var r=i(14),n=i(75),o=i(112);r(r.S,"Promise",{try:function(e){var t=n.f(this),i=o(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},function(e,t,i){e.exports={default:i(238),__esModule:!0}},function(e,t,i){var r=i(8),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t,i){i(240),e.exports=i(8).Object.keys},function(e,t,i){var r=i(35),n=i(32);i(88)("keys",function(){return function(e){return n(r(e))}})},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(242),b=r(v),w=i(128),_=function(e){function t(e,i){(0,u.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,i));return r.displayName="ItemContainer",r}return(0,g.default)(t,e),(0,d.default)(t,[{key:"isSmallItem",value:function(){return this.props.styleParams.cubeImages&&"fit"===this.props.styleParams.cubeType?"landscape"===this.props.style.orientation?this.props.style.width/this.props.style.ratio<=90:this.props.style.height*this.props.style.ratio<=90:this.props.style.width<=90||this.props.style.height<=90}},{key:"isNarrow",value:function(){return this.props.style.width<200}},{key:"isShort",value:function(){return this.props.style.height<150}},{key:"render",value:function(){return this.props.love.showCounter=this.props.styleParams.loveCounter&&!this.isSmallItem()&&!this.isNarrow(),y.default.createElement(b.default,(0,o.default)({layout:"galleryItem",className:"image",isSmallItem:this.isSmallItem(),isNarrow:this.isNarrow(),isShort:this.isShort()},this.props))}}]),t}(y.default.Component);t.default=(0,w.CommonItemContainer)(_)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(114),b=r(v),w=i(243),_=r(w),S=i(244),I=r(S),k=i(254),x=r(k),E=i(255),T=r(E),P=i(256),C=r(P),M=i(257),O=r(M),A=i(266),L=r(A),R=i(269),D=r(R),N=i(117),G=r(N),W=i(118),j=r(W),F=i(13),V=r(F),U=i(22),H=i(49),z=r(H),B=i(79),q=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(B),Y=i(286),Z=r(Y),X=i(3),J=r(X),K=i(7),Q=r(K),$=function(e){function t(e){(0,u.default)(this,t),q.itemLoadStart();var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.init(),i.state={failed:!1,loaded:!1,retries:0,showShare:!1,showHover:!1},i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"init",value:function(){var e=this;this.onItemClick=this.onItemClick.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.toggleFullscreenIfNeeded=this.toggleFullscreenIfNeeded.bind(this),this.toggleMultishareSelection=this.toggleMultishareSelection.bind(this),this.handleItemMouseDown=this.handleItemMouseDown.bind(this),this.handleItemMouseUp=this.handleItemMouseUp.bind(this),this.setItemLoaded=this.setItemLoaded.bind(this),this.setItemError=this.setItemError.bind(this),this.isMultishared=this.isMultishared.bind(this),this.isMultisharing=this.isMultisharing.bind(this),this.isVerticalContainer=this.isVerticalContainer.bind(this),this.isHighlight=this.isHighlight.bind(this),this.toggleShare=this.toggleShare.bind(this),this.getShare=this.getShare.bind(this),this.getItemHover=this.getItemHover.bind(this),this.getImageItem=this.getImageItem.bind(this),this.getVideoItem=this.getVideoItem.bind(this),this.getVideoItemPlaceholder=this.getVideoItemPlaceholder.bind(this),this.getTextItem=this.getTextItem.bind(this),this.getItemInner=this.getItemInner.bind(this),this.getItemContainerStyles=this.getItemContainerStyles.bind(this),this.getItemWrapperStyles=this.getItemWrapperStyles.bind(this),this.getItemAriaLabel=this.getItemAriaLabel.bind(this),this.getItemContainerClass=this.getItemContainerClass.bind(this),this.getItemWrapperClass=this.getItemWrapperClass.bind(this),this.getItemContainerTabIndex=this.getItemContainerTabIndex.bind(this),this.getSEOLink=this.getSEOLink.bind(this),this.isIconTag=this.isIconTag.bind(this),this.onMouseOver=this.onMouseOver.bind(this),J.default.isEditor()&&V.default.addEventListener(V.default.Events.SETTINGS_UPDATED,function(t){setTimeout(function(){e.setState({showHover:2===t.detail})},50)}),J.default.isSemiNative()?this.onMouseOverEvent=new window.CustomEvent("on_mouse_over"):(this.onMouseOverEvent=document.createEvent("CustomEvent"),this.onMouseOverEvent.initCustomEvent("on_mouse_over",!1,!1,null))}},{key:"setItemError",value:function(){this.setState({retries:this.state.retries+1,failed:this.state.retries>=3})}},{key:"setItemLoaded",value:function(){q.itemLoaded(),q.appLoaded(),this.setState({failed:!1,loaded:!0})}},{key:"isIconTag",value:function(e){return["button","i","a"].indexOf(e.toLowerCase())>=0}},{key:"toggleShare",value:function(e,t){e.stopPropagation(),"mouseout"===e.type&&(this.isIconTag(e.target.tagName)||e.relatedTarget&&this.isIconTag(e.relatedTarget.tagName))||this.setState({showShare:Q.default.isUndefined(t)?!this.state.showShare:!!t})}},{key:"toggleHoverOnMobile",value:function(){this.setState({showHover:!this.state.showHover})}},{key:"onMouseOver",value:function(){this.onMouseOverEvent.itemIdx=this.props.idx,window.dispatchEvent(this.onMouseOverEvent),"video"===this.props.type&&this.onVideoHover()}},{key:"onVideoHover",value:function(){"hover"!==this.props.styleParams.videoPlay||J.default.isMobile()||this.props.playVideo(this.props.idx)}},{key:"onKeyPress",value:function(e){switch(e.keyCode||e.charCode){case 32:case 13:return e.preventDefault(),e.stopPropagation(),this.onItemClick(e,!1),!1}}},{key:"onItemClick",value:function(e,t){e.preventDefault();var i=this.props.styleParams,r=i.itemClick,n=i.videoPlay;if(Q.default.isBoolean(t)||(t=!!this.props.thumbnailHighlightId),!t&&Q.default.isFunction(Q.default.get(window,"galleryWixCodeApi.onItemClicked"))&&window.galleryWixCodeApi.onItemClicked(this.props),!0===t&&Q.default.isFunction(this.props.actions.scrollToItem))this.props.actions.scrollToItem(this.props.idx);else if("expand"===r||"link"===r)this.props.actions.toggleFullscreen(this.props.idx);else if("video"===this.props.type){var o="expand"!==r&&("onClick"===n||J.default.isMobile());o&&(this.props.playing?this.props.pauseVideo(this.props.idx):this.props.playVideo(this.props.idx))}else this.shouldShowHoverOnMobile()&&this.toggleHoverOnMobile()}},{key:"toggleFullscreenIfNeeded",value:function(e){var t=Q.default.get(e,"target.className");if(Q.default.isObject(t)&&(t=Q.default.valuesIn(t)),Q.default.isFunction(t.indexOf)&&t.indexOf("block-fullscreen")>=0)return void console.warn("Blocked fullscreen!",e);this.props.styleParams.fullscreen&&this.props.actions.toggleFullscreen(this.props.idx)}},{key:"toggleMultishareSelection",value:function(e){e&&e.stopPropagation&&e.stopPropagation();var t=this.itemContainer;t.style.transform="scale("+(this.props.style.width-8)/this.props.style.width+")",setTimeout(function(){t.style.transform="scale(1)"},80),this.isMultishared()?this.props.actions.removeItemFromMultishare(this.props):this.props.actions.addItemToMultishare(this.props)}},{key:"handleItemMouseDown",value:function(e){var t=this;return J.default.isMobile()&&this.props.styleParams.allowMultishare&&(clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(function(){e.preventDefault(),t.toggleMultishareSelection(e)},500)),!0}},{key:"handleItemMouseUp",value:function(e){return J.default.isMobile()&&this.longPressTimer&&clearTimeout(this.longPressTimer),!0}},{key:"isSmallItem",value:function(){return this.props.isSmallItem&&!this.props.styleParams.isSlideshow}},{key:"isVerticalContainer",value:function(){return this.props.style.width<this.props.style.height+1}},{key:"shouldShowHoverOnMobile",value:function(){return J.default.isMobile()&&"nothing"===this.props.styleParams.itemClick}},{key:"isHighlight",value:function(){return this.props.thumbnailHighlightId&&this.props.thumbnailHighlightId===this.props.id}},{key:"shouldHover",value:function(){return!!this.isMultisharing()||!this.props.styleParams.isSlideshow&&(!1!==this.props.styleParams.allowHover&&(J.default.isMobile()?this.shouldShowHoverOnMobile():!J.default.isEditor()||this.state.showHover))}},{key:"isMultishared",value:function(){var e=this,t=Q.default.get(this,"props.multishare.items");return t&&!!Q.default.find(t,function(t){return t.id===e.props.id})}},{key:"isMultisharing",value:function(){return Q.default.get(this,"props.multishare.isMultisharing")}},{key:"getImageDimensions",value:function(){var e=this.props.style.ratio>=this.props.cubeRatio,t=Math.round((this.props.style.height*this.props.style.ratio-this.props.style.width)/-2),i=Math.round((this.props.style.width/this.props.style.ratio-this.props.style.height)/-2);return this.props.styleParams.cubeImages&&"fit"===this.props.styleParams.cubeType?e?{height:"calc(100% - "+2*i+"px)",marginTop:i}:{width:"calc(100% - "+2*t+"px)",marginLeft:t}:{}}},{key:"isVisible",value:function(e,t){if(void 0===t){var i=b.default.findDOMNode(e.video);if(!i)return!1;t=i.getBoundingClientRect()}var r=t,n=r.top,o=r.bottom,a=this.props.documentHeight,s=this.props.scroll.top,l=o-n,u=l/2;return n+u>s&&o-u<s+a}},{key:"getButtonPlacement",value:function(){return this.props.styleParams.titlePlacement}},{key:"videoOnMount",value:function(e){var t=this;this.props.videoAdded({idx:this.props.idx,isVisible:function(){return t.isVisible(e)}})}},{key:"videoOnUnmount",value:function(){this.props.videoRemoved(this.props.idx)}},{key:"getItemTextsDetails",value:function(){var e=Q.default.pick(this.props,["title","description","fileName","id","styleParams","style","isNarrow"]),t=this.getButtonPlacement()===z.default.placements.SHOW_ON_HOVER,i="image"===this.props.type||"picture"===this.props.type,r=!0===this.props.styleParams.useCustomButton,n=t&&(i||!J.default.isStoreGallery())&&r;return y.default.createElement(O.default,(0,o.default)({},e,{key:"item-texts-"+e.id,showShare:this.state.showShare,isSmallItem:this.isSmallItem(),titlePlacement:this.props.styleParams.titlePlacement,shouldShowButton:n}))}},{key:"getSocial",value:function(){var e=Q.default.pick(this.props,["html","hashtag","photoId","item","idx","id","styleParams","style","love","isDemo","type","download_url","originalsUrl","isNarrow","isShort"]);return y.default.createElement(L.default,(0,o.default)({},e,{showShare:this.state.showShare,isSmallItem:this.isSmallItem(),isVerticalContainer:this.isVerticalContainer(),key:"item-social-"+e.id,actions:{openItemShopInFullScreen:this.openItemShopInFullScreen,toggleMultishareSelection:this.toggleMultishareSelection,toggleShare:this.toggleShare,getShare:this.getShare,showTooltip:U.itemActions.showTooltip,hideTooltip:U.itemActions.hideTooltip}}))}},{key:"getShare",value:function(){var e=Q.default.pick(this.props,["styleParams","id","type","style","currentIdx","idx"]);return y.default.createElement(D.default,(0,o.default)({},e,{allProps:this.props,key:"item-share-"+e.id,showShare:this.state.showShare,isVerticalContainer:this.isVerticalContainer(),actions:{toggleShare:this.toggleShare}}))}},{key:"getItemHover",value:function(e,t){var i=Q.default.pick(this.props,["styleParams","type","idx","type"]);return y.default.createElement(C.default,(0,o.default)({},i,{forceShowHover:this.props.previewHover||this.state.showHover,isMultisharing:this.isMultisharing(),isMultishared:this.isMultishared(),shouldHover:this.shouldHover(),imageDimensions:t,key:"hover",actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,toggleMultishareSelection:this.toggleMultishareSelection}}),e)}},{key:"getImageItem",value:function(e){var t=Q.default.pick(this.props,["alt","title","description","visible","id","styleParams","resized_url","settings"]);return y.default.createElement(_.default,(0,o.default)({},t,{key:"imageItem",loaded:this.state.loaded,imageDimensions:e,isThumbnail:!!this.props.thumbnailHighlightId,actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,setItemLoaded:this.setItemLoaded,setItemError:this.setItemError}}))}},{key:"getVideoItem",value:function(e,t){return y.default.createElement(I.default,(0,o.default)({},this.props,{onMount:this.videoOnMount.bind(this),onUnmount:this.videoOnUnmount.bind(this),onEnd:this.props.videoEnded.bind(this),key:"video"+this.props.idx,hover:t,imageDimensions:e,loadingStatus:{failed:this.state.failed,loaded:this.state.loaded},onClick:this.handleVideoClick,actions:Q.default.merge({},this.props.actions,{setItemLoaded:this.setItemLoaded,setItemError:this.setItemError,handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,toggleMultishareSelection:this.toggleMultishareSelection,isMultishared:this.isMultishared,isMultisharing:this.isMultisharing})}))}},{key:"getVideoItemPlaceholder",value:function(e){return y.default.createElement(T.default,{id:this.props.idx,resized_url:this.props.resized_url,hover:e})}},{key:"getTextItem",value:function(){var e=Q.default.pick(this.props,["visible","id","styleParams","style","html","cubeRatio"]);return y.default.createElement(x.default,(0,o.default)({},e,{key:"textItem",actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,setItemLoaded:this.setItemLoaded}}))}},{key:"getItemInner",value:function(){var e=this.props,t=e.styleParams,i=e.type,r=e.visible,n=void 0,o=this.getImageDimensions(),a=this.getItemTextsDetails(),s=this.getSocial(),l=this.getShare(),u=this.getItemHover([a,s,l],o);switch(i){case"dummy":n=y.default.createElement("div",null);break;case"video":n=r?this.getVideoItem(o,u):this.getVideoItemPlaceholder(u);break;case"text":n=[this.getTextItem(),u];break;case"image":case"picture":default:n=[this.getImageItem(o),u]}return t.isSlideshow&&(n=y.default.createElement("div",null,n,this.props.currentIdx===this.props.idx&&y.default.createElement("div",{className:"gallery-item-info gallery-item-bottom-info","data-hook":"gallery-item-info-buttons"},y.default.createElement("div",null,a,s,l)))),n}},{key:"openItemShopInFullScreen",value:function(e){e.preventDefault(),e.stopPropagation(),this.toggleFullscreenIfNeeded(e)}},{key:"getBottomInfoElement",value:function(){var e=this,t=this.props,i=t.styleParams,r=t.title,n=t.type,o=z.default.placements,a=this.getButtonPlacement(),s=null;if(i.titlePlacement===o.SHOW_ALWAYS){var l="image"===n||"picture"===n,u=a===o.SHOW_ALWAYS&&!0===i.useCustomButton&&(l||!J.default.isStoreGallery()),c=u?y.default.createElement(G.default,{styleParams:i}):null,d=i.allowTitle&&r,h=d?y.default.createElement(j.default,{title:r}):null;(h||c)&&(s=y.default.createElement("div",{style:{height:i.bottomInfoHeight,textAlign:i.galleryTextAlign},className:"gallery-item-bottom-info",onMouseOver:function(){e.setState({showHover:!0})},onMouseOut:function(){e.setState({showHover:!1})}},h,c))}return s}},{key:"getItemContainerStyles",value:function(){var e=this.props,t=e.styleParams,i=e.style,r=e.transform,n=i.width,o=t.borderRadius<100?t.borderRadius:Math.min(parseInt(i.width),parseInt(i.height)),a={};if(t.boxShadow>0){var s=Math.round(t.imageMargin*t.boxShadow/5);a={boxShadow:s+"px "+s+"px "+Math.min(15,Math.round(t.imageMargin*t.boxShadow/2))+"px 0 rgba(0,0,0,0.2)"}}return Q.default.merge({width:n,margin:t.imageMargin+"px",position:i.position,top:i.top,left:i.left,right:i.right,bottom:i.bottom,overflowY:t.isSlideshow?"visible":"inherit",borderRadius:o+"px"},r,a)}},{key:"getItemWrapperStyles",value:function(){var e=this.props,t=e.styleParams,i=e.style,r=(e.transform,t.borderRadius<100?t.borderRadius:Math.min(parseInt(i.width),parseInt(i.height))),n=i.height,o={};return o.backgroundColor="fit"!==t.cubeType?i.bgColor:"inherit",o.height=n+"px",o.borderRadius=r+"px",o}},{key:"getItemAriaLabel",value:function(){var e=this.props,t=e.type,i=e.title,r=void 0;switch(t){case"dummy":r="";break;case"text":r="Text Box";break;case"video":r="Video";break;default:r="Graphic"}return r+", "+i+(J.default.isStoreGallery()?", Buy Now":"")}},{key:"getSEOLink",value:function(){var e=this.props.styleParams,t={};return"expand"===e.itemClick&&(t.href=U.itemActions.getShareUrl(this.props)),t}},{key:"getItemContainerClass",value:function(){var e=this.props.styleParams;return(0,Z.default)("gallery-item-container","visible",{highlight:this.isHighlight(),clickable:"nothing"!==e.itemClick})}},{key:"getItemWrapperClass",value:function(){var e=this.props.styleParams;return"gallery-item-wrapper visible "+(e.cubeImages?"cube-type-"+e.cubeType:"")}},{key:"getItemContainerTabIndex",value:function(){return this.isHighlight()?J.default.getTabIndex("currentThumbnail"):this.props.currentIdx===this.props.idx?J.default.getTabIndex("currentGalleryItem"):-1}},{key:"componentDidMount",value:function(){if(J.default.isMobile())try{y.default.initializeTouchEvents(!0)}catch(e){}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidUpdate",value:function(e){if(J.default.isSite()&&!J.default.isMobile()&&document&&document.activeElement&&document.activeElement.className){var t=document.activeElement.className.indexOf("gallery-item-container")>=0,i=document.activeElement.className.indexOf("show-more")>=0;(t||i)&&(this.props.thumbnailHighlightId!==e.thumbnailHighlightId&&this.props.thumbnailHighlightId===this.props.id?this.itemContainer.focus():this.props.currentIdx!==e.currentIdx&&this.props.currentIdx===this.props.idx&&this.itemContainer.focus())}}},{key:"render",value:function(){var e=this,t=this.props,i=t.photoId,r=t.id,n=t.hash,a=t.idx;return y.default.createElement("div",(0,o.default)({className:this.getItemContainerClass(),ref:function(t){return e.itemContainer=t},onMouseOver:this.onMouseOver,onClick:this.onItemClick,onKeyDown:this.onKeyPress,tabIndex:this.getItemContainerTabIndex(),"data-hash":n,"data-id":i,"data-idx":a,"aria-label":this.getItemAriaLabel(),role:"link","aria-level":"0","data-hook":"item-container",key:"item-container-"+r,style:this.getItemContainerStyles()},this.getSEOLink()),y.default.createElement("div",{"data-hook":"item-wrapper",className:this.getItemWrapperClass(),key:"item-wrapper-"+r,style:this.getItemWrapperStyles()},this.getItemInner()),this.getBottomInfoElement())}}]),t}(y.default.Component);t.default=$},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(3),b=r(v),w=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isThumbnail,i=e.alt,r=e.visible,n=e.loaded,a=e.styleParams,s=e.imageDimensions,l=e.resized_url,u=e.id,c=e.actions,d=e.settings,h=d&&d.imageProps&&"function"==typeof d.imageProps?d.imageProps(u):{};return r?y.default.createElement("div",{className:"gallery-item-visible gallery-item gallery-item-preloaded "+(a.cubeImages&&"fit"===a.cubeType?" grid-fit ":"")+(n?"gallery-item-loaded":""),onTouchStart:c.handleItemMouseDown,onTouchEnd:c.handleItemMouseUp,key:"image_container-"+u,"data-hook":"image-item",style:n||b.default.deviceHasMemoryIssues()?{}:{backgroundImage:"url("+l.thumb+")"}},y.default.createElement("img",(0,o.default)({onLoad:c.setItemLoaded,key:(a.cubeImages&&"fill"===a.cubeType?"cubed-":"")+"image",className:"gallery-item-visible gallery-item "+(n?"gallery-item-loaded":"gallery-item-hidden"),src:l.img,alt:t?"":i,onError:c.setItemError,style:s},h)),!t&&y.default.createElement("div",{className:"pro-circle-preloader",key:"image-preloader-"+u})):y.default.createElement("div",{className:"gallery-item-visible gallery-item gallery-item-preloaded "+(a.cubeImages&&"fit"===a.cubeType?" grid-fit ":"")+(n?"gallery-item-loaded":""),key:"image_container-"+u,style:b.default.deviceHasMemoryIssues()?{}:{backgroundImage:"url("+l.thumb+")"},"data-hook":"image-item"},y.default.createElement("img",{onLoad:c.setItemLoaded,key:"image-"+u,className:"gallery-item-hidden gallery-item",style:s,alt:t?"":i,src:""}))}}]),t}(y.default.Component);t.default=w},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(245),b=r(v),w=i(3),_=r(w),S=function(e){function t(e){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return i.pause=i.pause.bind(i),i.play=i.play.bind(i),i.state={playedOnce:!1,playing:!1},i}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.playing&&this.setState({playedOnce:!0})}},{key:"play",value:function(){this.props.playVideo(this.props.idx)}},{key:"pause",value:function(){this.props.pauseVideo()}},{key:"createPlayerElement",value:function(){var e=this,t=this.props.style.ratio>=this.props.cubeRatio,i={width:t?"100%":"auto",height:t?"auto":"100%"};if(this.props.styleParams.cubeImages&&"fill"===this.props.styleParams.cubeType){var r=[i.height,i.width];i.width=r[0],i.height=r[1],i.position="absolute",i.margin="auto",i.minHeight="100%",i.minWidth="100%",i.left="-100%",i.right="-100%",i.top="-100%",i.bottom="-100%"}return y.default.createElement(b.default,{className:"gallery-item-visible video gallery-item",width:"100%",height:"100%",onReady:this.props.actions.setItemLoaded,url:this.props.videoUrl?this.props.videoUrl:this.props.resized_url.mp4,loop:!!this.props.styleParams.videoLoop,ref:function(t){return e.video=t},volume:0,playing:this.props.playing,poster:this.props.resized_url.img,mockPlayer:!this.state.playedOnce&&(this.props.isExternalVideo||_.default.isMobile()),onEnded:function(){e.setState({playing:!1}),e.props.onEnd()},onPause:function(){e.setState({playing:!1})},playbackRate:this.props.styleParams.videoSpeed||1,onPlay:function(){e.setState({playing:!0})},fileConfig:{attributes:{preload:"metadata",poster:this.props.resized_url.img,style:i}},key:"video-"+this.props.id})}},{key:"createImageElement",value:function(){return y.default.createElement("img",{onLoad:this.props.actions.setItemLoaded,onError:this.props.actions.setItemError,key:"image-"+this.props.id,className:"gallery-item-hidden gallery-item-visible gallery-item "+(this.props.loadingStatus.loaded?" gallery-item-loaded ":"")+(this.props.loadingStatus.failed?" failed ":""),src:this.props.resized_url.img})}},{key:"componentDidMount",value:function(){this.props.onMount(this)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"canVideoPlayInGallery",value:function(e,t){return!(!_.default.isMobile()||"expand"===e)||(!_.default.isMobile()&&"expand"!==e||!_.default.isMobile()&&"onClick"!==t)}},{key:"render",value:function(){var e="gallery-item-visible gallery-item-preloaded gallery-item-video gallery-item"+(_.default.isiPhone()?" ios":"")+(this.props.loaded?"gallery-item-loaded":"");this.state.playing&&(e+=" playing");var t=!this.props.hidePlay&&[y.default.createElement("i",{key:"play-triangle","data-hook":"play-triangle",className:"gallery-item-video-play-triangle progallery-svg-font-icons-play-triangle "}),y.default.createElement("i",{key:"play-bg","data-hook":"play-background",className:"gallery-item-video-play-background progallery-svg-font-icons-play-background "})],i=y.default.createElement("div",{className:"pro-circle-preloader",key:"video-preloader-"+this.props.idx}),r=this.props.styleParams,n=r.videoPlay,a=r.itemClick,s=this.canVideoPlayInGallery(a,n)?y.default.createElement("div",{className:e+" animated fadeIn ","data-hook":"video_container-video-player-element",key:"video_container-"+this.props.id,style:this.props.loaded||_.default.deviceHasMemoryIssues()?{}:(0,o.default)({backgroundImage:"url("+this.props.resized_url.thumb+")"},this.props.imageDimensions)},this.createPlayerElement(),t,i):y.default.createElement("div",{className:e,"data-hook":"video_container-image-element",key:"video_container-"+this.props.id,style:(0,o.default)({backgroundImage:"url("+this.props.resized_url.thumb+")"},this.props.imageDimensions)},this.createImageElement(),t,i),l=this.props.hover;return y.default.createElement("div",{key:"video-and-hover-container"+this.props.idx},[s,l])}}]),t}(y.default.Component);t.default=S},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),c=i(2),d=r(c),h=i(77),f=i(246),p=r(f),g=i(249),m=r(g),y=i(251),v=r(y),b=i(48),w=r(b),_=i(252),S=r(_),I=i(253),k=r(I),x=function(e){function t(){var e,i,r,s;o(this,t);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return i=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.seekTo=function(e){r.player&&r.player.seekTo(e)},r.stopBuffering=function(){r.player&&r.player.stopBuffering&&r.player.stopBuffering()},r.progress=function(){if(r.props.url&&r.player){var e=r.player.getFractionLoaded()||0,t=r.player.getFractionPlayed()||0,i={};if(e!==r.prevLoaded&&(i.loaded=e),r.props.playing){t!==r.prevPlayed&&(i.played=t);var n=!i.played;n!==r.prevBuffering&&(r.props.onBuffer(n),r.prevBuffering=n)}(i.loaded||i.played)&&r.props.onProgress(i),r.prevLoaded=e,r.prevPlayed=t}r.progressTimeout=setTimeout(r.progress,r.props.progressFrequency)},r.ref=function(e){r.player=e},r.renderPlayer=function(e){var t=e.canPlay(r.props.url),i=r.props,o=i.youtubeConfig,a=i.soundcloudConfig,s=i.vimeoConfig,u=i.fileConfig,c=n(i,["youtubeConfig","soundcloudConfig","vimeoConfig","fileConfig"]),h=t?l({},c,{ref:r.ref}):{};return d.default.createElement(e,l({key:e.displayName,youtubeConfig:o,soundcloudConfig:a,vimeoConfig:s,fileConfig:u},h))},s=i,a(r,s)}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.onProgress&&this.progress()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout)}},{key:"shouldComponentUpdate",value:function(e){return this.props.url!==e.url||this.props.playing!==e.playing||this.props.volume!==e.volume||this.props.playbackRate!==e.playbackRate||this.props.height!==e.height||this.props.width!==e.width||this.props.hidden!==e.hidden||this.props.fileConfig!==e.fileConfig}},{key:"renderPlayers",value:function(){var e=this.props,t=e.url,i=e.youtubeConfig,r=e.vimeoConfig,n=[];return p.default.canPlay(t)?n.push(p.default):m.default.canPlay(t)?n.push(m.default):v.default.canPlay(t)?n.push(v.default):S.default.canPlay(t)?n.push(S.default):k.default.canPlay(t)?n.push(k.default):t&&n.push(w.default),!p.default.canPlay(t)&&i.preload&&n.push(p.default),!v.default.canPlay(t)&&r.preload&&n.push(v.default),n.map(this.renderPlayer)}},{key:"onWrapperClick",value:function(){this.props.onWrapperClick&&this.props.onWrapperClick()}},{key:"render",value:function(){var e=this.props,t=e.style,i=e.width,r=e.height,n=e.className,o=e.hidden,a=this.renderPlayers(),s=d.default.createElement("img",{src:this.props.poster,width:this.props.width+"px",height:this.props.height+"px",className:"gallery--placeholder-item"});return d.default.createElement("div",{style:l({},t,{width:i,height:r}),className:n,hidden:o,onClick:this.onWrapperClick.bind(this)},this.props.mockPlayer?s:a)}}]),t}(c.Component);x.displayName="ReactPlayer",x.propTypes=h.propTypes,x.defaultProps=h.defaultProps,t.default=x,e.exports=t.default},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),u=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},c=i(2),d=r(c),h=i(247),f=r(h),p=i(78),g=r(p),m=i(248),y="YT",v=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,b={autoplay:0,playsinline:1,showinfo:0,rel:0,iv_load_policy:3},w=function(e){function t(){var e,i,r,a;n(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onStateChange=function(e){var t=e.data,i=r.props,n=i.onPause,o=i.onBuffer,a=window[y].PlayerState,s=a.PLAYING,l=a.PAUSED,u=a.BUFFERING,c=a.ENDED,d=a.CUED;t===s&&r.onPlay(),t===l&&n(),t===u&&o(),t===c&&r.onEnded(),t===d&&r.onReady()},r.onEnded=function(){var e=r.props,t=e.loop,i=e.onEnded;t&&r.seekTo(0),i()},r.ref=function(e){r.container=e},a=i,o(r,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,i=e.url,r=e.youtubeConfig;!i&&r.preload&&(this.preloading=!0,this.load("https://www.youtube.com/watch?v=GlCmAC4MHek")),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"getSDK",value:function(){return window[y]&&window[y].loaded?Promise.resolve(window[y]):new Promise(function(e,t){var i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){i&&i(),e(window[y])},(0,f.default)("https://www.youtube.com/iframe_api",function(e){e&&t(e)})})}},{key:"load",value:function(e){var t=this,i=this.props,r=i.controls,n=i.youtubeConfig,o=i.onError,a=e&&e.match(v)[1];return this.isReady?void this.player.cueVideoById({videoId:a,startSeconds:(0,m.parseStartTime)(e)}):this.loadingSDK?void(this.loadOnReady=e):(this.loadingSDK=!0,void this.getSDK().then(function(i){t.player=new i.Player(t.container,{width:"100%",height:"100%",videoId:a,playerVars:s({},b,{controls:r?1:0},n.playerVars,{start:(0,m.parseStartTime)(e),origin:window.location.origin}),events:{onReady:function(){t.loadingSDK=!1,t.onReady()},onStateChange:t.onStateChange,onError:function(e){return o(e.data)}}})},o))}},{key:"play",value:function(){this.isReady&&this.player.playVideo&&this.player.playVideo()}},{key:"pause",value:function(){this.isReady&&this.player.pauseVideo&&this.player.pauseVideo()}},{key:"stop",value:function(){this.isReady&&this.player.stopVideo&&this.player.stopVideo()}},{key:"seekTo",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seekTo",this).call(this,e),this.isReady&&this.player.seekTo&&this.player.seekTo(this.getDuration()*e)}},{key:"setVolume",value:function(e){this.isReady&&this.player.setVolume&&this.player.setVolume(100*e)}},{key:"setPlaybackRate",value:function(e){this.isReady&&this.player.setPlaybackRate&&this.player.setPlaybackRate(e)}},{key:"getDuration",value:function(){return this.isReady&&this.player.getDuration?this.player.getDuration():null}},{key:"getFractionPlayed",value:function(){return this.isReady&&this.getDuration()?this.player.getCurrentTime()/this.getDuration():null}},{key:"getFractionLoaded",value:function(){return this.isReady&&this.player.getVideoLoadedFraction?this.player.getVideoLoadedFraction():null}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.url?"block":"none"};return d.default.createElement("div",{style:e},d.default.createElement("div",{ref:this.ref}))}}],[{key:"canPlay",value:function(e){return v.test(e)}}]),t}(g.default);w.displayName="YouTube",t.default=w,e.exports=t.default},function(e,t){function i(e,t){for(var i in t)e.setAttribute(i,t[i])}function r(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,o){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"==typeof t&&(o=t,t={}),t=t||{},o=o||function(){},s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.async=!("async"in t)||!!t.async,s.src=e,t.attrs&&i(s,t.attrs),t.text&&(s.text=""+t.text),("onload"in s?r:n)(s,o),s.onload||r(s,o),a.appendChild(s)}},function(e,t,i){"use strict";function r(e){var t=e.match(a);if(t){var i=t[1];if(i.match(s))return n(i);if(l.test(i))return parseInt(i,10)}return 0}function n(e){for(var t=0,i=s.exec(e);null!==i;){var r=i,n=o(r,3),a=n[1],l=n[2];"h"===l&&(t+=60*parseInt(a,10)*60),"m"===l&&(t+=60*parseInt(a,10)),"s"===l&&(t+=parseInt(a,10)),i=s.exec(e)}return t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.parseStartTime=r;var a=/[?&#](?:start|t)=([0-9hms]+)/,s=/(\d+)(h|m|s)/g,l=/^\d+$/},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=i(2),c=r(u),d=i(250),h=r(d),f=i(48),p=r(f),g=i(77),m=/^https?:\/\/(soundcloud.com|snd.sc)\/([a-z0-9-_]+\/[a-z0-9-_]+)$/,y={},v=function(e){function t(){var e,i,r,a;n(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={image:null},r.clientId=r.props.soundcloudConfig.clientId||g.defaultProps.soundcloudConfig.clientId,r.ref=function(e){r.player=e},a=i,o(r,a)}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,i){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e,i)||this.state.image!==i.image}},{key:"getSongData",value:function(e){var t=this;return y[e]?Promise.resolve(y[e]):(0,h.default)("//api.soundcloud.com/resolve.json?url="+e+"&client_id="+this.clientId).then(function(i){if(i.ok)return y[e]=i.json(),y[e];t.props.onError(new Error("SoundCloud track could not be resolved"))})}},{key:"load",value:function(e){var t=this,i=this.props,r=i.soundcloudConfig,n=i.onError;this.stop(),this.getSongData(e).then(function(e){if(t.mounted){if(!e.streamable)return void n(new Error("SoundCloud track is not streamable"));var i=e.artwork_url||e.user.avatar_url;i&&r.showArtwork&&t.setState({image:i.replace("-large","-t500x500")}),t.player.src=e.stream_url+"?client_id="+t.clientId}},n)}},{key:"render",value:function(){var e=this.props,t=e.url,i=e.loop,r=e.controls,n={display:t?"block":"none",height:"100%",backgroundImage:this.state.image?"url("+this.state.image+")":null,backgroundSize:"cover",backgroundPosition:"center"};return c.default.createElement("div",{style:n},c.default.createElement("audio",{ref:this.ref,type:"audio/mpeg",preload:"auto",style:{width:"100%",height:"100%"},controls:r,loop:i}))}}],[{key:"canPlay",value:function(e){return m.test(e)}}]),t}(p.default);v.displayName="SoundCloud",t.default=v,e.exports=t.default},function(e,t,i){var r,n,o;!function(i,a){n=[t,e],r=a,void 0!==(o="function"==typeof r?r.apply(t,n):r)&&(e.exports=o)}(0,function(e,t){"use strict";function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function n(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,s=t.timeout||a.timeout,l=t.jsonpCallback||a.jsonpCallback,u=void 0;return new Promise(function(a,c){var d=t.jsonpCallbackFunction||i(),h=l+"_"+d;window[d]=function(e){a({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),n(h),r(d)},o+=-1===o.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+o+l+"="+d),t.charset&&f.setAttribute("charset",t.charset),f.id=h,document.getElementsByTagName("head")[0].appendChild(f),u=setTimeout(function(){c(new Error("JSONP request to "+e+" timed out")),r(d),n(h),window[d]=function(){r(d)}},s),f.onerror=function(){c(new Error("JSONP request to "+e+" failed")),r(d),n(h),u&&clearTimeout(u)}})}var a={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=o})},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),u=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},c=i(2),d=r(c),h=i(73),f=i(78),p=r(f),g=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,m=/^https?:\/\/player.vimeo.com/,y={api:1,autoplay:0,badge:0,byline:0,fullscreen:1,portrait:0,title:0},v=function(e){function t(){var e,i,r,a;n(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onMessage=function(e){if(m.test(e.origin)){r.origin=r.origin||e.origin;var t=JSON.parse(e.data);"ready"===t.event&&(r.postMessage("getDuration"),r.postMessage("addEventListener","playProgress"),r.postMessage("addEventListener","loadProgress"),r.postMessage("addEventListener","play"),r.postMessage("addEventListener","pause"),r.postMessage("addEventListener","finish")),"playProgress"===t.event&&(r.fractionPlayed=t.data.percent),"loadProgress"===t.event&&(r.fractionLoaded=t.data.percent),"play"===t.event&&r.onPlay(),"pause"===t.event&&r.props.onPause(),"finish"===t.event&&r.onEnded(),"getDuration"===t.method&&(r.duration=t.value,r.onReady())}},r.onEnded=function(){var e=r.props,t=e.loop,i=e.onEnded;t&&r.seekTo(0),i()},r.postMessage=function(e,t){if(r.origin){var i=JSON.stringify({method:e,value:t});return r.iframe.contentWindow&&r.iframe.contentWindow.postMessage(i,r.origin)}},r.ref=function(e){r.iframe=e},a=i,o(r,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,i=e.url,r=e.vimeoConfig;window.addEventListener("message",this.onMessage,!1),!i&&r.preload&&(this.preloading=!0,this.load("https://vimeo.com/127250231")),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.onMessage,!1),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getIframeParams",value:function(){return s({},y,this.props.vimeoConfig.iframeParams)}},{key:"load",value:function(e){var t=e.match(g)[3];this.iframe.src="https://player.vimeo.com/video/"+t+"?"+(0,h.stringify)(this.getIframeParams())}},{key:"play",value:function(){this.postMessage("play")}},{key:"pause",value:function(){this.postMessage("pause")}},{key:"stop",value:function(){this.iframe.src=""}},{key:"seekTo",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seekTo",this).call(this,e),this.postMessage("seekTo",this.duration*e)}},{key:"setVolume",value:function(e){this.postMessage("setVolume",e)}},{key:"setPlaybackRate",value:function(e){return null}},{key:"getDuration",value:function(){return this.duration}},{key:"getFractionPlayed",value:function(){return this.fractionPlayed||null}},{key:"getFractionLoaded",value:function(){return this.fractionLoaded||null}},{key:"render",value:function(){var e=this.getIframeParams(),t=e.fullscreen,i={display:this.props.url?"block":"none",width:"100%",height:"100%"};return d.default.createElement("iframe",{ref:this.ref,frameBorder:"0",style:i,allowFullScreen:t})}}],[{key:"canPlay",value:function(e){return g.test(e)}}]),t}(p.default);v.displayName="Vimeo",t.default=v,e.exports=t.default},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(48),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=/^https?:\/\/streamable.com\/([a-z0-9]+)$/,c={},d=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"getData",value:function(e){var t=this.props.onError,i=e.match(u)[1];return c[i]?Promise.resolve(c[i]):window.fetch("https://api.streamable.com/videos/"+i).then(function(e){if(200===e.status)return c[i]=e.json(),c[i];t(new Error("Streamable track could not be resolved"))})}},{key:"load",value:function(e){var t=this,i=this.props.onError;this.stop(),this.getData(e).then(function(e){t.mounted&&(t.player.src=e.files.mp4.url)},i)}}],[{key:"canPlay",value:function(e){return u.test(e)}}]),t}(l.default);d.displayName="Streamable",t.default=d,e.exports=t.default},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(48),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=/^https?:\/\/vid.me\/([a-z0-9]+)$/,c={},d=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"getData",value:function(e){var t=this.props.onError,i=e.match(u)[1];return c[i]?Promise.resolve(c[i]):window.fetch("https://api.vid.me/videoByUrl/"+i).then(function(e){if(200===e.status)return c[i]=e.json(),c[i];t(new Error("Vidme track could not be resolved"))})}},{key:"load",value:function(e){var t=this,i=this.props.onError;this.stop(),this.getData(e).then(function(e){t.mounted&&(t.player.src=e.video.complete_url)},i)}}],[{key:"canPlay",value:function(e){return u.test(e)}}]),t}(l.default);d.displayName="Vidme",t.default=d,e.exports=t.default},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(10),s=r(a),l=i(4),u=r(l),c=i(0),d=r(c),h=i(1),f=r(h),p=i(5),g=r(p),m=i(6),y=r(m),v=i(2),b=r(v),w=function(e){function t(){return(0,d.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"getTextDimensions",value:function(){var e=this.props,t=e.style,i=(e.styleParams,e.cubeRatio),r=t.ratio<i-.01,n="translate(0, 0) scale("+(r?t.height/t.maxHeight:t.width/t.maxWidth)+")";return{margin:Math.floor(t.maxHeight-t.height)/-2+"px "+Math.floor(t.maxWidth-t.width)/-2+"px",width:t.maxWidth+"px",height:t.maxHeight+"px",WebkitTransform:n,MsTransform:n,OTransform:n,transform:n}}},{key:"componentWillMount",value:function(){this.props.actions.setItemLoaded()}},{key:"render",value:function(){var e=this.props,t=e.visible,i=e.id,r=e.styleParams,n=e.html,a=e.style,l=e.actions,u=this.getTextDimensions(),c={dangerouslySetInnerHTML:{__html:n}},d={style:{dimensions:u}},h={style:(0,s.default)(u,"fit"===r.cubeType?{backgroundColor:a.bgColor}:{})},f=t||r.hasThumbnails,p=f?(0,o.default)({},c,h):(0,o.default)({},d);return b.default.createElement("div",(0,o.default)({className:"gallery-item-visible gallery-item gallery-item-loaded text-item",key:"item-text-"+i,onTouchStart:l.handleItemMouseDown,onTouchEnd:l.handleItemMouseUp,"data-hook":"text-item"},p))}}]),t}(b.default.Component);t.default=w},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(3),y=r(m),v=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return g.default.createElement("div",{key:"video-and-hover-container"+this.props.id},g.default.createElement("div",{className:"gallery-item-visible gallery-item-preloaded gallery-item-video gallery-item",key:"video-placeholder-container-"+this.props.id,style:y.default.deviceHasMemoryIssues()?{}:{backgroundImage:"url("+this.props.resized_url.thumb+")"}},this.props.hover,g.default.createElement("div",{className:"gallery--placeholder-item",key:"video-"+this.props.id})))}}]),t}(g.default.Component);t.default=v},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(3),y=r(m),v=i(7),b=r(v),w=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getHoverClass",value:function(){var e=this.props,t=e.styleParams,i=e.forceShowHover,r=e.isMultisharing,n=e.itemType,o="video"===n?["gallery-item-hover-video"]:["gallery-item-hover"];return(t.isSlider||t.isSlideshow||t.hasThumbnails)&&o.push(t.galleryVerticalAlign),o.push("fullscreen-"+(t.fullscreen?"enabled":"disabled")),b.default.isUndefined(t.itemOpacity)&&o.push("default"),i?o.push("hovered"):y.default.isMobile()&&o.push("hide-hover"),r&&o.push("hovered no-hover-bg"),o.join(" ")}},{key:"getMultishareHover",value:function(){var e=this.props,t=e.isVideo,i=e.isMultishared;return g.default.createElement("div",{className:"gallery-item-social"+(t?" gradient-top":""),"data-hook":"multisharing-hover"},g.default.createElement("div",{className:"gallery-item-social-button gallery-item-social-multishare visible "+(y.default.isMobile()?"mobile":"")},i?g.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},g.default.createElement("path",{className:"gallery-item-svg-foreground",d:"M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0ZM8.59,13.46l-4-4,.71-.71,3.16,3.16,4.44-6.67.83.55Z"}),g.default.createElement("polygon",{className:"gallery-item-svg-background",points:"8.43 11.89 5.27 8.74 4.57 9.44 8.59 13.46 13.71 5.78 12.87 5.22 8.43 11.89"})):g.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},g.default.createElement("path",{className:"gallery-item-svg-foreground",d:"M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"}))))}},{key:"render",value:function(){var e=this.props,t=e.shouldHover,i=e.isMultisharing,r=e.imageDimensions,n=e.actions,o=e.idx;if(!t)return null;var a=this.getHoverClass();return g.default.createElement("div",{className:a,key:"item-hover-"+o,"data-hook":"item-hover-"+o,style:r,onClick:i&&n.toggleMultishareSelection,onTouchStart:n.handleItemMouseDown,onTouchEnd:n.handleItemMouseUp},i?this.getMultishareHover():this.props.children)}}]),t}(g.default.Component);t.default=w},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(117),y=r(m),v=i(118),b=r(v),w=i(264),_=r(w),S=i(265),I=r(S),k=i(49),x=r(k),E=i(3),T=r(E),P=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getElementClassNames",value:function(){var e=this.props,t=e.showShare,i=e.styleParams,r=e.isNarrow,n=["gallery-item-text"];return t&&n.push("hidden"),i.showArrows&&n.push("padded-horizontal"),i.allowMultishare&&n.push("push-down"),r&&n.push("narrow-item"),n.join(" ")}},{key:"allowAnyAction",value:function(){var e=this.props.styleParams;return e.loveButton||e.allowSocial||e.allowDownload}},{key:"getElementStyle",value:function(){var e=this.props,t=e.styleParams,i=e.style,r=!t.isSlideshow&&!t.isSlider&&!t.hasThumbnails,n="center"===i.justifyContent,o={justifyContent:t.galleryVerticalAlign,alignItems:t.galleryHorizontalAlign,textAlign:t.galleryTextAlign};return r&&this.allowAnyAction()&&(o.paddingBottom=45),n&&(o.marginTop=i.height/15),o}},{key:"getItemTexts",value:function(){var e=this,t=this.props,i=t.title,r=t.description,n=t.id,o=t.styleParams,a=t.style,s=t.isSmallItem,l=t.isNarrow,u=t.shouldShowButton,c=i&&!s&&o.allowTitle&&o.titlePlacement===x.default.placements.SHOW_ON_HOVER,d=!s&&o.allowDescription&&r,h=d?{}:this.allowAnyAction()?{marginBottom:20}:{marginBottom:0},f=c&&g.default.createElement(b.default,{key:"item-title-"+n,title:i,style:h}),p=d&&g.default.createElement(_.default,{description:r,key:"item-description-"+n}),m=u&&g.default.createElement(y.default,{type:"button",styleParams:o,style:a,small:l});if(!f&&!p&&!m)return null;var v=this.getElementStyle(),w=this.getElementClassNames();return g.default.createElement("div",{style:v,ref:function(t){return e.container=t},className:w,dir:"auto"},f,p,m)}},{key:"tryFixLineHeight",value:function(){try{I.default.fix(this.props,this.container)}catch(e){T.default.isVerbose()&&console.error("Error on componentDidUpdate",e)}}},{key:"componentDidUpdate",value:function(e){I.default.shouldFix(e,this.props)&&this.tryFixLineHeight()}},{key:"componentDidMount",value:function(){var e=this;this.tryFixLineHeight(),setTimeout(function(){e.tryFixLineHeight()},1e3)}},{key:"render",value:function(){return this.getItemTexts()}}]),t}(g.default.Component);t.default=P},function(e,t,i){"use strict";function r(){return o.default.createElement("svg",{className:"buy-icon",xmlns:"http://www.w3.org/2000/svg",width:"38",height:"34",viewBox:"0 0 38 34"},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{stroke:"currentColor",d:"M.7870039 2.59301758h6.9136797l3.7205137 22.89656932 22.3489443.012",strokeLinecap:"round",strokeLinejoin:"round"}),o.default.createElement("path",{stroke:"currentColor",d:"M28.0140389 4.49572754h9.017334L34.1188973 19.4727783H11.0089119",strokeLinecap:"round",strokeLinejoin:"round"}),o.default.createElement("path",{stroke:"currentColor",d:"M15.002193 28.5c1.3971616 0 2.502193 1.1042242 2.502193 2.5s-1.1050314 2.5-2.502193 2.5S12.5 32.3957758 12.5 31s1.1050314-2.5 2.502193-2.5zM27.5 31c0-1.3957758 1.1050314-2.5 2.502193-2.5s2.502193 1.1042242 2.502193 2.5-1.1050314 2.5-2.502193 2.5S27.5 32.3957758 27.5 31z"}),o.default.createElement("path",{fill:"currentColor",d:"M23 .50625185V11.4270815c0 .2795952-.2319336.5062518-.5.5062518-.2761424 0-.5-.2261351-.5-.5062518V.50625185C22 .22665667 22.2319336 0 22.5 0c.2761424 0 .5.2261351.5.50625185zM8 4h9v1H8z"}),o.default.createElement("path",{fill:"currentColor",d:"M25.53553353 8.0000001l.7071068.7071068-3.53553392 3.5355339-.70710676-.7071068z"}),o.default.createElement("path",{fill:"currentColor",d:"M19.0000001 8.70710647l.7071068-.7071068 3.5355339 3.53553392-.7071068.70710676z"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=i(2),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,i){var r=i(260);e.exports=r},function(e,t,i){var r,n;!function(o,a){r=[i(261)],void 0!==(n=function(e){return o.W=a(e)}.apply(t,r))&&(e.exports=n)}(this,function(e){"use strict";var e=e||{};return e.BI=e.BI||{},e.BI.ErrorSeverity={RECOVERABLE:10,WARNING:20,ERROR:30,FATAL:40},e.BI.Categories={EDITOR:1,VIEWER:2,TIMEOUTS:3,SERVER:4},e.BI.initialLoadIsReported=!1,e.BI.Logger=function(){function t(){return(new Date).getTime()}function i(){return""+t()+a++}function r(){var e=window.performance&&window.performance.now?window.performance.now():-1;return Math.round(e)}function n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var r in i)e[r]=i[r]}return e}function o(t){function i(e,t){var i={src:{type:"number"},evid:{type:"number"}},r=n({},l,m.defaultEventArgs,e),o=m.schemaValidators||[];if(o.length>0&&!o.some(function(e){return e.match(r)&&(e.execute(r)||!0)}))throw new Error("No validator accepted the event");s(r,["evid"],i)&&g(r,t)}function r(t,i){var r=["evid","cat","iss","sev","errc","ver"],o={src:{type:"number"},evid:{type:"number",values:[d.ERROR]},cat:{type:"number",values:[e.BI.Categories.EDITOR,e.BI.Categories.VIEWER,e.BI.Categories.TIMEOUTS,e.BI.Categories.SERVER]},iss:{type:"number"},sev:{type:"number",values:[e.BI.ErrorSeverity.RECOVERABLE,e.BI.ErrorSeverity.WARNING,e.BI.ErrorSeverity.ERROR,e.BI.ErrorSeverity.FATAL]},errc:{type:"number"},httpc:{type:"number"},ver:{type:"string",maxLength:16},errscp:{type:"string",subStr:64},trgt:{type:"string",subStr:64},gsi:{type:"string",length:36},ts:{type:"number"},uid:{type:"number"},ut:{type:"string",maxLength:16},did:{type:"string",maxLength:36},cid:{type:"string",length:36},lng:{type:"string",maxLength:5},dsc:{type:"string",subStr:512}},a=n({},u,m.defaultErrorArgs,t,{evid:d.ERROR});s(a,r,o)&&g(a,i)}function o(e,t,r){var o={view:{type:"string"}},a=n({},t,{evid:d.ON_READY,view:e});s(a,["view"],o)&&i(a,r)}function a(e,t,r){var o={view:{type:"string"}},a=n({},t,{evid:d.ROUTE_CHANGE,view:e});s(a,["view"],o)&&i(a,r)}function s(e,t,i){var r=t.slice(0);for(var n in e){var o=i[n]||{};if(e[n]=v.parse(e[n],o),!v.valid(e[n],o))return void m.error("Bad event param (key: "+n+", value: "+e[n]+")");var a;(a=r.indexOf(n))>-1&&r.splice(a,1)}return!(r.length>0)||(m.error("Missing required params: "+r.join(", ")),!1)}function h(e,t){var i=e.match(/\?./)?"&":"?";return e.replace(/\?$/,"")+i+Object.keys(t).filter(function(e){return!m.removeUndefinedValues||void 0!==t[e]}).map(function(e){return[encodeURIComponent(e),"=",encodeURIComponent(t[e])].join("")}).join("&")}function f(e,t,i){var r=function(){i("pixel")},n=t||new Image(0,0);n.onload=r,n.onerror=r,n.src=e}function p(e,t){return!(!window.navigator||!window.navigator.sendBeacon)&&(window.navigator.sendBeacon(e)&&setTimeout(function(){t("beacon")},0))}function g(t,i){var r=t.adapter||m.adapter;delete t.adapter;var n=h(m.biUrl+r,t),o=i||function(){};e.BI.DryRun?setTimeout(o,0):m.useBeacon&&p(n,o)||f(n,m.image,o),y.url=n,y.callback=i}var m,y={url:void 0,assertEmpty:function(){if(void 0!==this.url)throw"last bi is not empty!!!"},resolve:function(){this.callback()},clear:function(){this.url=void 0}},v=new e.BI.FieldParsers(t.injector);return t.hostName&&(t.biUrl="//"+t.hostName+"/"),m=n({},c,t),{log:i,reportOnReady:o,reportRouteChange:a,error:r,getLastBiUrl:function(){return y}}}var a=0,s=t(),l={_:i,ms:r},u={_:i,ts:function(){return t()-s},cat:e.BI.Categories.VIEWER,sev:e.BI.ErrorSeverity.WARNING,iss:1,ver:"1"},c={hostName:"frog.wix.com",defaultEventArgs:{},defaultErrorArgs:{},biUrl:"//frog.wix.com/",schemaValidators:[],adapter:"",error:function(e){throw e}},d={ERROR:10,ON_READY:302,ROUTE_CHANGE:300};return o}(),e})},function(e,t,i){var r,n;!function(o,a){r=[i(262)],void 0!==(n=function(e){return o.W=a(e)}.apply(t,r))&&(e.exports=n)}(this,function(e){"use strict";var e=e||{};return e.BI=e.BI||{},e.BI.FieldParsers=function(e){var t={length:function(e,t){return e&&void 0!==e.length&&e.length===t},maxLength:function(e,t){return e&&void 0!==e.length&&e.length<=t},values:function(e,t){return t&&-1!==t.indexOf(e)},type:function(e,t){return e&&typeof e===t}},i={subStr:function(e,t){return e&&e.substr?e.substr(0,Math.min(e.length,t)):e}};this.valid=function(e,i){for(var r in i)if(t[r]&&!t[r](e,i[r]))return!1;return!0},this.parse=function(t,r){"function"==typeof t&&(t=e?e.invoke(t):t());for(var n in r)t=i[n]?i[n](t,r[n]):t;return t}},e})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return e.W=t()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(this,function(W){"use strict";var W=W||{};return W.BI=W.BI||{},W.BI.DomEventHandler=function(){function _extend(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var r in i)e[r]=i[r]}return e}function eventHandler(biLogger,args){function _safeGetEventParams(e,t,i){var r;return t&&t[e]?r=t[e]:(_options.error("Invalid event name"),r={}),_extend({},r,i)}function _log(e,t,i){var r=_safeGetEventParams(e,_options.eventMap,t);_biLogger.log(r,i)}function _error(e,t,i){var r=_safeGetEventParams(e,_options.errorMap,t);_biLogger.error(r,i)}function _getAttr(e,t){for(var i=0;i<e.attributes.length;i++)if(e.attributes[i].name===t)return e.attributes[i].value}function _handleTriggeredBiEvent(event){var eventName=_getAttr(event.target,_wixBiAttributeSelector);if(eventName){var eventArgsStr=_getAttr(event.target,_wixBiArgsAttribute),eventArgs=eventArgsStr?eval("eventArgs = "+eventArgsStr):{};_log(eventName,eventArgs)}}function _bind(){document.body.addEventListener("click",_handleTriggeredBiEvent)}function _unbind(){document.body.removeEventListener("click",_handleTriggeredBiEvent)}var _options,_biLogger=biLogger;return _options=_extend({},_initOptions,args),{bind:_bind,unbind:_unbind,log:_log,error:_error}}var _wixBiAttributeSelector="wix-bi",_wixBiArgsAttribute="wix-bi-args",_initOptions={eventMap:{},errorMap:{},error:function(e){throw e}};return eventHandler}(),W})},function(e,t,i){"use strict";function r(e){return Object.keys(n).reduce(function(t,i){return t[i]=n[i](e),t},{})}Object.defineProperty(t,"__esModule",{value:!0});var n={_msid:function(e){return e.Utils.getInstanceValue("metaSiteId")},_appId:function(e){return e.Utils.getInstanceValue("appDefId")},_instanceId:function(e){return e.Utils.getInstanceId()},_siteOwnerId:function(e){return e.Utils.getSiteOwnerId()},_siteMemberId:function(e){return e.Utils.getUid()||""},_visitorId:function(e){return e.Utils.getInstanceValue("aid")},_viewMode:function(e){return e.Utils.getViewMode()}};t.getBiContext=r},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.description;return g.default.createElement("div",{className:"gallery-item-description","data-hook":"item-description"},e.split("\n").map(function(e,t){return g.default.createElement("span",{key:t},e,g.default.createElement("br",null))}))}}]),t}(g.default.Component);t.default=m},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(7),d=r(c),h=i(3),f=r(h),p=function(){function e(){(0,s.default)(this,e)}return(0,u.default)(e,[{key:"getDimensions",value:function(e){var t=window.getComputedStyle(e),i=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),o=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return{width:e.clientWidth-r-n,height:e.clientHeight-i-o}}},{key:"saveCurrentDisplay",value:function(e){e&&e.setAttribute("data-display",this.getCss(e,"display"))}},{key:"getSavedDisplay",value:function(e){return e&&e.getAttribute("data-display")||"-webkit-box"}},{key:"removeElement",value:function(e){this.saveCurrentDisplay(e),this.setCss(e,{display:"none"})}},{key:"hideElement",value:function(e){var t=this.getSavedDisplay(e);this.setCss(e,{visibility:"hidden",display:t})}},{key:"showElement",value:function(e){var t=this.getSavedDisplay(e);this.setCss(e,{visibility:"visible",display:t})}},{key:"getCss",value:function(e,t){return window.getComputedStyle(e)[t]}},{key:"setCss",value:function(e,t){try{(0,o.default)(e.style,t)}catch(e){}}},{key:"shouldFix",value:function(e,t){var i=e.styleParams,r=e.title,n=e.description,o=e.isSmallItem,a=t.styleParams,s=t.title,l=t.description,u=t.isSmallItem;return i.isSlideshow!==a.isSlideshow||i.allowTitle!==a.allowTitle||i.allowDescription!==a.allowDescription||r!==s||n!==l||o!==u}},{key:"fix",value:function(e,t){if(!f.default.isTest()){var i=e.styleParams,r=e.title,n=e.description,o=e.isSmallItem;if(t&&!i.isSlideshow){var a=this.getDimensions(t),s=a.height,l=t.getElementsByClassName("custom-button-wrapper"),u=t.getElementsByClassName("gallery-item-title"),c=t.getElementsByClassName("gallery-item-description"),h=l.length>0,p=h&&l[0],g=u.length>0&&u[0],m=c.length>0&&c[0],y=a.width<135;if(this.hideElement(g),this.hideElement(m),this.hideElement(p),h){this.showElement(p);var v=this.getDimensions(p).height;s+30<v?this.removeElement(p):y?this.setCss(p.querySelector("button"),{"min-width":"0px","max-width":"135px"}):a.width<190&&this.setCss(p.querySelector("button"),{"min-width":"135px","max-width":a.width+"px"});!d.default.isNaN(v)&&(s-=v,(s-=20)<0&&(s=0))}if(r&&!o&&i.allowTitle&&(this.showElement(g),this.setCss(g,{overflow:"visible"}),1===u.length)){var b=parseInt(g.clientHeight),w=parseInt(this.getCss(g,"line-height")),_=Math.floor(b/w),S=Math.floor(s/w);if(0===S)this.removeElement(g);else{this.setCss(g,{overflow:"hidden"});S<=_?(this.setCss(g,{"-webkit-line-clamp":S+""}),b=w*S):(this.setCss(g,{"-webkit-line-clamp":"none"}),b=w*_);s>b?s-=b:s=0}}if(m&&!o&&i.allowDescription&&n&&s>0){this.showElement(m),s-=40,s<0&&(s=0);var I=parseInt(this.getCss(m,"line-height")),k=Math.floor(s/I);0===k?this.removeElement(m):this.setCss(m,{overflow:"hidden","-webkit-line-clamp":k+""})}}}}}]),e}();t.default=new p},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=r(n),a=i(4),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(5),f=r(h),p=i(6),g=r(p),m=i(2),y=r(m),v=i(3),b=r(v),w=i(119),_=r(w),S=i(22),I=i(29),k=i(7),x=r(k),E=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,d.default)(t,[{key:"getSocialShare",value:function(){var e=this.props,t=e.styleParams,i=e.id,r=e.actions;if(t.allowSocial){var n=y.default.createElement("i",{className:"block-fullscreen progallery-svg-font-icons-share-store"});if(b.default.isSite()){var o=t.isSlideshow?r.getShare():"";return y.default.createElement("div",{className:"block-fullscreen gallery-item-social-share gallery-item-social-button","data-hook":"gallery-item-social-button",key:"item-social-share-"+i,onClick:function(e){return r.toggleShare(e,!0)}},n,o)}return y.default.createElement("div",{className:"show-tooltip block-fullscreen gallery-item-social-share gallery-item-social-button","data-hook":"gallery-item-social-button",key:"item-social-share-"+i,onMouseOver:function(e){return S.itemActions.showTooltip(e,"Gallery_Sharing_Disabled_In_Editor")},onMouseOut:function(){return S.itemActions.hideTooltip()},onClick:function(e){return e.stopPropagation()}},n)}return""}},{key:"getMultishare",value:function(){var e=this.props,t=e.styleParams,i=e.id,r=e.actions;return!!t.allowMultishare&&(b.default.isSite()?y.default.createElement("div",{className:"block-fullscreen gallery-item-social-multishare gallery-item-social-button",key:"item-social-multishare-"+i,onClick:r.toggleMultishareSelection},y.default.createElement("svg",{className:"block-fullscreen",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},y.default.createElement("path",{className:"gallery-item-svg-foreground",d:"M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"}))):y.default.createElement("div",{className:"show-tooltip block-fullscreen gallery-item-social-multishare gallery-item-social-button ",onMouseOver:function(e){return S.itemActions.showTooltip(e,"Gallery_Sharing_Disabled_In_Editor")},onMouseOut:function(){return S.itemActions.hideTooltip()},key:"item-social-multishare-"+i},y.default.createElement("svg",{className:"block-fullscreen inactive",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},y.default.createElement("path",{className:"gallery-item-svg-foreground",d:"M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"}))))}},{key:"getLoveButton",value:function(){var e=this.props,t=e.styleParams,i=e.love,r=x.default.pick(this.props,["id","item","idx","styleParams","hashtag","love"]);return t.loveButton?y.default.createElement(_.default,(0,o.default)({},r,{itemId:this.props.photoId,layout:t.isSlideshow?"slideshow":"gallery",showCounter:i&&i.showCounter})):""}},{key:"getDownload",value:function(){var e=x.default.pick(this.props,["html","style"]),t=this.props,i=t.styleParams,r=t.isDemo,n=t.type,a=t.download_url;if(i.allowDownload&&!b.default.isiOS()&&(!b.default.isSite()||!r)){var s="block-fullscreen gallery-item-social-download "+(i.allowSocial?"":" pull-right ")+" gallery-item-social-button",l=y.default.createElement("i",{className:"block-fullscreen progallery-svg-font-icons-download"+(r?" inactive":"")}),u={className:s,"data-hook":"item-download"},c=a.mp4||a.webm||a.img,d={target:"_blank",href:c,onClick:function(e){e.stopPropagation(),e.preventDefault(),window.location.assign(c),I.logger.trackBi(I.logger.biEvents.download,{origin:"gallery"})}};if("text"===n)return y.default.createElement("a",(0,o.default)({},u,{onClick:function(t){t.stopPropagation(),S.itemActions.downloadTextItem(e,"gallery")}}),l);var h=r?{onMouseOver:function(e){return S.itemActions.showTooltip(e,"Gallery_Hover_Download_FreeImages_Text")},onMouseOut:function(){return S.itemActions.hideTooltip()}}:d;return y.default.createElement("a",(0,o.default)({},u,{download:"download",role:"button"},h),l)}return""}},{key:"render",value:function(){var e=this.props,t=e.styleParams,i=e.id,r=e.showShare,n=(e.actions,e.isSmallItem),o=e.isNarrow,a=e.isShort,s=e.isVerticalContainer,l=this.getSocialShare(),u=this.getMultishare(),c=this.getLoveButton(),d=this.getDownload(),h=t.hasThumbnails,f=[[r,"hidden"],[n,"small-item"],[a,"short-item"],[o,"narrow-item"],[s,"vertical-item"],[h,"with-arrows"]].filter(function(e){return e[0]}).map(function(e){return e[1]}).join(" ");return y.default.createElement("div",{className:"gallery-item-social gallery-item-direction-"+t.galleryTextAlign+" "+f,key:"item-social-"+i,"data-hook":"item-social"},u,c,d,l)}}]),t}(y.default.Component);t.default=E},function(e,t,i){(function(t){var i,i;!function(t){e.exports=t()}(function(){var e;return function e(t,r,n){function o(s,l){if(!r[s]){if(!t[s]){var u="function"==typeof i&&i;if(!l&&u)return i(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return o(i||e)},d,d.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof i&&i,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(i,r,n){(function(t){!function(i){function o(e){throw new RangeError(R[e])}function a(e,t){for(var i=e.length,r=[];i--;)r[i]=t(e[i]);return r}function s(e,t){var i=e.split("@"),r="";return i.length>1&&(r=i[0]+"@",e=i[1]),e=e.replace(L,"."),r+a(e.split("."),t).join(".")}function l(e){for(var t,i,r=[],n=0,o=e.length;n<o;)t=e.charCodeAt(n++),t>=55296&&t<=56319&&n<o?(i=e.charCodeAt(n++),56320==(64512&i)?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),n--)):r.push(t);return r}function u(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=G(e>>>10&1023|55296),e=56320|1023&e),t+=G(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:I}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,i){var r=0;for(e=i?N(e/T):e>>1,e+=N(e/t);e>D*x>>1;r+=I)e=N(e/D);return N(r+(D+1)*e/(e+E))}function f(e){var t,i,r,n,a,s,l,d,f,p,g=[],m=e.length,y=0,v=C,b=P;for(i=e.lastIndexOf(M),i<0&&(i=0),r=0;r<i;++r)e.charCodeAt(r)>=128&&o("not-basic"),g.push(e.charCodeAt(r));for(n=i>0?i+1:0;n<m;){for(a=y,s=1,l=I;n>=m&&o("invalid-input"),d=c(e.charCodeAt(n++)),(d>=I||d>N((S-y)/s))&&o("overflow"),y+=d*s,f=l<=b?k:l>=b+x?x:l-b,!(d<f);l+=I)p=I-f,s>N(S/p)&&o("overflow"),s*=p;t=g.length+1,b=h(y-a,t,0==a),N(y/t)>S-v&&o("overflow"),v+=N(y/t),y%=t,g.splice(y++,0,v)}return u(g)}function p(e){var t,i,r,n,a,s,u,c,f,p,g,m,y,v,b,w=[];for(e=l(e),m=e.length,t=C,i=0,a=P,s=0;s<m;++s)(g=e[s])<128&&w.push(G(g));for(r=n=w.length,n&&w.push(M);r<m;){for(u=S,s=0;s<m;++s)(g=e[s])>=t&&g<u&&(u=g);for(y=r+1,u-t>N((S-i)/y)&&o("overflow"),i+=(u-t)*y,t=u,s=0;s<m;++s)if(g=e[s],g<t&&++i>S&&o("overflow"),g==t){for(c=i,f=I;p=f<=a?k:f>=a+x?x:f-a,!(c<p);f+=I)b=c-p,v=I-p,w.push(G(d(p+b%v,0))),c=N(b/v);w.push(G(d(c,0))),a=h(i,y,r==n),i=0,++r}++i,++t}return w.join("")}function g(e){return s(e,function(e){return O.test(e)?f(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return A.test(e)?"xn--"+p(e):e})}var y="object"==typeof n&&n&&!n.nodeType&&n,v="object"==typeof r&&r&&!r.nodeType&&r,b="object"==typeof t&&t;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var w,_,S=2147483647,I=36,k=1,x=26,E=38,T=700,P=72,C=128,M="-",O=/^xn--/,A=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=I-k,N=Math.floor,G=String.fromCharCode;if(w={version:"1.3.2",ucs2:{decode:l,encode:u},decode:f,encode:p,toASCII:m,toUnicode:g},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(y&&v)if(r.exports==y)v.exports=w;else for(_ in w)w.hasOwnProperty(_)&&(y[_]=w[_]);else i.punycode=w}(this)}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,i){function r(e,t,i){!e.defaultView||t===e.defaultView.pageXOffset&&i===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,i)}function n(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){s("Unable to copy canvas content from",e,t)}}function o(e,t){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;)!0!==t&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(o(r,t)),r=r.nextSibling;return 1===e.nodeType&&(i._scrollTop=e.scrollTop,i._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?n(e,i):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value)),i}function a(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)a(t),t=t.nextSibling}}var s=e("./log");t.exports=function(e,t,i,n,s,l,u){var c=o(e.documentElement,s.javascriptEnabled),d=t.createElement("iframe");return d.className="html2canvas-container",d.style.visibility="hidden",d.style.position="fixed",d.style.left="-10000px",d.style.top="0px",d.style.border="0",d.width=i,d.height=n,d.scrolling="no",t.body.appendChild(d),new Promise(function(t){var i=d.contentWindow.document;d.contentWindow.onload=d.onload=function(){var e=setInterval(function(){i.body.childNodes.length>0&&(a(i.documentElement),clearInterval(e),"view"===s.type&&(d.contentWindow.scrollTo(l,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||d.contentWindow.scrollY===u&&d.contentWindow.scrollX===l||(i.documentElement.style.top=-u+"px",i.documentElement.style.left=-l+"px",i.documentElement.style.position="absolute")),t(d))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),r(e,l,u),i.replaceChild(i.adoptNode(c),i.documentElement),i.close()})}},{"./log":13}],3:[function(e,t,i){function r(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}r.prototype.darken=function(e){var t=1-e;return new r([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var n=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(e){var t=null;return null!==(t=e.match(n))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(e){var t=null;return null!==(t=e.match(s))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(e){e=e.toLowerCase();var t=l[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=r},{}],4:[function(t,i,r){function n(e,t){var i=I++;if(t=t||{},t.logging&&(y.options.logging=!0,y.options.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:f,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=t.width?t.width:window.innerWidth,n=null!=t.height?t.height:window.innerHeight;return w(d(e),t.proxy,document,r,n,t).then(function(e){return a(e.contentWindow.document.documentElement,e,t,r,n)})}var s=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return s.setAttribute(S+i,i),o(s.ownerDocument,t,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,i).then(function(e){return"function"==typeof t.onrendered&&(y("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function o(e,t,i,r,n){return b(e,e,i,r,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(o){y("Document cloned");var s=S+n,l="["+s+"='"+n+"']";e.querySelector(l).removeAttribute(s);var u=o.contentWindow,c=u.document.querySelector(l);return("function"==typeof t.onclone?Promise.resolve(t.onclone(u.document)):Promise.resolve(!0)).then(function(){return a(c,o,t,i,r)})})}function a(e,t,i,r,n){var o=t.contentWindow,a=new h(o.document),d=new p(i,a),f=_(e),m="view"===i.type?r:u(o.document),v="view"===i.type?n:c(o.document),b=new i.renderer(m,v,d,i,document);return new g(e,b,a,d,i).ready.then(function(){y("Finished rendering");var r;return r="view"===i.type?l(b.canvas,{width:b.canvas.width,height:b.canvas.height,top:0,left:0,x:0,y:0}):e===o.document.body||e===o.document.documentElement||null!=i.canvas?b.canvas:l(b.canvas,{width:null!=i.width?i.width:f.width,height:null!=i.height?i.height:f.height,top:f.top,left:f.left,x:0,y:0}),s(t,i),r})}function s(e,t){t.removeContainer&&(e.parentNode.removeChild(e),y("Cleaned up container"))}function l(e,t){var i=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,t.left)),n=Math.min(e.width,Math.max(1,t.left+t.width)),o=Math.min(e.height-1,Math.max(0,t.top)),a=Math.min(e.height,Math.max(1,t.top+t.height));i.width=t.width,i.height=t.height;var s=n-r,l=a-o;return y("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",l),y("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",o),i.getContext("2d").drawImage(e,r,o,s,l,t.x,t.y,s,l),i}function u(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function c(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function d(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}var h=t("./support"),f=t("./renderers/canvas"),p=t("./imageloader"),g=t("./nodeparser"),m=t("./nodecontainer"),y=t("./log"),v=t("./utils"),b=t("./clone"),w=t("./proxy").loadUrlDocument,_=v.getBounds,S="data-html2canvas-node",I=0;n.CanvasRenderer=f,n.NodeContainer=m,n.log=y,n.utils=v;var k="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;i.exports=k,"function"==typeof e&&e.amd&&e("html2canvas",[],function(){return k})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t,i){function r(e){if(this.src=e,n("DummyImageContainer for",e),!this.promise||!this.image){n("Initiating DummyImageContainer"),r.prototype.image=new Image;var t=this.image;r.prototype.promise=new Promise(function(e,i){t.onload=e,t.onerror=i,t.src=o(),!0===t.complete&&e(t)})}}var n=e("./log"),o=e("./utils").smallImage;t.exports=r},{"./log":13,"./utils":26}],6:[function(e,t,i){function r(e,t){var i,r,o=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");o.style.visibility="hidden",o.style.fontFamily=e,o.style.fontSize=t,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),a.src=n(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),o.appendChild(s),o.appendChild(a),i=a.offsetTop-s.offsetTop+1,o.removeChild(s),o.appendChild(document.createTextNode("Hidden Text")),o.style.lineHeight="normal",a.style.verticalAlign="super",r=a.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=i,this.lineWidth=1,this.middle=r}var n=e("./utils").smallImage;t.exports=r},{"./utils":26}],7:[function(e,t,i){function r(){this.data={}}var n=e("./font");r.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new n(e,t)),this.data[e+"-"+t]},t.exports=r},{"./font":6}],8:[function(e,t,i){function r(t,i,r){this.image=null,this.src=t;var n=this,a=o(t);this.promise=(i?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(r.proxy,a,r)).then(function(t){return e("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(e){return n.image=e})}var n=e("./utils"),o=n.getBounds,a=e("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(e,t,i){var r=this.src;return a(r.src,e,r.ownerDocument,t.width,t.height,i)},t.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t,i){function r(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=r},{}],10:[function(e,t,i){function r(e,t){this.src=e,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(r,n){i.image.onload=r,i.image.onerror=n,t&&(i.image.crossOrigin="anonymous"),i.image.src=e,!0===i.image.complete&&r(i.image)})}t.exports=r},{}],11:[function(e,t,i){function r(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var n=e("./log"),o=e("./imagecontainer"),a=e("./dummyimagecontainer"),s=e("./proxyimagecontainer"),l=e("./framecontainer"),u=e("./svgcontainer"),c=e("./svgnodecontainer"),d=e("./lineargradientcontainer"),h=e("./webkitgradientcontainer"),f=e("./utils").bind;r.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},r.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.addImage=function(e,t){return function(i){i.args.forEach(function(r){this.imageExists(e,r)||(e.splice(0,0,t.call(this,i)),n("Added image #"+e.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(e){return"none"!==e.method},r.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new o(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new o(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(t,!0):this.options.proxy?new s(t,this.options.proxy):new a(t):new u(t)}return"linear-gradient"===e.method?new d(e):"gradient"===e.method?new h(e):"svg"===e.method?new c(e.args[0],this.support.svg):"IFRAME"===e.method?new l(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new a(e)},r.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||u.prototype.isInline(e)},r.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},r.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},r.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},r.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new a(e.src).promise.then(function(t){e.image=t})})},r.prototype.get=function(e){var t=null;return this.images.some(function(i){return(t=i).src===e})?t:null},r.prototype.fetch=function(e){return this.images=e.reduce(f(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){n("Succesfully loaded image #"+(t+1),e)},function(i){n("Failed loading image #"+(t+1),e,i)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),n("Finished searching images"),this},r.prototype.timeout=function(e,t){var i,r=Promise.race([e.promise,new Promise(function(r,o){i=setTimeout(function(){n("Timed out loading image",e),o(e)},t)})]).then(function(e){return clearTimeout(i),e});return r.catch(function(){clearTimeout(i)}),r},t.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t,i){function r(e){n.apply(this,arguments),this.type=n.TYPES.LINEAR;var t=r.REGEXP_DIRECTION.test(e.args[0])||!n.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var i=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=i;break;case"center":break;default:var n=.01*parseFloat(e,10);if(isNaN(n))break;0===t?(this.y0=n,this.y1=1-this.y0):(this.x0=n,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(n.REGEXP_COLORSTOP),i=+t[2],r=0===i?"%":t[3];return{color:new o(t[1]),stop:"%"===r?i/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(i,r){return null!==i.stop&&(e.stop=(i.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0)},this)},this)}var n=e("./gradientcontainer"),o=e("./color");r.prototype=Object.create(n.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(e,t,i){var r=function(){r.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-r.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},t.exports=r},{}],14:[function(e,t,i){function r(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function n(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function o(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function a(e){return-1!==e.toString().indexOf("%")}function s(e){return e.replace("px","")}function l(e){return parseFloat(e)}var u=e("./color"),c=e("./utils"),d=c.getBounds,h=c.parseBackgrounds,f=c.offsetBounds;r.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},r.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],i=this.css(e);return void 0===i&&t.some(function(t){return void 0!==(i=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===i?null:i},r.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},r.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},r.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new u(this.css(e)))},r.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},r.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},r.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=h(this.css("backgroundImage")))},r.prototype.cssList=function(e,t){var i=(this.css(e)||"").split(",");return i=i[t||0]||i[0]||"auto",i=i.trim().split(" "),1===i.length&&(i=[i[0],a(i[0])?"auto":i[0]]),i},r.prototype.parseBackgroundSize=function(e,t,i){var r,n,o=this.cssList("backgroundSize",i);if(a(o[0]))r=e.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=e.width/e.height,l=t.width/t.height;return s<l^"contain"===o[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}r=parseInt(o[0],10)}return n="auto"===o[0]&&"auto"===o[1]?t.height:"auto"===o[1]?r/t.width*t.height:a(o[1])?e.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=n/t.height*t.width),{width:r,height:n}},r.prototype.parseBackgroundPosition=function(e,t,i,r){var n,o,s=this.cssList("backgroundPosition",i);return n=a(s[0])?(e.width-(r||t).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?n/t.width*t.height:a(s[1])?(e.height-(r||t).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(n=o/t.height*t.width),{left:n,top:o}},r.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},r.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var i=e.match(this.TEXT_SHADOW_PROPERTY),r=0;i&&r<i.length;r++){var n=i[r].match(this.TEXT_SHADOW_VALUES);t.push({color:new u(n[0]),offsetX:n[1]?parseFloat(n[1].replace("px","")):0,offsetY:n[2]?parseFloat(n[2].replace("px","")):0,blur:n[3]?n[3].replace("px",""):0})}return t},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(s).map(l);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?o(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?f(this.node):d(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=n(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("\u2022")),0===e.length?this.node.placeholder||"":e},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=r},{"./color":3,"./utils":26}],15:[function(e,t,i){function r(e,t,i,r,n){F("Starting NodeParser"),this.renderer=t,this.options=n,this.range=null,this.support=i,this.renderQueue=[],this.stack=new Y(!0,1,e.ownerDocument,null);var o=new U(e,null);if(n.background&&t.rectangle(0,0,t.width,t.height,new q(n.background)),e===e.ownerDocument.documentElement){var a=new U(o.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=D([o].concat(this.getChildren(o)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new B,F("Fetched nodes, total:",this.nodes.length),F("Calculate overflow clips"),this.calculateOverflowClips(),F("Start fetching images"),this.images=r.fetch(this.nodes.filter(T)),this.ready=this.images.ready.then(X(function(){return F("Images loaded, starting parsing"),F("Creating stacking contexts"),this.createStackingContexts(),F("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),F("Render queue created with "+this.renderQueue.length+" items"),new Promise(X(function(e){n.async?"function"==typeof n.async?n.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function n(e){return e.parent&&e.parent.clip.length}function o(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function a(){}function s(e,t,i,r){return e.map(function(n,o){if(n.width>0){var a=t.left,s=t.top,l=t.width,u=t.height-e[2].width;switch(o){case 0:u=e[0].width,n.args=d({c1:[a,s],c2:[a+l,s],c3:[a+l-e[1].width,s+u],c4:[a+e[3].width,s+u]},r[0],r[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:a=t.left+t.width-e[1].width,l=e[1].width,n.args=d({c1:[a+l,s],c2:[a+l,s+u+e[2].width],c3:[a,s+u],c4:[a,s+e[0].width]},r[1],r[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:s=s+t.height-e[2].width,u=e[2].width,n.args=d({c1:[a+l,s+u],c2:[a,s+u],c3:[a+e[3].width,s],c4:[a+l-e[3].width,s]},r[2],r[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:l=e[3].width,n.args=d({c1:[a,s+u+e[2].width],c2:[a,s],c3:[a+l,s+e[0].width],c4:[a+l,s+u]},r[3],r[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return n})}function l(e,t,i,r){var n=(Math.sqrt(2)-1)/3*4,o=i*n,a=r*n,s=e+i,l=t+r;return{topLeft:c({x:e,y:l},{x:e,y:l-a},{x:s-o,y:t},{x:s,y:t}),topRight:c({x:e,y:t},{x:e+o,y:t},{x:s,y:l-a},{x:s,y:l}),bottomRight:c({x:s,y:t},{x:s,y:t+a},{x:e+o,y:l},{x:e,y:l}),bottomLeft:c({x:s,y:l},{x:s-o,y:l},{x:e,y:t+a},{x:e,y:t})}}function u(e,t,i){var r=e.left,n=e.top,o=e.width,a=e.height,s=t[0][0]<o/2?t[0][0]:o/2,u=t[0][1]<a/2?t[0][1]:a/2,c=t[1][0]<o/2?t[1][0]:o/2,d=t[1][1]<a/2?t[1][1]:a/2,h=t[2][0]<o/2?t[2][0]:o/2,f=t[2][1]<a/2?t[2][1]:a/2,p=t[3][0]<o/2?t[3][0]:o/2,g=t[3][1]<a/2?t[3][1]:a/2,m=o-c,y=a-f,v=o-h,b=a-g;return{topLeftOuter:l(r,n,s,u).topLeft.subdivide(.5),topLeftInner:l(r+i[3].width,n+i[0].width,Math.max(0,s-i[3].width),Math.max(0,u-i[0].width)).topLeft.subdivide(.5),topRightOuter:l(r+m,n,c,d).topRight.subdivide(.5),topRightInner:l(r+Math.min(m,o+i[3].width),n+i[0].width,m>o+i[3].width?0:c-i[3].width,d-i[0].width).topRight.subdivide(.5),bottomRightOuter:l(r+v,n+y,h,f).bottomRight.subdivide(.5),bottomRightInner:l(r+Math.min(v,o-i[3].width),n+Math.min(y,a+i[0].width),Math.max(0,h-i[1].width),f-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(r,n+b,p,g).bottomLeft.subdivide(.5),bottomLeftInner:l(r+i[3].width,n+b,Math.max(0,p-i[3].width),g-i[2].width).bottomLeft.subdivide(.5)}}function c(e,t,i,r){var n=function(e,t,i){return{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}};return{start:e,startControl:t,endControl:i,end:r,subdivide:function(o){var a=n(e,t,o),s=n(t,i,o),l=n(i,r,o),u=n(a,s,o),d=n(s,l,o),h=n(u,d,o);return[c(e,a,u,h),c(h,d,l,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,i.x,i.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",i.x,i.y,t.x,t.y,e.x,e.y])}}}function d(e,t,i,r,n,o,a){var s=[];return t[0]>0||t[1]>0?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),i[0]>0||i[1]>0?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",n[1].end.x,n[1].end.y]),n[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function h(e,t,i,r,n,o,a){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",o,a]),(i[0]>0||i[1]>0)&&e.push(["line",n[0].start.x,n[0].start.y])}function f(e){return e.cssInt("zIndex")<0}function p(e){return e.cssInt("zIndex")>0}function g(e){return 0===e.cssInt("zIndex")}function m(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function y(e){return e instanceof Y}function v(e){return e.node.data.trim().length>0}function b(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function w(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var i=e.css("border"+t+"Radius"),r=i.split(" ");return r.length<=1&&(r[1]=r[0]),r.map(A)})}function _(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function S(e){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e.css("position"))?e.css("zIndex"):"auto")}function I(e){return"static"!==e.css("position")}function k(e){return"none"!==e.css("float")}function x(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function E(e){var t=this;return function(){return!e.apply(t,arguments)}}function T(e){return e.node.nodeType===Node.ELEMENT_NODE}function P(e){return!0===e.isPseudoElement}function C(e){return e.node.nodeType===Node.TEXT_NODE}function M(e){return function(t,i){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(i.cssInt("zIndex")+e.indexOf(i)/e.length)}}function O(e){return e.getOpacity()<1}function A(e){return parseInt(e,10)}function L(e){return e.width}function R(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function D(e){return[].concat.apply([],e)}function N(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function G(e){for(var t,i=[],r=0,n=!1;e.length;)W(e[r])===n?(t=e.splice(0,r),t.length&&i.push(V.ucs2.encode(t)),n=!n,r=0):r++,r>=e.length&&(t=e.splice(0,r),t.length&&i.push(V.ucs2.encode(t)));return i}function W(e){return-1!==[32,13,10,9,45].indexOf(e)}function j(e){return/[^\u0000-\u00ff]/.test(e)}var F=e("./log"),V=e("punycode"),U=e("./nodecontainer"),H=e("./textcontainer"),z=e("./pseudoelementcontainer"),B=e("./fontmetrics"),q=e("./color"),Y=e("./stackingcontext"),Z=e("./utils"),X=Z.bind,J=Z.getBounds,K=Z.parseBackgrounds,Q=Z.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(T(e)){P(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],i=e.parseClip();i&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+i.left,e.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),e.clip=n(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,P(e)&&e.cleanDOM()}else C(e)&&(e.clip=n(e)?e.parent.clip:[]);P(e)||(e.bounds=null)},this)},r.prototype.asyncRenderer=function(e,t,i){i=i||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():i+20>Date.now()?this.asyncRenderer(e,t,i):setTimeout(X(function(){this.asyncRenderer(e,t)},this),0)},r.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(e,t){var i=e.createElement("style");i.innerHTML=t,e.body.appendChild(i)},r.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");i&&t.push(i),r&&t.push(r)}return D(t)},r.prototype.getPseudoElement=function(e,t){var i=e.computedStyle(t);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var r=N(i.content),n="url"===r.substr(0,3),a=document.createElement(n?"img":"html2canvaspseudoelement"),s=new z(a,e,t),l=i.length-1;l>=0;l--){var u=o(i.item(l));a.style[u]=i[u]}if(a.className=z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,n)return a.src=K(r)[0].args[0],[s];var c=document.createTextNode(r);return a.appendChild(c),[s,new H(c,s)]},r.prototype.getChildren=function(e){return D([].filter.call(e.node.childNodes,_).map(function(t){var i=[t.nodeType===Node.TEXT_NODE?new H(t,e):new U(t,e)].filter(R);return t.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==t.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))},r.prototype.newStackingContext=function(e,t){var i=new Y(t,e.getOpacity(),e.node,e.parent);e.cloneTo(i),(t?i.getParentStack(this):i.parent.stack).contexts.push(i),e.stack=i},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){T(e)&&(this.isRootElement(e)||O(e)||S(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):T(e)&&(I(e)&&g(e)||x(e)||k(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(e){return null===e.parent},r.prototype.sortStackingContexts=function(e){e.contexts.sort(M(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(e){return function(t,i,r){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var n=r.slice(0,i).join("").length;return this.getRangeBounds(e.node,n,t.length)}if(e.node&&"string"==typeof e.node.data){var o=e.node.splitText(t.length),a=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=o,a}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},r.prototype.getWrapperBounds=function(e,t){var i=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,n=e.cloneNode(!0);i.appendChild(e.cloneNode(!0)),r.replaceChild(i,e);var o=t?Q(i):J(i);return r.replaceChild(n,i),o},r.prototype.getRangeBounds=function(e,t,i){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,t),r.setEnd(e,t+i),r.getBoundingClientRect()},r.prototype.parse=function(e){var t=e.contexts.filter(f),i=e.children.filter(T),r=i.filter(E(k)),n=r.filter(E(I)).filter(E(m)),o=i.filter(E(I)).filter(k),s=r.filter(E(I)).filter(m),l=e.contexts.concat(r.filter(I)).filter(g),u=e.children.filter(C).filter(v),c=e.contexts.filter(p);t.concat(n).concat(o).concat(s).concat(l).concat(u).concat(c).forEach(function(e){this.renderQueue.push(e),y(e)&&(this.parse(e),this.renderQueue.push(new a))},this)},r.prototype.paint=function(e){try{e instanceof a?this.renderer.ctx.restore():C(e)?(P(e.parent)&&e.parent.appendToDOM(),this.paintText(e),P(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(F(e),this.options.strict)throw e}},r.prototype.paintNode=function(e){y(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},r.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(L))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var i=this.images.get(e.node);i?this.renderer.renderImage(e,t,e.borders,i):F("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var r=this.images.get(e.node.src);r?this.renderer.renderImage(e,t,e.borders,r):F("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},r.prototype.paintCheckbox=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height),r={width:i-1,height:i-1,top:t.top,left:t.left},n=[3,3],o=[n,n,n,n],a=[1,1,1,1].map(function(e){return{color:new q("#A5A5A5"),width:e}}),l=u(r,o,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new q("#DEDEDE")),this.renderer.renderBorders(s(a,r,l,o)),e.node.checked&&(this.renderer.font(new q("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("\u2714",r.left+i/6,r.top+i-1))},this)},r.prototype.paintRadio=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new q("#DEDEDE"),1,new q("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new q("#424242"))},this)},r.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var i=e.node.ownerDocument,r=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{r.style[t]=e.css(t)}catch(e){F("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var n=e.parseBounds();r.style.position="fixed",r.style.left=n.left+"px",r.style.top=n.top+"px",r.textContent=t,i.body.appendChild(r),this.paintText(new H(r.firstChild,e)),i.body.removeChild(r)}},r.prototype.paintText=function(e){e.applyTextTransform();var t=V.ucs2.decode(e.node.data),i=this.options.letterRendering&&!b(e)||j(e.node.data)?t.map(function(e){return V.ucs2.encode([e])}):G(t),r=e.parent.fontWeight(),n=e.parent.css("fontSize"),o=e.parent.css("fontFamily"),a=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),r,n,o),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){i.map(this.parseTextBounds(e),this).forEach(function(t,r){t&&(this.renderer.text(i[r],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(o,n)))},this)},this)},r.prototype.renderTextDecoration=function(e,t,i){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,e.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(e){var t=e.parseBounds(),i=w(e),r=["Top","Right","Bottom","Left"].map(function(t,i){var r=e.css("border"+t+"Style"),n=e.color("border"+t+"Color");"inset"===r&&n.isBlack()&&(n=new q([255,255,255,n.a]));var o=$[r]?$[r][i]:null;return{width:e.cssInt("border"+t+"Width"),color:o?n[o[0]](o[1]):n,args:null}}),n=u(t,i,r);return{clip:this.parseBackgroundClip(e,n,r,i,t),borders:s(r,t,n,i)}},r.prototype.parseBackgroundClip=function(e,t,i,r,n){var o=e.css("backgroundClip"),a=[];switch(o){case"content-box":case"padding-box":h(a,r[0],r[1],t.topLeftInner,t.topRightInner,n.left+i[3].width,n.top+i[0].width),h(a,r[1],r[2],t.topRightInner,t.bottomRightInner,n.left+n.width-i[1].width,n.top+i[0].width),h(a,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,n.left+n.width-i[1].width,n.top+n.height-i[2].width),h(a,r[3],r[0],t.bottomLeftInner,t.topLeftInner,n.left+i[3].width,n.top+n.height-i[2].width);break;default:h(a,r[0],r[1],t.topLeftOuter,t.topRightOuter,n.left,n.top),h(a,r[1],r[2],t.topRightOuter,t.bottomRightOuter,n.left+n.width,n.top),h(a,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,n.left+n.width,n.top+n.height),h(a,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,n.left,n.top+n.height)}return a},t.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,i){function r(e,t,i){var r="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var n=a(r),l=s(t,e,n);return r?c(l):o(i,l,n).then(function(e){return p(e.content)})}function n(e,t,i){var r="crossOrigin"in new Image,n=a(r),l=s(t,e,n);return r?Promise.resolve(l):o(i,l,n).then(function(e){return"data:"+e.type+";base64,"+e.content})}function o(e,t,i){return new Promise(function(r,n){var o=e.createElement("script"),a=function(){delete window.html2canvas.proxy[i],e.body.removeChild(o)};window.html2canvas.proxy[i]=function(e){a(),r(e)},o.src=t,o.onerror=function(e){a(),n(e)},e.body.appendChild(o)})}function a(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++g+"_"+Math.round(1e5*Math.random())}function s(e,t,i){return e+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}function l(e){return function(t){var i,r=new DOMParser;try{i=r.parseFromString(t,"text/html")}catch(e){h("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(t),i.close()}catch(e){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=t}}var n=i.querySelector("base");if(!n||!n.href.host){var o=i.createElement("base");o.href=e,i.head.insertBefore(o,i.head.firstChild)}return i}}function u(e,t,i,n,o,a){return new r(e,t,window.document).then(l(e)).then(function(e){return f(e,i,n,o,a,0,0)})}var c=e("./xhr"),d=e("./utils"),h=e("./log"),f=e("./clone"),p=d.decode64,g=0;i.Proxy=r,i.ProxyURL=n,i.loadUrlDocument=u},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t,i){function r(e,t){var i=document.createElement("a");i.href=e,e=i.href,this.src=e,this.image=new Image;var r=this;this.promise=new Promise(function(i,o){r.image.crossOrigin="Anonymous",r.image.onload=i,r.image.onerror=o,new n(e,t,document).then(function(e){r.image.src=e}).catch(o)})}var n=e("./proxy").ProxyURL;t.exports=r},{"./proxy":16}],18:[function(e,t,i){function r(e,t,i){n.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===i}var n=e("./nodecontainer");r.prototype.cloneTo=function(e){r.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},r.prototype=Object.create(n.prototype),r.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=r},{"./nodecontainer":14}],19:[function(e,t,i){function r(e,t,i,r,n){this.width=e,this.height=t,this.images=i,this.options=r,this.document=n}var n=e("./log");r.prototype.renderImage=function(e,t,i,r){var n=e.cssInt("paddingLeft"),o=e.cssInt("paddingTop"),a=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),l=i.borders,u=t.width-(l[1].width+l[3].width+n+a),c=t.height-(l[0].width+l[2].width+o+s);this.drawImage(r,0,0,r.image.width||u,r.image.height||c,t.left+n+l[3].width,t.top+o+l[0].width,u,c)},r.prototype.renderBackground=function(e,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,i))},r.prototype.renderBackgroundColor=function(e,t){var i=e.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)},r.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},r.prototype.renderBackgroundImage=function(e,t,i){e.parseBackgroundImages().reverse().forEach(function(r,o,a){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(e,t,s,a.length-(o+1),i):n("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,t,i):n("Error loading background-image",r.args[0]);break;case"none":break;default:n("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(e,t,i,r,n){var o=e.parseBackgroundSize(t,i.image,r),a=e.parseBackgroundPosition(t,i.image,r,o);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,a,o,t,t.left+n[3],t.top+a.top+n[0],99999,o.height,n);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,a,o,t,t.left+a.left+n[3],t.top+n[0],o.width,99999,n);break;case"no-repeat":this.backgroundRepeatShape(i,a,o,t,t.left+a.left+n[3],t.top+a.top+n[0],o.width,o.height,n);break;default:this.renderBackgroundRepeat(i,a,o,{top:t.top,left:t.left},n[3],n[0])}},t.exports=r},{"./log":13}],20:[function(e,t,i){function r(e,t){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",e,"x",t)}function n(e){return e.length>0}var o=e("../renderer"),a=e("../lineargradientcontainer"),s=e("../log");r.prototype=Object.create(o.prototype),r.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},r.prototype.rectangle=function(e,t,i,r,n){this.setFillStyle(n).fillRect(e,t,i,r)},r.prototype.circle=function(e,t,i,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+i/2,t+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},r.prototype.circleStroke=function(e,t,i,r,n,o){this.circle(e,t,i,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},r.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},r.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},r.prototype.drawImage=function(e,t,i,r,n,o,a,s,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,i,r,n,o,a,s,l)},r.prototype.clip=function(e,t,i){this.ctx.save(),e.filter(n).forEach(function(e){this.shape(e).clip()},this),t.call(i),this.ctx.restore()},r.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},r.prototype.font=function(e,t,i,r,n,o){this.setFillStyle(e).font=[t,i,r,n,o].join(" ").split(",")[0]},r.prototype.fontShadow=function(e,t,i,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",r)},r.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},r.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},r.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},r.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},r.prototype.text=function(e,t,i){this.ctx.fillText(e,t,i)},r.prototype.backgroundRepeatShape=function(e,t,i,r,n,o,a,s,l){var u=[["line",Math.round(n),Math.round(o)],["line",Math.round(n+a),Math.round(o)],["line",Math.round(n+a),Math.round(s+o)],["line",Math.round(n),Math.round(s+o)]];this.clip([u],function(){this.renderBackgroundRepeat(e,t,i,r,l[3],l[0])},this)},r.prototype.renderBackgroundRepeat=function(e,t,i,r,n,o){var a=Math.round(r.left+t.left+n),s=Math.round(r.top+t.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,i),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},r.prototype.renderBackgroundGradient=function(e,t){if(e instanceof a){var i=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){i.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,i)}},r.prototype.resizeImage=function(e,t){var i=e.image;if(i.width===t.width&&i.height===t.height)return i;var r,n=document.createElement("canvas");return n.width=t.width,n.height=t.height,r=n.getContext("2d"),r.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),n},t.exports=r},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t,i){function r(e,t,i,r){n.call(this,i,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var n=e("./nodecontainer");r.prototype=Object.create(n.prototype),r.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=r},{"./nodecontainer":14}],22:[function(e,t,i){function r(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(e){var t,i,r,n,o=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(i=e.createElement("boundtest"),i.style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i),r=t.getBoundingClientRect(),n=r.height,123===n&&(o=!0),e.body.removeChild(i))),o},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),i=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},t.exports=r},{}],23:[function(e,t,i){function r(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?Promise.resolve(t.inlineFormatting(e)):n(e)}).then(function(e){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,i))})})}var n=e("./xhr"),o=e("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},r.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},r.prototype.createCanvas=function(e){var t=this;return function(i,r){var n=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=n.lowerCanvasEl,n.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,r)).renderAll(),e(n.lowerCanvasEl)}},r.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):o(e)},t.exports=r},{"./utils":26,"./xhr":28}],24:[function(e,t,i){function r(e,t){this.src=e,this.image=null;var i=this;this.promise=t?new Promise(function(t,r){i.image=new Image,i.image.onload=t,i.image.onerror=r,i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),!0===i.image.complete&&t(i.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,i.createCanvas.call(i,t))})})}var n=e("./svgcontainer");r.prototype=Object.create(n.prototype),t.exports=r},{"./svgcontainer":23}],25:[function(e,t,i){function r(e,t){o.call(this,e,t)}function n(e,t,i){if(e.length>0)return t+i.toUpperCase()}var o=e("./nodecontainer");r.prototype=Object.create(o.prototype),r.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,n);case"uppercase":return t.toUpperCase();default:return t}},t.exports=r},{"./nodecontainer":14}],26:[function(e,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(e,t){return function(){return e.apply(t,arguments)}},i.decode64=function(e){var t,i,r,n,o,a,s,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=e.length,d="";for(t=0;t<c;t+=4)i=u.indexOf(e[t]),r=u.indexOf(e[t+1]),n=u.indexOf(e[t+2]),o=u.indexOf(e[t+3]),a=i<<2|r>>4,s=(15&r)<<4|n>>2,l=(3&n)<<6|o,d+=64===n?String.fromCharCode(a):64===o||-1===o?String.fromCharCode(a,s):String.fromCharCode(a,s,l);return d},i.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},i.offsetBounds=function(e){var t=e.offsetParent?i.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},i.parseBackgrounds=function(e){var t,i,r,n,o,a,s,l=" \r\n\t",u=[],c=0,d=0,h=function(){t&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&s.push(i),"-"===t.substr(0,1)&&(n=t.indexOf("-",1)+1)>0&&(r=t.substr(0,n),t=t.substr(n)),u.push({prefix:r,method:t.toLowerCase(),value:o,args:s,image:null})),s=[],t=r=i=o=""};return s=[],t=r=i=o="",e.split("").forEach(function(e){if(!(0===c&&l.indexOf(e)>-1)){switch(e){case'"':a?a===e&&(a=null):a=e;break;case"(":if(a)break;if(0===c)return c=1,void(o+=e);d++;break;case")":if(a)break;if(1===c){if(0===d)return c=0,o+=e,void h();d--}break;case",":if(a)break;if(0===c)return void h();if(1===c&&0===d&&!t.match(/^url$/i))return s.push(i),i="",void(o+=e)}o+=e,0===c?t+=e:i+=e}}),h(),u}},{}],27:[function(e,t,i){function r(e){n.apply(this,arguments),this.type="linear"===e.args[0]?n.TYPES.LINEAR:n.TYPES.RADIAL}var n=e("./gradientcontainer");r.prototype=Object.create(n.prototype),t.exports=r},{"./gradientcontainer":9}],28:[function(e,t,i){function r(e){return new Promise(function(t,i){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?t(r.responseText):i(new Error(r.statusText))},r.onerror=function(){i(new Error("Network Error"))},r.send()})}t.exports=r},{}]},{},[4])(4)})}).call(t,i(38))},function(e,t){e.exports={loved:"_2nUN5"}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l),c=i(5),d=r(c),h=i(6),f=r(h),p=i(2),g=r(p),m=i(7),y=r(m),v=i(3),b=r(v),w=i(22),_=function(e){function t(e){(0,s.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return i.handleShareArrowNavigation=i.handleShareArrowNavigation.bind(i),i.getShareArr=i.getShareArr.bind(i),i.buttons=[],i.shareArr=i.getShareArr(i.props.type),i.state={showShare:!1,focusedShareIcon:0},i}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getShareArr",value:function(e){return"text"===e?["facebook","twitter","tumblr","email"]:["facebook","twitter","pinterest","tumblr","email"]}},{key:"handleShareArrowNavigation",value:function(e){if(this.state.showShare)switch(e.keyCode||e.charCode){case 38:case 37:case 33:return e.preventDefault(),e.stopPropagation(),b.default.setStateAndLog(this,"Share Keypress",{focusedShareIcon:Math.max(1,this.state.focusedShareIcon-1)}),!1;case 39:case 40:case 34:return e.preventDefault(),e.stopPropagation(),b.default.setStateAndLog(this,"Share Keypress",{focusedShareIcon:Math.min(5,this.state.focusedShareIcon+1)}),!1;case 9:case 27:return e.preventDefault(),e.stopPropagation(),b.default.setStateAndLog(this,"Share Keypress",{showShare:!1,focusedShareIcon:0}),!1}switch(e.keyCode||e.charCode){case 32:case 13:return e.preventDefault(),e.stopPropagation(),this.state.showShare?(w.itemActions.share(this.shareArr[this.state.focusedShareIcon-1],this.props,"gallery"),this.props.actions.toggleShare(e,!1),b.default.setStateAndLog(this,"Share Keypress",{showShare:!1,focusedShareIcon:0})):(this.props.actions.toggleShare(e,!0),b.default.setStateAndLog(this,"Share Keypress",{showShare:!0,focusedShareIcon:1})),!1}return!0}},{key:"componentDidUpdate",value:function(){try{var e=this.state.focusedShareIcon;e>0&&this.buttons[e-1].focus()}catch(e){console.warn("Cannot focus on share icon",this.props.focus,e)}}},{key:"getShareItem",value:function(e,t){var i=this,r=this.props.allProps,n=this.shareArr.length;return g.default.createElement("button",{className:"block-fullscreen network-"+(t+1)+" progallery-svg-font-icons-"+e+(b.default.isSite()?"":" inactive "),style:{top:this.props.isVerticalContainer?"calc(100% / 6 * "+(t+1)+" + -10px "+(4===n?"+ 100% / 12":"")+")":"",left:this.props.isVerticalContainer?"":"calc(100% / 6 * "+(t+1)+" + -10px "+(4===n?"+ 100% / 12":"")+")"},onClick:function(t){t.preventDefault(),t.stopPropagation(),w.itemActions.share(e,r,"gallery")},"data-hook":e+"-share-button",ref:function(e){return i.buttons[t]=e},title:"Share on "+e,"aria-label":"Share on "+e+", "+(t+1)+" of "+this.shareArr.length,"aria-live":"assertive",role:"button",tabIndex:-1,key:e+"-share-icon"})}},{key:"render",value:function(){var e=this,t=this.props,i=t.styleParams,r=(t.type,t.id),n=t.isVerticalContainer,o=t.actions,a=t.style;if(i.allowSocial){return g.default.createElement("div",{"data-hook":"social-share-box",className:"block-fullscreen gallery-item-social-share-box "+(this.props.showShare?"":" hidden ")+(this.state.showShare?" hovered ":"")+(n?" vertical-item ":""),onClick:function(e){return o.toggleShare(e,!1)},onMouseOut:function(e){return o.toggleShare(e,!1)},style:{transform:n?"translateY(-50%) "+(a.height>200?"":"scale("+a.height/200+")"):"translateX(-50%) "+(a.width>200?"":"scale("+a.width/200+")")},tabIndex:this.props.currentIdx===this.props.idx?b.default.getTabIndex("slideshowShare"):-1,onKeyDown:this.handleShareArrowNavigation,"aria-label":"Share",role:"button",key:"item-social-share-container-"+r},y.default.map(this.shareArr,function(t,i){return e.getShareItem(t,i)}))}return!1}}]),t}(g.default.Component);t.default=_},function(e,t,i){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.baseUrl,r=void 0===i?null:i,n=t.appId,a=void 0===n?null:n,s=t.isWidgetLogger,l=void 0!==s&&s,u=t.errorHandlerToggle,c=void 0!==u&&u,d=t.disableAutoLoadFinish,h=void 0!==d&&d,f=t.swallowExceptions,p=void 0!==f&&f,g=t.interactionTimeout,m=void 0===g?null:g,y=t.timeoutHook,v=void 0===y?null:y,b=t.startHook,w=void 0===b?null:b,_=t.endHook,S=void 0===_?null:_,I=t.networkAnalysis,k=void 0!==I&&I,x="undefined"!=typeof window?"1.0.0-SNAPSHOT":null;return(new o.default).setAppName(e).setAppVersion(x).setBaseUrl(r).setAppId(a).setErrorHandlerToggle(c).setSwallowExceptions(p).setWidgetLogger(l).setInteractionTimeout(m).setTimeoutHook(v).setStartHook(w).setEndHook(S).setDisableAutoLoadFinish(h).setNetworkAnalysis(k).build()}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r;var n=i(271),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e="undefined"!=typeof window&&window.fedops&&window.fedops.sessionId;return e=e||d.default.getItem(w.SESSION_ID_STORAGE_KEY),e=e||u.default.generateGuid(),d.default.setItem(w.SESSION_ID_STORAGE_KEY,e),e}function a(e){_=e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();t.setFactory=a;var l=i(121),u=r(l),c=i(272),d=r(c),h=i(273),f=r(h),p=i(275),g=r(p),m=i(282),y=r(m),v=i(284),b=r(v),w=i(285),_=f.default,S=function(){function e(){n(this,e)}return s(e,[{key:"setAppName",value:function(e){return this.appName=e,this}},{key:"setAppVersion",value:function(e){return this.appVersion=e,this}},{key:"setErrorHandlerToggle",value:function(e){return this.errorHandlerToggle=e,this}},{key:"setSwallowExceptions",value:function(e){return this.swallowExceptions=e,this}},{key:"setAppId",value:function(e){return this.appId=e,this}},{key:"setBaseUrl",value:function(e){return this.baseUrl=e,this}},{key:"setWidgetLogger",value:function(e){return this.isWidgetLogger=e,this}},{key:"setInteractionTimeout",value:function(e){return this.interactionTimeout=e,this}},{key:"setTimeoutHook",value:function(e){return this.timeoutHook=e,this}},{key:"setStartHook",value:function(e){return this.startHook=e,this}},{key:"setEndHook",value:function(e){return this.endHook=e,this}},{key:"setDisableAutoLoadFinish",value:function(e){return this.disableAutoLoadFinish=e,this}},{key:"setNetworkAnalysis",value:function(){return this}},{key:"build",value:function(){if(!this.appName)return null;this.appVersion||(this.appVersion=w.DEFAULT_APP_VERSION);var e=new _(this.baseUrl||w.BI_BASE_URL),t=this.errorHandlerToggle,i=this.swallowExceptions,r=this.interactionTimeout,n=this.timeoutHook,a=this.startHook,s=this.endHook,l=this.disableAutoLoadFinish;t&&(window.fedopsLoggerErrorHandler=window.fedopsLoggerErrorHandler||new b.default({swallowExceptions:i}));return this.isWidgetLogger?new y.default(this.appName,this.appVersion,e,{sessionId:o(),errorHandlerToggle:t,swallowExceptions:i,disableAutoLoadFinish:l}):new g.default(this.appName,this.appVersion,e,{sessionId:o(),errorHandlerToggle:t,swallowExceptions:i,disableAutoLoadFinish:l,interactionTimeout:r,timeoutHook:n,startHook:a,endHook:s})}}]),e}();t.default=S},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getItem:function(e){try{return window.localStorage.getItem(e)}catch(e){}},setItem:function(e,t){try{return window.localStorage.setItem(e,t)}catch(e){}}}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(274),s=r(a),l=i(121),u=r(l),c=function(){function e(t){n(this,e),this.baseUrl=t}return o(e,[{key:"getBaseUrl",value:function(){return this.baseUrl}},{key:"report",value:function(e){return e?s.default.fetch(this.baseUrl+"?"+u.default.mapToQuery(e)):null}}]),e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fetch:function(e){return(new window.Image).src=e}}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(122),u=r(l),c=i(279),d=r(c),h=i(123),f=r(h),p=i(280),g=r(p),m=i(281),y=r(m),v=i(127),b=r(v),w=i(50),_=r(w),S=function(e,t){if(e)return e(t)},I=function(e){function t(e,i,r,a){var s=a.sessionId,l=a.errorHandlerToggle,u=a.disableAutoLoadFinish,c=a.interactionTimeout,d=a.timeoutHook,h=a.startHook,f=a.endHook;n(this,t);var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,{sessionId:s,errorHandlerToggle:l,disableAutoLoadFinish:u}));return p._outgoingInteractions={},p.interactionTimeout=c,p.timeoutHook=d,p.startHook=h,p.endHook=f,p}return a(t,e),s(t,[{key:"appLoaded",value:function(){if(!this._appLoadedCalled){window&&window.fedops&&"function"==typeof window.fedops.clearLoadTimeout&&window.fedops.clearLoadTimeout();var e=this.dataSource.clone().addItem(new d.default(this.sessionId)).addItem(new f.default(this.appName).setFirstRequestDuration());return this._appLoadedCalled=!0,_.default.mark("[fedops] app-loaded"),_.default.measure("[fedops] app-loaded","navigationStart","[fedops] app-loaded"),this.reportNetworkAnalysis(),this._report(e)}}},{key:"interactionStarted",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.interactionTimeout,n=i.startHook,o=i.timeoutHook;_.default.mark(e+" started");var a=this.dataSource.clone().addItem({name:e}).addItem(new g.default(this.sessionId));return this._outgoingInteractions[e]={timestamp:_.default.now(),timeout:r||this.interactionTimeout},this._report(a),S(n||this.startHook,{name:e}),{timeoutId:function(){if(r||t.interactionTimeout)return setTimeout(function(){var i=t.dataSource.clone().addItem({interactionName:e}).addItem({errorType:"timeout"}).addItem(new b.default(t.sessionId));t._report(i),S(o||t.timeoutHook,{name:e,timeout:r||t.interactionTimeout})},r||t.interactionTimeout)}()}}},{key:"interactionEnded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.timeoutId,r=t.endHook;_.default.mark(e+" ended"),_.default.measure(e+" duration",e+" started",e+" ended"),i&&clearTimeout(i);var n=this._outgoingInteractions[e]?Math.floor(_.default.now()-this._outgoingInteractions[e].timestamp):"";S(r||this.endHook,{name:e,duration:n,timeout:this._outgoingInteractions[e]&&this._outgoingInteractions[e].timeout});var o=this.dataSource.clone().addItem({name:e}).addItem({duration:n}).addItem(new y.default(this.sessionId));delete this._outgoingInteractions[e],this._report(o)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}(u.default);t.default=I},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(80),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.items=[],i&&(void 0===i.length?[i]:i).forEach(function(e){return t.addItem(e)})}return n(e,[{key:"clone",value:function(){return new e(this.items.slice())}},{key:"addItem",value:function(e){return this.items.push(e instanceof a.default?e:new a.default(e)),this}},{key:"mergeItems",value:function(){for(var e={},t=0;t<this.items.length;t++){var i=this.items[t];if(!i.isActive()){e=null;break}var r=i.export();for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}}]),e}();t.default=s},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,13,e))}return o(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var i=C[t];return e.filter(function(e){return t===e.initiatorType&&(!i||i(e))})}function l(e){return e.reduce(function(e,t){return e+t.transferSize},0)}function u(e){if(0===e.length)return 0;var t=e.reduce(function(e,t){return M(t)>=M(e)?t:e});return M(t)}function c(e){if(0===e.length)return 0;var t={startTime:1/0,responseEnd:0};return e.forEach(function(e){t.startTime>e.startTime&&(t.startTime=e.startTime),t.responseEnd<e.responseEnd&&(t.responseEnd=e.responseEnd)}),t.responseEnd-t.startTime}function d(e){var t=e.length;if(0===t)return 0;var i=e.filter(g).length;return Math.round(i/t*100)}function h(e){if(0===e.length)return 0;var t=e.filter(function(e){return 0===e.transferSize});return Math.round(t.length/e.length*100)}function f(e){if(0===e.length)return 0;var t=!1,i=Math.round(e.filter(function(e){return t=t||"nextHopProtocol"in e,"h2"===e.nextHopProtocol}).length/e.length*100);return t?i:NaN}function p(e){return!e.name.match(/http(s)?:\/\/frog.wix.com\//)}function g(e){return m(e.name)&&0===e.transferSize&&0===e.requestStart}function m(e){var t=x.default.getHost();return t&&-1===e.indexOf(t)}function y(e){return Object.keys(e).reduce(function(t,i){var r=parseInt(e[i]);return isNaN(r)||"number"!=typeof r||(t[i]=r),t},{})}function v(e){var t=e.filter(function(e){return!g(e)});return Object.keys(P).reduce(function(i,r){var n=s(e,r),o=s(t,r),a=P[r];return i[a.count]=o.length,i[a.duration]=c(o),i[a.total]=l(o),i[a.unsupported]=d(n),i[a.http2]=f(n),a.longest&&(i[a.longest]=u(o)),a.cached&&(i[a.cached]=h(o)),i},{})}function b(e){return{url:e.name,downloadDuration:e.responseEnd-e.startTime,bytesTransferred:e.transferSize,isHTTP2:"h2"===e.nextHopProtocol}}function w(e){var t=e.reduce(function(e,t){return g(t)?e.unsupported.push(t):e.supported.push(t),e},{supported:[],unsupported:[]});return Object.keys(P).reduce(function(e,i){return e[i]={},e[i].supported=s(t.supported,i).map(function(e){return b(e)}),e[i].unsupported=s(t.unsupported,i).map(function(e){return b(e)}),e},{})}Object.defineProperty(t,"__esModule",{value:!0});var _=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),S=i(23),I=r(S),k=i(126),x=r(k),E=i(50),T=r(E),P={xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr",http2:"h2Xhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs",http2:"h2Js"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss",http2:"h2Css"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages",http2:"h2Images"}},C={link:function(e){return/(.\.css$|.\.css?.)/g.test(e.name)}},M=function(e){return e.responseEnd-e.startTime},O=function(e){function t(e){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,18,e))}return a(t,e),_(t,[{key:"performNetworkAnalysis",value:function(e){if(0===e.length)return null;var t=T.default.now(),i=e.filter(p),r=v(i);r.overhead=T.default.now()-t;var n=y(r);if(console.debug&&x.default.isFedopsDev()){var o=w(i);console.debug("[fedops network analysis] [bytes analysis]\n"+JSON.stringify(n,null,4)),console.debug("[fedops network analysis] [resources breakdown]\n",o)}return n}}]),t}(I.default);t.default=O},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,11,e))}return o(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.INTERACTION_START_EVID=void 0;var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t.INTERACTION_START_EVID=15,u=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l,e))}return o(t,e),t}(s.default);t.default=u},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.INTERACTION_END_EVID=void 0;var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t.INTERACTION_END_EVID=16,u=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l,e))}return o(t,e),t}(s.default);t.default=u},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(122),u=r(l),c=i(283),d=r(c),h=i(124),f=r(h),p=i(125),g=r(p),m=function(e){function t(e,i,r,a){var s=a.sessionId,l=a.disableAutoLoadFinish;n(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,{sessionId:s,disableAutoLoadFinish:l}));return g.default.init(u.appName),u}return a(t,e),s(t,[{key:"appLoadStarted",value:function(){f.default.loadStarted(this.appName);var e=this.dataSource.clone().addItem(new d.default(this.sessionId));return this._report(e)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}(u.default);t.default=m},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(23),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,14,e))}return o(t,e),t}(s.default);t.default=l},function(e,t,i){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=function(){function e(t){var r=t.swallowExceptions;i(this,e),this.swallowExceptions=r,this.listeners={},this.instrumentAjax(),this.instrumentSetTimeout(),this.instrumentSetInterval(),this.instrumentAddEventListener(),this.instrumentFetch(),this.instrumentPromise(),this.instrumentGloballyUnhandledError()}return r(e,[{key:"subscribeListener",value:function(e,t){this.listeners[e]=t}},{key:"removeListener",value:function(e){delete this.listeners[e]}},{key:"instrumentAjax",value:function(){var e=this;if("XMLHttpRequest"in n){var t=XMLHttpRequest.prototype;this._wrap(t,"open",function(e){return function(t,i){return this.__fedops_xhr={method:t,url:i,status_code:null},e.apply(this,arguments)}},"xhr"),this._wrap(t,"send",function(t){return function(){function i(){if(1===r.readyState||4===r.readyState){try{r.__fedops_xhr.status_code=r.status}catch(e){}e._isErrorStatusCode(r.__fedops_xhr.status_code)&&e._reportError(r.__fedops_xhr,"xhr",r.__fedops_xhr.status_code)}}var r=this;return e._wrap(this,"onload",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onerror",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onprogress",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?e._wrap(r,"onreadystatechange",function(e){return function(){return i(),e.apply(this,arguments)}}):r.onreadystatechange=i,t.apply(this,arguments)}},"xhr")}}},{key:"instrumentSetTimeout",value:function(){var e=this;this._wrap(n,"setTimeout",function(t){return function(i){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.call.apply(t,[this,e._wrapCallback(i,"setTimeout")].concat(n))}})}},{key:"instrumentSetInterval",value:function(){var e=this;this._wrap(n,"setInterval",function(t){return function(i){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.call.apply(t,[this,e._wrapCallback(i,"setInterval")].concat(n))}})}},{key:"instrumentAddEventListener",value:function(){function e(e){var i=n[e]&&n[e].prototype;i&&Object.prototype.hasOwnProperty.call(i,"addEventListener")&&(t._wrap(i,"addEventListener",function(e){return function(i,r,n,o){var a=t._wrapCallback(r,"addEventListener");return r&&(r.__fedopsWrapper__=a),e.call(this,i,a,n,o)}}),t._wrap(i,"removeEventListener",function(e){return function(t,i,r,n){return i=i&&(i.__fedopsWrapper__||i),e.call(this,t,i,r,n)}}))}var t=this;["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(function(t){return e(t)})}},{key:"instrumentRequestAnimationFrame",value:function(){}},{key:"instrumentFetch",value:function(){var e=this;this._wrap(n,"fetch",function(t){return function(i,r){return t.apply(this,arguments).then(function(t){var n=t.status;if(e._isErrorStatusCode(n)){var o={url:i,method:r?r.method:"GET",status_code:n};e._reportError(o,"fetch",n)}return t})}})}},{key:"instrumentPromise",value:function(){var e=this;n.addEventListener("unhandledrejection",function(t){e._reportError(t,"promise")})}},{key:"instrumentGloballyUnhandledError",value:function(){var e=this;n.addEventListener("error",function(t){e._reportError(t,"windowOnError")})}},{key:"instrumentHistory",value:function(){}},{key:"_wrap",value:function(e,t,i,r){var n=this,o=e[t],a=i(o),s=function(){try{return a.apply(this,arguments)}catch(e){if(n._reportError(e,r),!n.swallowExceptions)throw e}};e[t]=s}},{key:"_wrapCallback",value:function(e,t){var i=this;return function(){try{return e.apply(this,arguments)}catch(e){if(i._reportError(e,t),!i.swallowExceptions)throw e}}}},{key:"_reportError",value:function(e,t,i){var r=this,n=e&&(e.error||e);if(!n.__fedopsHandledError__){Object.keys(this.listeners).forEach(function(e){r.listeners[e](n,t,i)}),n.__fedopsHandledError__=!0}}},{key:"_isErrorStatusCode",value:function(e){return e>=400||0===e}}]),e}();t.default=o}).call(t,i(38))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BI_BASE_URL="https://frog.wix.com/fed",t.SESSION_ID_STORAGE_KEY="fedops.logger.sessionId",t.DEFAULT_APP_VERSION="0.0.0"},function(e,t,i){var r,n;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===n)for(var s in r)o.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?(i.default=i,e.exports=i):(r=[],void 0!==(n=function(){return i}.apply(t,r))&&(e.exports=n))}()},function(e,t,i){(function(e,i){function r(e,t){return e.set(t[0],t[1]),e}function n(e,t){return e.add(t),e}function o(e,t){for(var i=-1,r=e?e.length:0;++i<r&&!1!==t(e[i],i,e););return e}function a(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}function s(e,t,i,r){var n=-1,o=e?e.length:0;for(r&&o&&(i=e[++n]);++n<o;)i=t(i,e[n],n,e);return i}function l(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function u(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function d(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function h(e,t){return function(i){return e(t(i))}}function f(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function p(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function g(){this.__data__=Dt?Dt(null):{}}function m(e){return this.has(e)&&delete this.__data__[e]}function y(e){var t=this.__data__;if(Dt){var i=t[e];return i===Ce?void 0:i}return yt.call(t,e)?t[e]:void 0}function v(e){var t=this.__data__;return Dt?void 0!==t[e]:yt.call(t,e)}function b(e,t){return this.__data__[e]=Dt&&void 0===t?Ce:t,this}function w(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function _(){this.__data__=[]}function S(e){var t=this.__data__,i=F(t,e);return!(i<0)&&(i==t.length-1?t.pop():Et.call(t,i,1),!0)}function I(e){var t=this.__data__,i=F(t,e);return i<0?void 0:t[i][1]}function k(e){return F(this.__data__,e)>-1}function x(e,t){var i=this.__data__,r=F(i,e);return r<0?i.push([e,t]):i[r][1]=t,this}function E(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function T(){this.__data__={hash:new p,map:new(Ot||w),string:new p}}function P(e){return ae(this,e).delete(e)}function C(e){return ae(this,e).get(e)}function M(e){return ae(this,e).has(e)}function O(e,t){return ae(this,e).set(e,t),this}function A(e){this.__data__=new w(e)}function L(){this.__data__=new w}function R(e){return this.__data__.delete(e)}function D(e){return this.__data__.get(e)}function N(e){return this.__data__.has(e)}function G(e,t){var i=this.__data__;if(i instanceof w){var r=i.__data__;if(!Ot||r.length<Pe-1)return r.push([e,t]),this;i=this.__data__=new E(r)}return i.set(e,t),this}function W(e,t){var i=Bt(e)||ve(e)?l(e.length,String):[],r=i.length,n=!!r;for(var o in e)!t&&!yt.call(e,o)||n&&("length"==o||de(o,r))||i.push(o);return i}function j(e,t,i){var r=e[t];yt.call(e,t)&&ye(r,i)&&(void 0!==i||t in e)||(e[t]=i)}function F(e,t){for(var i=e.length;i--;)if(ye(e[i][0],t))return i;return-1}function V(e,t){return e&&re(t,xe(t),e)}function U(e,t,i,r,n,a,s){var l;if(r&&(l=a?r(e,n,a,s):r(e)),void 0!==l)return l;if(!Ie(e))return e;var u=Bt(e);if(u){if(l=le(e),!t)return ie(e,l)}else{var d=zt(e),h=d==Re||d==De;if(qt(e))return Z(e,t);if(d==We||d==Oe||h&&!a){if(c(e))return a?e:{};if(l=ue(h?{}:e),!t)return ne(e,V(l,e))}else{if(!nt[d])return a?e:{};l=ce(e,d,U,t)}}s||(s=new A);var f=s.get(e);if(f)return f;if(s.set(e,l),!u)var p=i?oe(e):xe(e);return o(p||e,function(n,o){p&&(o=n,n=e[o]),j(l,o,U(n,t,i,r,o,e,s))}),l}function H(e){return Ie(e)?kt(e):{}}function z(e,t,i){var r=t(e);return Bt(e)?r:a(r,i(e))}function B(e){return vt.call(e)}function q(e){return!(!Ie(e)||fe(e))&&(_e(e)||c(e)?bt:it).test(ge(e))}function Y(e){if(!pe(e))return Ct(e);var t=[];for(var i in Object(e))yt.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Z(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}function X(e){var t=new e.constructor(e.byteLength);return new St(t).set(new St(e)),t}function J(e,t){var i=t?X(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function K(e,t,i){return s(t?i(d(e),!0):d(e),r,new e.constructor)}function Q(e){var t=new e.constructor(e.source,tt.exec(e));return t.lastIndex=e.lastIndex,t}function $(e,t,i){return s(t?i(f(e),!0):f(e),n,new e.constructor)}function ee(e){return Ut?Object(Ut.call(e)):{}}function te(e,t){var i=t?X(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function ie(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function re(e,t,i,r){i||(i={});for(var n=-1,o=t.length;++n<o;){var a=t[n],s=r?r(i[a],e[a],a,i,e):void 0;j(i,a,void 0===s?e[a]:s)}return i}function ne(e,t){return re(e,Ht(e),t)}function oe(e){return z(e,xe,Ht)}function ae(e,t){var i=e.__data__;return he(t)?i["string"==typeof t?"string":"hash"]:i.map}function se(e,t){var i=u(e,t);return q(i)?i:void 0}function le(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&yt.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function ue(e){return"function"!=typeof e.constructor||pe(e)?{}:H(It(e))}function ce(e,t,i,r){var n=e.constructor;switch(t){case He:return X(e);case Ae:case Le:return new n(+e);case ze:return J(e,r);case Be:case qe:case Ye:case Ze:case Xe:case Je:case Ke:case Qe:case $e:return te(e,r);case Ne:return K(e,r,i);case Ge:case Ve:return new n(e);case je:return Q(e);case Fe:return $(e,r,i);case Ue:return ee(e)}}function de(e,t){return!!(t=null==t?Me:t)&&("number"==typeof e||rt.test(e))&&e>-1&&e%1==0&&e<t}function he(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!gt&&gt in e}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ft)}function ge(e){if(null!=e){try{return mt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function me(e){return U(e,!0,!0)}function ye(e,t){return e===t||e!==e&&t!==t}function ve(e){return we(e)&&yt.call(e,"callee")&&(!xt.call(e,"callee")||vt.call(e)==Oe)}function be(e){return null!=e&&Se(e.length)&&!_e(e)}function we(e){return ke(e)&&be(e)}function _e(e){var t=Ie(e)?vt.call(e):"";return t==Re||t==De}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Me}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ke(e){return!!e&&"object"==typeof e}function xe(e){return be(e)?W(e):Y(e)}function Ee(){return[]}function Te(){return!1}var Pe=200,Ce="__lodash_hash_undefined__",Me=9007199254740991,Oe="[object Arguments]",Ae="[object Boolean]",Le="[object Date]",Re="[object Function]",De="[object GeneratorFunction]",Ne="[object Map]",Ge="[object Number]",We="[object Object]",je="[object RegExp]",Fe="[object Set]",Ve="[object String]",Ue="[object Symbol]",He="[object ArrayBuffer]",ze="[object DataView]",Be="[object Float32Array]",qe="[object Float64Array]",Ye="[object Int8Array]",Ze="[object Int16Array]",Xe="[object Int32Array]",Je="[object Uint8Array]",Ke="[object Uint8ClampedArray]",Qe="[object Uint16Array]",$e="[object Uint32Array]",et=/[\\^$.*+?()[\]{}|]/g,tt=/\w*$/,it=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,nt={};nt[Oe]=nt["[object Array]"]=nt[He]=nt[ze]=nt[Ae]=nt[Le]=nt[Be]=nt[qe]=nt[Ye]=nt[Ze]=nt[Xe]=nt[Ne]=nt[Ge]=nt[We]=nt[je]=nt[Fe]=nt[Ve]=nt[Ue]=nt[Je]=nt[Ke]=nt[Qe]=nt[$e]=!0,nt["[object Error]"]=nt[Re]=nt["[object WeakMap]"]=!1;var ot="object"==typeof e&&e&&e.Object===Object&&e,at="object"==typeof self&&self&&self.Object===Object&&self,st=ot||at||Function("return this")(),lt="object"==typeof t&&t&&!t.nodeType&&t,ut=lt&&"object"==typeof i&&i&&!i.nodeType&&i,ct=ut&&ut.exports===lt,dt=Array.prototype,ht=Function.prototype,ft=Object.prototype,pt=st["__core-js_shared__"],gt=function(){var e=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mt=ht.toString,yt=ft.hasOwnProperty,vt=ft.toString,bt=RegExp("^"+mt.call(yt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=ct?st.Buffer:void 0,_t=st.Symbol,St=st.Uint8Array,It=h(Object.getPrototypeOf,Object),kt=Object.create,xt=ft.propertyIsEnumerable,Et=dt.splice,Tt=Object.getOwnPropertySymbols,Pt=wt?wt.isBuffer:void 0,Ct=h(Object.keys,Object),Mt=se(st,"DataView"),Ot=se(st,"Map"),At=se(st,"Promise"),Lt=se(st,"Set"),Rt=se(st,"WeakMap"),Dt=se(Object,"create"),Nt=ge(Mt),Gt=ge(Ot),Wt=ge(At),jt=ge(Lt),Ft=ge(Rt),Vt=_t?_t.prototype:void 0,Ut=Vt?Vt.valueOf:void 0;p.prototype.clear=g,p.prototype.delete=m,p.prototype.get=y,p.prototype.has=v,p.prototype.set=b,w.prototype.clear=_,w.prototype.delete=S,w.prototype.get=I,w.prototype.has=k,w.prototype.set=x,E.prototype.clear=T,E.prototype.delete=P,E.prototype.get=C,E.prototype.has=M,E.prototype.set=O,A.prototype.clear=L,A.prototype.delete=R,A.prototype.get=D,A.prototype.has=N,A.prototype.set=G;var Ht=Tt?h(Tt,Object):Ee,zt=B;(Mt&&zt(new Mt(new ArrayBuffer(1)))!=ze||Ot&&zt(new Ot)!=Ne||At&&"[object Promise]"!=zt(At.resolve())||Lt&&zt(new Lt)!=Fe||Rt&&"[object WeakMap]"!=zt(new Rt))&&(zt=function(e){var t=vt.call(e),i=t==We?e.constructor:void 0,r=i?ge(i):void 0;if(r)switch(r){case Nt:return ze;case Gt:return Ne;case Wt:return"[object Promise]";case jt:return Fe;case Ft:return"[object WeakMap]"}return t});var Bt=Array.isArray,qt=Pt||Te;i.exports=me}).call(t,i(38),i(288)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Strip=void 0;var n=i(46),o=r(n),a=i(0),s=r(a),l=i(1),u=r(l);t.Strip=function(){function e(t){(0,s.default)(this,e),this.ratio=0,this.groups=[],this.width=0,this.height=0,this.isFullWidth=!0,this.idx=t.idx,this.styleParams=t.styleParams,this.container=t.container}return(0,u.default)(e,[{key:"addGroup",value:function(e){this.hasGroups&&(this.lastGroup.isLastGroup=!1),this.groups.push(e),this.lastGroup.isLastGroup=!0,this.lastGroup.stripWidth=this.height*this.ratio}},{key:"markAsIncomplete",value:function(){this.isFullWidth=!1,this.lastGroup.isLastGroup=!1}},{key:"setWidth",value:function(e){this.width=e,this.hasGroups&&(this.lastGroup.stripWidth=e)}},{key:"resizeToHeight",value:function(e){this.height=e;var t=0,i=0,r=!0,n=!1,a=void 0;try{for(var s,l=(0,o.default)(this.groups);!(r=(s=l.next()).done);r=!0){var u=s.value;u.setLeft(t),u.width+=i,u.resizeToHeight(e),i=u.width,u.round(),i-=u.width,t+=u.width}}catch(e){n=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw a}}}},{key:"isFull",value:function(e,t){if(!this.hasGroups)return!1;if(this.styleParams.groupsPerStrip>0)return this.groups.length>=this.styleParams.groupsPerStrip;var i=this.container.galleryWidth,r=this.styleParams,n=r.oneRow,o=r.gallerySize,a=void 0;if(n)a=!1;else{var s=i/(this.ratio+e.ratio)-o,l=i/this.ratio-o;a=!isNaN(s)&&!isNaN(l)&&(l<0||s<0&&Math.abs(l)<Math.abs(s)),a&&t&&(a=Number(Math.abs(l))<Math.abs(s))}return a}},{key:"hasGroups",get:function(){return this.groups.length>0}},{key:"lastGroup",get:function(){return this.groups[this.groups.length-1]}},{key:"scheme",get:function(){return{idx:this.idx,groups:this.groups.map(function(e){return e.scheme}),width:this.width,height:this.height,ratio:this.ratio,isFullWidth:this.isFullWidth}}}]),e}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Column=void 0;var n=i(0),o=r(n),a=i(1),s=r(a);t.Column=function(){function e(t,i,r){(0,o.default)(this,e),this.idx=t,this.groups=[],this.height=0,this.width=i,this.cubeRatio=r}return(0,s.default)(e,[{key:"addGroup",value:function(e){this.addGroups([e])}},{key:"addGroups",value:function(e){this.groups=this.groups.concat(e)}},{key:"scheme",get:function(){return{idx:this.idx,groups:this.groups.map(function(e){return e.scheme}),width:this.width,height:this.height}}}]),e}()},function(e,t,i){"use strict";function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(new(Function.prototype.bind.apply(o.default,[null].concat(t)))).createLayout()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=i(132),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjMiIGhlaWdodD0iMzkiIHZpZXdCb3g9IjAgMCAyMyAzOSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgZmlsdGVyOiB1cmwoI2ZpbHRlcik7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8ZmlsdGVyIGlkPSJmaWx0ZXIiIHg9IjEzMyIgeT0iMjI1IiB3aWR0aD0iMjMiIGhlaWdodD0iMzkiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxmZU9mZnNldCByZXN1bHQ9Im9mZnNldCIgZHg9Ii0wLjg2NiIgZHk9IjAuNSIgaW49IlNvdXJjZUFscGhhIi8+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJsdXIiIHN0ZERldmlhdGlvbj0iMSIvPgogICAgICA8ZmVGbG9vZCByZXN1bHQ9ImZsb29kIiBmbG9vZC1jb2xvcj0iIzE2MTYxNiIgZmxvb2Qtb3BhY2l0eT0iMC4yNSIvPgogICAgICA8ZmVDb21wb3NpdGUgcmVzdWx0PSJjb21wb3NpdGUiIG9wZXJhdG9yPSJpbiIgaW4yPSJibHVyIi8+CiAgICAgIDxmZUJsZW5kIHJlc3VsdD0iYmxlbmQiIGluPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDxmZUZsb29kIHJlc3VsdD0iZmxvb2QtMiIgZmxvb2QtY29sb3I9IiNmZmYiLz4KICAgICAgPGZlQ29tcG9zaXRlIHJlc3VsdD0iY29tcG9zaXRlLTIiIG9wZXJhdG9yPSJpbiIgaW4yPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDxmZUJsZW5kIHJlc3VsdD0iYmxlbmQtMiIgaW4yPSJibGVuZCIvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSJfMjUwX21pZGRsZV9yaWdodF9jb3B5XzMiIGRhdGEtbmFtZT0iMjUwIG1pZGRsZSByaWdodCAgY29weSAzIiBjbGFzcz0iY2xzLTEiIGQ9Ik0xNTQuOTk0LDI1OS41MjJMMTUzLjQ3NywyNjFsLTE4LjQ3MS0xOCwxOC40NzMtMTgsMS41MTksMS40OEwxMzguMDQ0LDI0M1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzMgLTIyNSkiLz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjMiIGhlaWdodD0iMzkiIHZpZXdCb3g9IjAgMCAyMyAzOSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgZmlsdGVyOiB1cmwoI2ZpbHRlcik7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8ZmlsdGVyIGlkPSJmaWx0ZXIiIHg9Ijg1NSIgeT0iMjMwIiB3aWR0aD0iMjMiIGhlaWdodD0iMzkiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxmZU9mZnNldCByZXN1bHQ9Im9mZnNldCIgZHg9Ii0wLjg2NiIgZHk9IjAuNSIgaW49IlNvdXJjZUFscGhhIi8+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJsdXIiIHN0ZERldmlhdGlvbj0iMSIvPgogICAgICA8ZmVGbG9vZCByZXN1bHQ9ImZsb29kIiBmbG9vZC1jb2xvcj0iIzE2MTYxNiIgZmxvb2Qtb3BhY2l0eT0iMC4yNSIvPgogICAgICA8ZmVDb21wb3NpdGUgcmVzdWx0PSJjb21wb3NpdGUiIG9wZXJhdG9yPSJpbiIgaW4yPSJibHVyIi8+CiAgICAgIDxmZUJsZW5kIHJlc3VsdD0iYmxlbmQiIGluPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDxmZUZsb29kIHJlc3VsdD0iZmxvb2QtMiIgZmxvb2QtY29sb3I9IiNmZmYiLz4KICAgICAgPGZlQ29tcG9zaXRlIHJlc3VsdD0iY29tcG9zaXRlLTIiIG9wZXJhdG9yPSJpbiIgaW4yPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDxmZUJsZW5kIHJlc3VsdD0iYmxlbmQtMiIgaW4yPSJibGVuZCIvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSJfMjUwX21pZGRsZV9yaWdodF9jb3B5XzIiIGRhdGEtbmFtZT0iMjUwIG1pZGRsZSByaWdodCAgY29weSAyIiBjbGFzcz0iY2xzLTEiIGQ9Ik04NTcuMDA1LDIzMS40NzlMODU4LjUsMjMwbDE4LjEyNCwxOC0xOC4xMjcsMTgtMS40OS0xLjQ4TDg3My42MzgsMjQ4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg1NSAtMjMwKSIvPgo8L3N2Zz4K"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(19),o=r(n),a=i(74),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(30),f=r(h),p=i(70),g=i(295),m=r(g),y=i(13),v=r(y),b=function(){function e(t){(0,u.default)(this,e),this.dataKey=t,this.defaultWatermarkData={position:9,size:40,opacity:40,imageUrl:"8bb438_9ad16b69fd1b4ab29324f97f1323b05a~mv2.png",imageRatio:1.42517815},this.origOpacity=40,this.emptyWatermarkData={position:1,size:1,opacity:1,imageUrl:"8bb438_39a78b46d4fe47069da63da9348b4ee5~mv2.png",imageRatio:1},this.cachedWatermark={default:this.defaultWatermarkData},this.disableWatermark=this.disableWatermark.bind(this),this.enableWatermark=this.enableWatermark.bind(this);try{this.protocol=window.location.protocol,this.galleryId=window.galleryId,this.instance=window.instance}catch(e){this.protocol="http:",this.galleryId="",this.instance=""}}return(0,d.default)(e,[{key:"applyWatermarkOnMediaDialogResult",value:function(e,t,i){var r=this;return new s.default(function(n,o){if(e&&e.length){var a=null;r.getWatermarkData(t).then(function(n){var o=n.imageUrl,s=n.position,l=n.size,u=n.opacity;a=n;var c={wm:"media/"+o,wmop:u,wmpos:s,wmscl:l,files:e.map(function(e){return{file_name:e.fileName}})};return f.default.post(r.protocol+"//progallery.wix.com/editor/api/v1/watermark/gallery/"+t+"?instance="+i+"&isStore=true",c,{withCredentials:!0,xsrfCookieName:null})}).then(function(){n(a)})}else o()})}},{key:"getCompId",value:function(){return new s.default(function(e){var t=null;t="undefined"!=typeof window&&window.isFullscreen?p.renderUtils.getWorkerWindow()["pro-gallery-fullscreen-comp-id"]:v.default.Utils.getOrigCompId()||v.default.Utils.getCompId()||"default",e(t)})}},{key:"getDataKey",value:function(){var e=this;return new s.default(function(t){e.getCompId().then(function(i){var r=e.dataKey+"-"+i;t(r)})})}},{key:"saveWatermark",value:function(e,t,i){var r=e.position,n=e.opacity,o=e.size,a=e.imageUrl,s=e.imageRatio,l=this;return m.default.set("watermark",{position:r,opacity:n,size:o,imageUrl:a,imageRatio:s}).then(function(){return l._updateMediaWatermark(a,n,r,o,t,i)})}},{key:"getCachedWatermark",value:function(e){return this.cachedWatermark[e]||this.defaultWatermarkData}},{key:"disableWatermark",value:function(e,t){var i=this;p.renderUtils.isDev()&&console.log("Disabling watermark"),this.getCompId().then(function(r){var n=i.getCachedWatermark(r),o=n.position,a=n.size,s=n.opacity,l=n.imageUrl,u=n.imageRatio;return i.origOpacity=s,s=0,i.saveWatermark({position:o,size:a,opacity:s,imageUrl:l,imageRatio:u},e,t)})}},{key:"enableWatermark",value:function(e,t){var i=this;p.renderUtils.isDev()&&console.log("Enabling watermark"),this.getCompId().then(function(r){var n=i.getCachedWatermark(r),o=n.position,a=n.size,s=n.imageUrl,l=n.imageRatio,u=i.origOpacity;return i.saveWatermark({position:o,size:a,opacity:u,imageUrl:s,imageRatio:l},e,t)})}},{key:"_updateMediaWatermark",value:function(e,t,i,r,n,o){var a=this;return new s.default(function(s){var l={wm:"media/"+e,wmop:t,wmpos:i,wmscl:r};return f.default.post(a.protocol+"//progallery.wix.com/editor/api/v1/watermark/gallery/"+n+"?instance="+o+"&isStore=true",l,{withCredentials:!0,xsrfCookieName:null}).then(function(){s()})})}},{key:"getWatermarkDataFromGallerySettingsSync",value:function(e){var t=null;if(e&&e.gallerySettings){var i=null;if("string"==typeof e.gallerySettings)try{i=JSON.parse(p.renderUtils.stripSlashes(e.gallerySettings))}catch(e){}else"object"===(0,o.default)(e.gallerySettings)&&(i=e.gallerySettings);if(i&&(t=i.watermark)&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){console.error("watermarkApi - watermark from gallery settings ("+t+") is invalid",e)}}return t}},{key:"getWatermarkDataFromServerAsync",value:function(e){var t=this;e=e||this.galleryId;var i=this.instance;return new s.default(function(r,n){i&&e?f.default.get(t.protocol+"//progallery.wix.com/_api/pro-gallery-editor-webapp/v1/gallery/"+e+"?instance="+i+"&isStore=true",{withCredentials:!0,xsrfCookieName:null}).then(function(e){var t=e.data;t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&t.settings&&t.settings.watermark?r(t.settings.watermark):n("watermarkApi - getWatermarkDataFromServerAsync - returned data from server is corrupt")}).catch(function(){n("watermarkApi - getWatermarkDataFromServerAsync - request error")}):n("watermarkApi - getWatermarkDataFromServerAsync - no galleryId ("+e+") or instance ("+i+")")})}},{key:"getWatermarkData",value:function(e){var t=this;return new s.default(function(i,r){t.getCompId().then(function(n){if(t.cachedWatermark[n]&&!p.renderUtils.isEditor())i(t.cachedWatermark[n]);else{var o=void 0;try{o=window.prerenderedGallery||window.prerenderedItem}catch(e){o=[]}t.cachedWatermark[n]=t.getWatermarkDataFromGallerySettingsSync(o),p.renderUtils.isDev()&&console.log("Getting public watermark"),t.cachedWatermark[n]?i(t.cachedWatermark[n]):t.getWatermarkDataFromServerAsync(e).then(function(e){t.cachedWatermark[n]=e,i(t.cachedWatermark[n])}).catch(function(e){p.renderUtils.isDev()&&console.log("Getting watermark from server failed - ",e),t.cachedWatermark[n]=new s.default(function(){t.getDataKey().then(function(e){v.default&&v.default.Data&&v.default.Data.Public?v.default.Data.Public.get(e,{scope:v.default.Data.SCOPE.APP},function(r){p.renderUtils.isDev()&&console.log("Got watermark from Data.Public",r);var o=JSON.parse(r[e]);t.cachedWatermark[n]=o,i(o)},function(e){p.renderUtils.isDev()&&console.log("cannot fetch watermark from Data.Public",e),t.cachedWatermark[n]=t.defaultWatermarkData,i(t.cachedWatermark[n])}):(p.renderUtils.isDev()&&console.log("Cannot get watermark from Data.Public (wix not found)"),r("Wix not found"))})})})}})})}}]),e}();t.default=new b("watermarkData")},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(296),o=r(n),a=i(10),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(30),f=r(h),p=i(28),g=function(){function e(){var t=this;(0,u.default)(this,e);try{this.protocol=window.location.protocol,this.galleryId=window.galleryId,this.instance=window.instance}catch(e){this.protocol="http:",this.galleryId="",this.instance=""}this.baseUrl=this.protocol+"//progallery.wix.com/_api/pro-gallery-editor-webapp/v1/gallery/",this.getGallerySettingsApi=function(){return""+t.baseUrl+t.galleryId+"?instance="+t.instance+"&isStore="+p.baseUtils.isStoreGallery()}}return(0,d.default)(e,[{key:"get",value:function(e){return f.default.get(this.getGallerySettingsApi(),{withCredentials:!0,xsrfCookieName:null}).then(function(t){var i=t.data;return e?i.settings[e]:i.settings})}},{key:"set",value:function(e,t){var i=this;return this.get().then(function(r){r=r||{};var n=(0,s.default)(r,(0,o.default)({},e,t));return f.default.put(i.getGallerySettingsApi(),{settings:n},{withCredentials:!0,xsrfCookieName:null}).then(function(){return p.baseUtils.setExternalId()})})}}]),e}(),m=new g;t.default=m},function(e,t,i){"use strict";t.__esModule=!0;var r=i(89),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,i){return t in e?(0,n.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){!function(t,i){e.exports=i()}(0,function(){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,i){"use strict";var r={JPG:"jpg",JPEG:"jpeg",PNG:"png",WEBP:"webp",WIX_ICO_MP:"wix_ico_mp",WIX_MP:"wix_mp",GIF:"gif",SVG:"svg",UNRECOGNIZED:"unrecognized"},n=[r.JPG,r.JPEG,r.PNG,r.GIF,r.WEBP];e.exports={alignTypes:{CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},alignTypesMap:{center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},transformTypes:{FIT:"fit",FILL:"fill",FILL_FOCAL:"fill_focal",CROP:"crop",LEGACY_CROP:"legacy_crop",LEGACY_FILL:"legacy_fill"},fittingTypes:{SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},htmlTag:{BG:"bg",IMG:"img",SVG:"svg"},upscaleMethods:{AUTO:"auto",CLASSIC:"classic",SUPER:"super"},upscaleMethodsValues:{classic:1,super:2},defaultUSM:{radius:.66,amount:1,threshold:.01},emptyData:{uri:"",css:{img:{},container:{}},attr:{img:{},container:{}}},imageQuality:{HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"},imageScaleDefaults:{HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},fileType:r,supportedExtensions:n,webp:{LOSSLESS:"lossless",LOSSY:"lossy",ALPHA:"alpha",ANIMATION:"animation"},SAFE_TRANSFORMED_AREA:25e6,SUPER_UPSCALE_MODELS:[1.5,2,4],MAX_DEVICE_PIXEL_RATIO:2,API_VERSION:"v1"}},function(e,t,i){"use strict";function r(e){var t=new window.Image;t.onload=function(){var i=m.getFeature("isWEBP");i[e]=t.width>0&&t.height>0,m.setFeature("isWEBP",i)},t.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[e]}function n(e){var t=[g.fileType.PNG,g.fileType.JPEG,g.fileType.JPG,g.fileType.WIX_ICO_MP,g.fileType.WIX_MP];return p.includes(t,s(e))}function o(e){return p.includes(["webp"],s(e))}function a(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}function s(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function l(e,t,i,r,n){return n===g.transformTypes.FILL?function(e,t,i,r){return Math.max(i/e,r/t)}(e,t,i,r):n===g.transformTypes.FIT?function(e,t,i,r){return Math.min(i/e,r/t)}(e,t,i,r):1}function u(e,t){var i=h(e,t);return{optimizedScaleFactor:g.imageScaleDefaults[i].maxUpscale,upscaleMethodValue:g.upscaleMethodsValues.classic,forceUSM:!1}}function c(e,t){var i=h(e,t);return{optimizedScaleFactor:g.imageScaleDefaults[i].maxUpscale,upscaleMethodValue:g.upscaleMethodsValues.classic,forceUSM:!1}}function d(e,t,i){return{optimizedScaleFactor:p.last(g.SUPER_UPSCALE_MODELS),upscaleMethodValue:g.upscaleMethodsValues.super,forceUSM:!(g.SUPER_UPSCALE_MODELS.includes(i)||i>p.last(g.SUPER_UPSCALE_MODELS))}}function h(e,t){var i=e*t;return i>g.imageScaleDefaults[g.imageQuality.HIGH].size?g.imageQuality.HIGH:i>g.imageScaleDefaults[g.imageQuality.MEDIUM].size?g.imageQuality.MEDIUM:i>g.imageScaleDefaults[g.imageQuality.LOW].size?g.imageQuality.LOW:g.imageQuality.TINY}function f(e,t){var i=Math.pow(10,t||0);return(e*i/i).toFixed(parseInt(t,10))}var p=i(2),g=i(0),m=i(4);e.exports={populateGlobalFeatureSupport:function(){"undefined"!=typeof window&&(r(g.webp.LOSSY),r(g.webp.LOSSLESS),r(g.webp.ALPHA),r(g.webp.ANIMATION),m.setFeature("isObjectFitBrowser",function(e){return"objectFit"in window.document.documentElement.style}()))},isWEBPBrowserSupport:function(e){var t=m.getFeature("isWEBP"),i=e===g.fileType.JPG&&t[g.webp.LOSSY],r=e===g.fileType.PNG&&t[g.webp.LOSSLESS],n=e===g.fileType.PNG&&t[g.webp.ALPHA];return i||r&&n},isObjectFitBrowserSupport:function(){return m.getFeature("isObjectFitBrowser")},isImageTransformApplicable:function(e){return n(e)&&!a(e)},isValidRequest:function(e,t,i){return i&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&p.includes(g.fittingTypes,e)},isImageTypeSupported:n,isExternalUrl:a,isWEBP:o,getFileType:function(e){return function(e){return p.includes(["jpg","jpeg"],s(e))}(e)?g.fileType.JPG:function(e){return p.includes(["png"],s(e))}(e)?g.fileType.PNG:o(e)?g.fileType.WEBP:g.fileType.UNRECOGNIZED},getFileExtension:s,getFileName:function(e,t){var i=/\.([^.]*)$/;if("string"==typeof t&&t.length){var r=t,n=t.match(i);return n&&p.includes(g.supportedExtensions,n[1])&&(r=t.replace(i,"")),encodeURIComponent(r)}var o=e.match(/\/(.*?)$/);return(o?o[1]:e).replace(i,"")},getAlignedRect:function(e,t,i){var r=void 0,n=void 0;switch(i){case g.alignTypes.CENTER:r=Math.max(0,(e.width-t.width)/2),n=Math.max(0,(e.height-t.height)/2);break;case g.alignTypes.TOP:r=Math.max(0,(e.width-t.width)/2),n=0;break;case g.alignTypes.TOP_LEFT:r=0,n=0;break;case g.alignTypes.TOP_RIGHT:r=Math.max(0,e.width-t.width),n=0;break;case g.alignTypes.BOTTOM:r=Math.max(0,(e.width-t.width)/2),n=Math.max(0,e.height-t.height);break;case g.alignTypes.BOTTOM_LEFT:r=0,n=Math.max(0,e.height-t.height);break;case g.alignTypes.BOTTOM_RIGHT:r=Math.max(0,e.width-t.width),n=Math.max(0,e.height-t.height);break;case g.alignTypes.LEFT:r=0,n=Math.max(0,(e.height-t.height)/2);break;case g.alignTypes.RIGHT:r=Math.max(0,e.width-t.width),n=Math.max(0,(e.height-t.height)/2)}return{x:e.x?e.x+r:r,y:e.y?e.y+n:n,width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}},getOverlappingRect:function(e,t){var i=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),r=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return i&&r&&(e.width!==i||e.height!==r)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:i,height:r}:null},getScaleFactor:l,getTransformData:function(e,t,i,r,n){var o=function(e){return Math.min(e.pixelAspectRatio||1,g.MAX_DEVICE_PIXEL_RATIO)}(i),a=function(e,t,i,r,n){var o=void 0,a=void 0,s=void 0;if(o=l(e,t,i,r,n),n===g.transformTypes.FILL?(a=i,s=r):n===g.transformTypes.FIT&&(a=e*o,s=t*o),a*s>g.SAFE_TRANSFORMED_AREA){var u=Math.sqrt(g.SAFE_TRANSFORMED_AREA/(a*s));o=l(e,t,a*=u,s*=u,n)}return{scaleFactor:o,width:a,height:s}}(e,t,i.width*o,i.height*o,r),s=a.scaleFactor;return function(e,t,i,r,n,o,a){var s=function(e,t,i,r){return{classic:u,auto:c,super:d}[r](e,t,i)}(e,t,o,n),l=s.optimizedScaleFactor,h=s.upscaleMethodValue,f=s.forceUSM;if(o<=l)return{width:i,height:r,scaleFactor:o,upscaleMethodValue:h,forceUSM:f,cssUpscaleNeeded:!1};var p=void 0,m=void 0;switch(a){case g.transformTypes.FILL:p=i*(l/o),m=r*(l/o);break;case g.transformTypes.FIT:p=e*l,m=t*l}return{width:p,height:m,scaleFactor:l,upscaleMethodValue:h,forceUSM:f,cssUpscaleNeeded:!0}}(e,t,a.width,a.height,n,s,r)},getAlignment:function(e){return g.alignTypesMap[e.alignment]||g.alignTypesMap[g.alignTypes.CENTER]},getPreferredImageQuality:function(e,t){return g.imageScaleDefaults[h(e,t)].quality},getDimension:function(e,t,i,r,n){var o=l(e,t,i,r,n);return{width:Math.round(e*o),height:Math.round(t*o)}},getFocalPoint:function(e){var t=null;return"number"==typeof e.x&&"number"==typeof e.y&&(t={x:f(Math.max(0,Math.min(100,e.x))/100,2),y:f(Math.max(0,Math.min(100,e.y))/100,2)}),t},getUpscaleString:function(e){return e&&e.upscaleMethod&&"string"==typeof e.upscaleMethod&&g.upscaleMethods[e.upscaleMethod.toUpperCase()]||g.upscaleMethods.AUTO},roundToFixed:f}},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={assign:function(){for(var e=arguments[0]||{},t=Array.prototype.slice.call(arguments,1,arguments.length),i=0;i<t.length;i++){var r=t[i];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e},includes:function(e,t){return e.indexOf?e.indexOf(t)>-1:!(!e||"object"!==(void 0===e?"undefined":r(e)))&&Object.keys(e).some(function(i){return e[i]===t})},last:function(e){return e[e.length-1]},template:function(e){return function(t){var i=e;for(var r in t)t.hasOwnProperty(r)&&(i=i.replace(new RegExp("\\${"+r+"}","g"),t[r]));return i}}}},function(e,t,i){"use strict";var r=i(1),n=i(5),o=i(6);e.exports=function(e,t,i,a){var s=r.getFileType(t.id),l={fileName:r.getFileName(t.id,t.name),fileExtension:r.getFileExtension(t.id),fileType:s,isWEBPSupport:r.isWEBPBrowserSupport(s),fittingType:e,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},quality:0,upscaleMethod:r.getUpscaleString(a),progressive:!0,unsharpMask:{},watermark:"",parts:[]};return r.isImageTransformApplicable(t.id)&&(n.setTransformParts(l,t,i),o.setTransformOptions(l,a)),l}},function(e,t,i){"use strict";var r={isWEBP:{lossless:!1,lossy:!1,alpha:!1,animation:!1},isObjectFitBrowser:!1};e.exports={getFeature:function(e){return r[e]},setFeature:function(e,t){r[e]=t}}},function(e,t,i){"use strict";function r(e,t){var i=s.getTransformData(e.src.width,e.src.height,t,a.transformTypes.FIT,e.upscaleMethod);return{transformType:a.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:a.alignTypesMap.center,upscale:i.scaleFactor>1,forceUSM:i.forceUSM,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethodValue:i.upscaleMethodValue}}function n(e){return{transformType:a.transformTypes.CROP,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}var o=i(2),a=i(0),s=i(1);e.exports={setTransformParts:function(e,t,i){var l=void 0;switch(t.crop&&(l=s.getOverlappingRect(t,t.crop))&&(e.src.width=l.width,e.src.height=l.height,e.src.cropped=!0,e.parts.push(n(l))),e.fittingType){case a.fittingTypes.SCALE_TO_FIT:case a.fittingTypes.LEGACY_FIT_WIDTH:case a.fittingTypes.LEGACY_FIT_HEIGHT:case a.fittingTypes.LEGACY_FULL:case a.fittingTypes.FIT_AND_TILE:case a.fittingTypes.LEGACY_BG_FIT_AND_TILE:case a.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case a.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL:case a.fittingTypes.LEGACY_BG_NORMAL:e.parts.push(r(e,i));break;case a.fittingTypes.SCALE_TO_FILL:e.parts.push(function(e,t){var i=s.getTransformData(e.src.width,e.src.height,t,a.transformTypes.FILL,e.upscaleMethod),r=s.getFocalPoint(e.focalPoint);return{transformType:r?a.transformTypes.FILL_FOCAL:a.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:s.getAlignment(t),focalPointX:r&&r.x,focalPointY:r&&r.y,upscale:i.scaleFactor>1,forceUSM:i.forceUSM,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethodValue:i.upscaleMethodValue}}(e,i));break;case a.fittingTypes.STRETCH:e.parts.push(function(e,t){var i=s.getScaleFactor(e.src.width,e.src.height,t.width,t.height,a.transformTypes.FILL),n=o.assign({},t);return n.width=e.src.width*i,n.height=e.src.height*i,r(e,n)}(e,i));break;case a.fittingTypes.TILE_HORIZONTAL:case a.fittingTypes.TILE_VERTICAL:case a.fittingTypes.TILE:case a.fittingTypes.LEGACY_ORIGINAL_SIZE:case a.fittingTypes.ORIGINAL_SIZE:l=s.getAlignedRect(e.src,i,i.alignment),e.src.isCropped?(o.assign(e.parts[0],l),e.src.width=l.width,e.src.height=l.height):e.parts.push(n(l));break;case a.fittingTypes.LEGACY_STRIP_TILE_HORIZONTAL:case a.fittingTypes.LEGACY_STRIP_TILE_VERTICAL:case a.fittingTypes.LEGACY_STRIP_TILE:case a.fittingTypes.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:a.transformTypes.LEGACY_CROP,width:Math.round(e.width),height:Math.round(e.height),alignment:s.getAlignment(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case a.fittingTypes.LEGACY_STRIP_SCALE_TO_FIT:case a.fittingTypes.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:a.transformTypes.FIT,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case a.fittingTypes.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:a.transformTypes.LEGACY_FILL,width:Math.round(e.width),height:Math.round(e.height),alignment:s.getAlignment(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i))}}}},function(e,t,i){"use strict";var r=i(2),n=i(0),o=i(1);e.exports={setTransformOptions:function(e,t){t=t||{},e.quality=function(e,t){var i=r.last(e.parts),n=o.getPreferredImageQuality(i.width,i.height),a=t.quality&&t.quality>=5&&t.quality<=90?t.quality:n;return parseInt(a,10)}(e,t),e.unsharpMask=function(e,t){var i=void 0;return function(e){var t=void 0!==(e=e||{}).radius&&e.radius>=.1&&e.radius<=500,i=void 0!==e.amount&&e.amount>=0&&e.amount<=10,r=void 0!==e.threshold&&e.threshold>=0&&e.threshold<=255;return t&&i&&r}(t.unsharpMask)?i={radius:t.unsharpMask.radius,amount:t.unsharpMask.amount,threshold:t.unsharpMask.threshold}:function(e){return void 0!==(e=e||{}).radius&&0===e.radius&&void 0!==e.amount&&0===e.amount&&void 0!==e.threshold&&0===e.threshold}(t.unsharpMask)||function(e){var t=r.last(e.parts);return!(t.scaleFactor>=1)||t.forceUSM}(e)&&(i=n.defaultUSM),i&&(i.radius=o.roundToFixed(i.radius,2),i.amount=o.roundToFixed(i.amount,2),i.threshold=o.roundToFixed(i.threshold,2)),i}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t)}}},function(e,t,i){"use strict";var r=i(0),n=i(1),o=i(8),a=i(3);e.exports=function(e,t,i,s,l){var u=r.emptyData.uri;return n.isImageTransformApplicable(t.id)?(l=l||a(e,t,i,s,l),u=o.getImageURI(l)):u=t.id,u}},function(e,t,i){"use strict";var r=i(2),n=i(0),o=r.template("fit/w_${width},h_${height}"),a=r.template("fill/w_${width},h_${height},al_${alignment}"),s=r.template("fill/w_${width},h_${height},fp_${focalPointX}_${focalPointY}"),l=r.template("crop/x_${x},y_${y},w_${width},h_${height}"),u=r.template("crop/w_${width},h_${height},al_${alignment}"),c=r.template("fill/w_${width},h_${height},al_${alignment}"),d=r.template(",lg_${upscaleMethodValue}"),h=r.template(",q_${quality}"),f=r.template(",usm_${radius}_${amount}_${threshold}"),p=r.template(",bl"),g=r.template(",wm_${watermark}");e.exports={getImageURI:function(e){var t=[];e.parts.forEach(function(e){switch(e.transformType){case n.transformTypes.CROP:t.push(l(e));break;case n.transformTypes.LEGACY_CROP:t.push(u(e));break;case n.transformTypes.LEGACY_FILL:var i=c(e);e.upscale&&(i+=d(e)),t.push(i);break;case n.transformTypes.FIT:var r=o(e);e.upscale&&(r+=d(e)),t.push(r);break;case n.transformTypes.FILL:var h=a(e);e.upscale&&(h+=d(e)),t.push(h);break;case n.transformTypes.FILL_FOCAL:var f=s(e);e.upscale&&(f+=d(e)),t.push(f)}});var i=t.join("/");return(e.fileType===n.fileType.PNG&&e.isWEBPSupport||e.fileType===n.fileType.JPG)&&(i+=h(e)),e.unsharpMask&&(i+=f(e.unsharpMask)),e.progressive||(i+=p(e)),e.watermark&&(i+=g(e)),e.src.id+"/"+n.API_VERSION+"/"+i+"/"+e.fileName+"."+(e.isWEBPSupport?"webp":e.fileExtension)}}},,,,,,,function(e,t,i){"use strict";function r(e){return l.test(e)?""+a+e:""+s+e}var n=i(16),o=i(0);n.populateGlobalFeatureSupport();var a="https://static.wixstatic.com/",s="https://static.wixstatic.com/media/",l=/^media\//i;e.exports={getScaleToFitImageURL:function(e,t,i,a,s,l){return r(n.getData(o.fittingTypes.SCALE_TO_FIT,{id:e,width:t,height:i,name:l&&l.name},{width:a,height:s,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},l).uri)},getScaleToFillImageURL:function(e,t,i,a,s,l){return r(n.getData(o.fittingTypes.SCALE_TO_FILL,{id:e,width:t,height:i,name:l&&l.name,focalPoint:{x:l&&l.focalPoint&&l.focalPoint.x,y:l&&l.focalPoint&&l.focalPoint.y}},{width:a,height:s,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},l).uri)},getCropImageURL:function(e,t,i,a,s,l,u,c,d,h){return r(n.getData(o.fittingTypes.SCALE_TO_FILL,{id:e,width:t,height:i,name:h&&h.name,crop:{x:a,y:s,width:l,height:u}},{width:c,height:d,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},h).uri)}}},function(e,t,i){"use strict";var r=i(0),n=i(1),o=i(7);e.exports={populateGlobalFeatureSupport:n.populateGlobalFeatureSupport,getData:function(e,t,i,a){var s=r.emptyData.uri;return n.isValidRequest(e,t,i)&&(s=o(e,t,i,a)),{uri:s}},fittingTypes:r.fittingTypes,alignTypes:r.alignTypes,htmlTag:r.htmlTag,upscaleMethods:r.upscaleMethods}}])})},function(e,t,i){"use strict";var r=i(52),n=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports={fullscreen:[{version:n.default.Versions.min,dateFrom:-864e13},{version:"V2",dateFrom:Date.parse("2017-09-25T12:00:00.000Z"),description:"Editor_Settings_Upgrade_Panel_Upgrade_Expand_Mode",affectsProGallery:!0,affectsArtStore:!1}],spacing:[{version:n.default.Versions.min,dateFrom:-864e13},{version:2,dateFrom:Date.parse("2017-08-29T11:27:29.000Z"),ignoreUserManuaUpdate:!0}],layouts:[{version:n.default.Versions.min,dateFrom:-864e13},{version:2,dateFrom:Date.parse("2018-05-24T18:00:00.000Z")}]}},function(e,t,i){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return e=e.trim(),/^\.*\/|^(?!localhost)\w+:/.test(e)?e:e.replace(/^(?!(?:\w+:)?\/\/)/,"http://")}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return e.gallery}function o(e){return{actions:(0,x.bindActionCreators)(T,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.GalleryContainer=void 0;var a=i(9),s=r(a),l=i(10),u=r(l),c=i(76),d=r(c),h=i(4),f=r(h),p=i(0),g=r(p),m=i(1),y=r(m),v=i(5),b=r(v),w=i(6),_=r(w),S=i(2),I=r(S),k=i(45),x=i(37),E=i(47),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(E),P=i(115),C=r(P),M=i(131),O=r(M),A=i(301),L=i(302),R=i(138),D=i(39),N=i(51),G=(r(N),i(82)),W=(r(G),i(7)),j=r(W),F=i(3),V=(r(F),i(83),i(136),i(22),i(29),i(13)),U=(r(V),i(49)),H=(r(U),i(30)),z=(r(H),i(137)),B=(r(z),t.GalleryContainer=function(e){function t(e){(0,g.default)(this,t);var i=(0,b.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return i.state={},i}return(0,_.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){this.stateFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.stateFromProps(e)}},{key:"stateFromProps",value:function(e){var t=e.items,i=e.styles,r=e.container,n=e.watermarkData,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.count("PROGALLERY [COUNT] - stateFromProps"),console.time("PROGALLERY [TIMING] - stateFromProps");var a=void 0,s=void 0,l=void 0,c={items:!(!t||this.state.items&&t===this.props.items),styles:!(!i||this.state.styles&&i===this.props.styles),container:!(!r||this.state.container&&r===this.props.container),watermark:!!n&&n!==this.props.watermarkData};c.any=(0,d.default)(c).reduce(function(e,t){return e||c[t]},!1),t=t||this.items,console.log("PROGALLERY [RENDERS] - stateFromProps",{isNew:c},{items:t,styles:i,container:r,watermarkData:n});var h={};if(c.items?(a=t.map(function(e){return L.ItemsHelper.convertDtoToLayoutItem(e)}),this.items=a,h.items=a.map(function(e){return e.id})):a=this.state.items,c.styles||c.container?(i=i||this.state.styles,r=r||this.state.container,s=(0,A.addLayoutStyles)(i,r),l=(0,u.default)({},r,(0,R.getGalleryDimensions)(i,r),{scrollBase:this.getScrollBase(),getScrollingElement:this.getScrollingElement(s)}),h.styles=s,h.container=l):(s=this.state.styles,l=this.state.container),!this.galleryStructure||c.any){var f={items:a,container:l,styleParams:s,gotScrollEvent:!0,showAllItems:!0},p=(0,D.createLayout)(f);this.galleryStructure=L.ItemsHelper.convertToGalleryItems(p,{watermark:n,sharpParams:s.sharpParams})}c.any?(console.time("PROGALLERY [TIMING] - stateFromProps - newState setting"),console.log("PROGALLERY [RENDERS] - newState",{newState:h},this.items,this.galleryStructure),this.setState(h,function(){o(),console.timeEnd("PROGALLERY [TIMING] - stateFromProps - newState setting"),console.timeEnd("PROGALLERY [TIMING] - stateFromProps")})):o()}},{key:"getScrollBase",value:function(){var e=this.props.container.scrollBase;return e+=document.getElementById("pro-gallery-"+this.props.domId).getBoundingClientRect().y}},{key:"getScrollingElement",value:function(e){var t=this,i=e.oneRow?function(){return document.querySelector("#pro-gallery-"+t.props.domId+" #gallery-horizontal-scroll")}:function(){};return{vertical:this.props.getScrollingElement?"function"==typeof this.props.getScrollingElement?this.props.getScrollingElement:function(){return t.props.getScrollingElement}:function(){return window},horizontal:i}}},{key:"getMoreItemsIfNeeded",value:function(e){var t=this;return this.props.getMoreItems&&!this.gettingMoreItems&&this.props.totalItemsCount>this.state.items.length&&e===this.galleryStructure.groups.length-1&&(this.gettingMoreItems=!0,console.error("PROGALLERY [ITEMS] Getting more items",this.state.items.length,this.props.totalItemsCount),this.props.getMoreItems(this.state.items.length,function(e){t.stateFromProps({items:t.items.concat(e.map(function(e){return L.ItemsHelper.convertDtoToLayoutItem(e)})||[])},function(){console.error("PROGALLERY [ITEMS] Got more items",t.state.items.length,t.props.totalItemsCount),t.gettingMoreItems=!1})})),!1}},{key:"canRender",value:function(){var e=this.state.container&&this.state.styles&&this.state.items;return!e&&console.log("PROGALLERY [CAN_RENDER] GalleryContainer",this.domId,e,this.state.container,this.state.styles,this.state.items),e}},{key:"render",value:function(){if(!this.canRender())return null;console.time("PROGALLERY [COUNTS] - GalleryContainer (render)");var e=this.state.styles,t=e.oneRow?O.default:C.default;return console.log("PROGALLERY [RENDER] - GalleryContainer",this.state.container.scrollBase,{state:this.state,items:this.items}),I.default.createElement("div",null,"NEWWWW",I.default.createElement(t,(0,s.default)({totalItemsCount:this.props.totalItemsCount,items:this.items,galleryStructure:this.galleryStructure,styleParams:e,container:this.state.container,thumbnailSize:R.thumbnailSize,watermark:this.props.watermarkData,settings:this.props.settings,gotScrollEvent:!0,scroll:j.default.merge({y:0,scrollTop:0,scale:1},{isInfinite:!0}),convertToGalleryItems:L.ItemsHelper.convertToGalleryItems,convertDtoToLayoutItem:L.ItemsHelper.convertDtoToLayoutItem,domId:this.props.domId,actions:j.default.merge(this.props.actions,{getMoreItemsIfNeeded:this.getMoreItemsIfNeeded.bind(this),toggleInfiniteScroll:this.toggleInfiniteScroll,toggleFullscreen:this.toggleFullscreen,setWixHeight:this.setWixHeight,scrollToItem:this.scrollToItem}),debug:{lastHeight:this.lastHeight,newHeight:this.newHeight,resizeCount:this.resizeCount,orientationCount:this.orientationCount,maxGalleryWidth:this.props.maxGalleryWidth},store:this.props.store},this.props.gallery)))}}]),t}(I.default.Component));t.default=(0,k.connect)(n,o)(B)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){!e>0&&(e=999999),e=Math.floor(e);var t=function(e){e=String(e);for(var t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t},i=function(e,t){return Math.floor(1e7*(e/t-Math.floor(e/t)))},r=function(r,n,o){var a=t(o),s=n-r+1;return i(e,a)%s+r},n=function(e){return!!r(0,1,e)},o={cubeImages:n("cubeImages"),cubeRatio:r(1,25,"cubeRatio")/5,isVertical:n("isVertical"),gallerySize:r(300,800,"gallerySize"),collageAmount:r(5,10,"collageAmount")/10,collageDensity:(p.spacingVersionManager.isNewSpacing()?r(1,100,"collageDensity"):r(5,10,"collageDensity"))/100,groupTypes:["1"].concat(d.default.filter("2h,2v,3t,3b,3l,3r,3h,3v".split(","),function(e,t){return n("groupTypes"+t)})),oneRow:n("oneRow"),borderRadius:0,boxShadow:0,imageMargin:r(0,p.spacingVersionManager.isNewSpacing()?r(300,800,"gallerySize")/5:5,"imageMargin"),galleryMargin:p.spacingVersionManager.isNewSpacing()?0:r(0,5,"imageMargin"),floatingImages:0,chooseBestGroup:n("chooseBestGroup"),smartCrop:n("smartCrop"),showArrows:!1,cubeType:"fill",hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlideshow:!1,isSlider:!1,isColumns:!1,cropOnlyFill:!1,fixedColumns:0,enableInfiniteScroll:1};return o.oneRow&&(o.isVertical=!1),o.galleryType=o.isVertical?"Columns":"Strips",o.groupSize=parseInt(d.default.last(o.groupTypes)),o.groupTypes=o.groupTypes.join(","),o.minItemSize=o.gallerySize/o.groupSize/2,o}function o(e,t){var i=e.galleryType,r=e.gallerySize,n={collage_ver:function(){return{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*r+500),fixedColumns:0}},collage_hor:function(){return{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*r+500),fixedColumns:0}},grid:function(){return{cubeImages:!0,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:Math.round(8.5*r+150),fixedColumns:0,isGrid:!0}},masonry_ver:function(){return{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:Math.round(8*r+200),fixedColumns:0}},masonry_hor:function(){return{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:Math.round(5*r+200),fixedColumns:0}},one_col:function(){return{cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:(0,g.getGalleryWidth)(e,t),fixedColumns:1}},one_row:function(){return{cubeImages:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:(0,g.getGalleryHeight)(e,t),fixedColumns:0}},slideshow:function(){return{showArrows:!0,cubeImages:!0,cubeRatio:(0,g.getGalleryRatio)(e,t),isVertical:!0,gallerySize:(0,g.getGalleryWidth)(e,t),galleryType:"Columns",groupSize:1,groupTypes:"1",fixedColumns:1}}},o=void 0;switch(i){case"-1":o={gallerySize:r};break;case"0":o=n.collage_ver();break;default:case"1":o=n.collage_hor();break;case"2":o=n.grid();break;case"3":o=n.masonry_ver();break;case"4":o=n.masonry_hor();break;case"5":o=n.one_col();break;case"6":o=n.one_row();break;case"7":o=n.slideshow()}return o}function a(e,t){var i=e.galleryLayout,r=e.gallerySize,o=e.magicLayoutSeed,a={collage:function(){return{showArrows:!1,cubeImages:!1,groupSize:3,groupTypes:"1,2h,2v,3t,3b,3l,3r",gallerySize:Math.round(5*r+500),fixedColumns:0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!1,isMasonry:!1,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1}},masonry:function(){return{showArrows:!1,cubeImages:!1,groupSize:1,groupTypes:"1",gallerySize:r,fixedColumns:0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!1,isMasonry:!0,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1,oneRow:!1}},grid:function(){return{showArrows:!1,cubeImages:!0,smartCrop:!1,imageResize:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",fixedColumns:void 0,gallerySize:Math.round(8.5*r+150),hasThumbnails:!1,enableScroll:!0,cropOnlyFill:!1,isSlider:!1,isColumns:!1,isGrid:!0,isMasonry:!1,isSlideshow:!1,minItemSize:50}},thumbnails:function(){return{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:function(){var i=(0,g.getGalleryDimensions)(e,t);return i.galleryWidth/i.galleryHeight},isVertical:!1,galleryType:"Strips",groupSize:1,gallerySize:(0,g.getGalleryWidth)(e,t),groupTypes:"1",oneRow:!0,hasThumbnails:!0,enableScroll:!1,isGrid:!1,isSlider:!1,isMasonry:!1,isColumns:!1,isSlideshow:!1,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0}},slider:function(){return{showArrows:!0,cubeImages:!0,smartCrop:!1,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:(0,g.getGalleryHeight)(e,t),oneRow:!0,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isSlider:!0,isColumns:!1,isMasonry:!1,isSlideshow:!1,cropOnlyFill:!0}},slideshow:function(){return{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeRatio:function(){var i=(0,g.getGalleryDimensions)(e,t);return i.galleryWidth/i.galleryHeight},cubeType:"fill",isVertical:!1,gallerySize:550,galleryType:"Strips",groupSize:1,groupTypes:"1",fixedColumns:1,oneRow:!0,hasThumbnails:!1,enableScroll:!1,isGrid:!1,isColumns:!1,isMasonry:!1,isSlider:!1,isSlideshow:!0,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0}},panorama:function(){return{showArrows:!1,cubeImages:!1,isVertical:!0,galleryType:"Columns",groupSize:1,groupTypes:"1",gallerySize:(0,g.getGalleryWidth)(e,t),oneRow:!1,fixedColumns:1,hasThumbnails:!1,enableScroll:!0,isGrid:!1,isColumns:!1,isMasonry:!1,isSlider:!1,isSlideshow:!1,cropOnlyFill:!1}},column:function(){return{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:.35,isVertical:!1,galleryType:"Strips",groupSize:1,groupTypes:"1",gallerySize:(0,g.getGalleryHeight)(e,t),fixedColumns:0,hasThumbnails:!1,oneRow:!0,enableScroll:!0,isGrid:!1,isColumns:!0,isMasonry:!1,isSlider:!1,isSlideshow:!1,cropOnlyFill:!1}},fullsize:function(){return{showArrows:!0,cubeImages:!0,smartCrop:!1,cubeType:"fill",cubeRatio:function(){var i=(0,g.getGalleryDimensions)(e,t);return i.galleryWidth/i.galleryHeight},isVertical:!1,galleryType:"Strips",groupSize:1,gallerySize:(0,g.getGalleryWidth)(e,t),groupTypes:"1",oneRow:!0,hasThumbnails:!1,enableScroll:!1,isGrid:!1,isSlider:!1,isColumns:!1,isMasonry:!1,isSlideshow:!1,cropOnlyFill:!1,floatingImages:0,galleryMargin:0,imageMargin:0}},empty:function(){return{gallerySize:Math.round(9*r+100)}},magic:function(){return n(o)}},s=["empty","collage","masonry","grid","thumbnails","slider","slideshow","panorama","column","magic","fullsize"],l=s[i+1];d.default.isUndefined(l)&&(f.default.isStoreGallery()?(i=2,l="grid"):(i=0,l="collage"));var u={};return f.default.isStoreGallery()&&f.default.isMobile()&&(i=2,l="grid",u.forceMobileCustomButton=!0),f.default.isVerbose()&&console.log("chosen layout is",l),d.default.merge(a[l](),u,{galleryLayout:i})}function s(e,t){var i=e.galleryType,r=e.galleryLayout;if(!d.default.isUndefined(i)&&d.default.isUndefined(r)){e=(0,u.default)(e,o(e,t)),e.layoutsVersion=1;var n=["galleryType","galleryThumbnailsAlignment","magicLayoutSeed","imageResize","isVertical","scrollDirection","enableInfiniteScroll"];e.selectedLayout=n.map(function(t){return String(e[t])}).join("|")}else{f.default.isVerbose()&&console.log("Using galleryLayout for defaults",e),e=(0,u.default)(m,e,a(e,t));var s=["galleryLayout","galleryThumbnailsAlignment","magicLayoutSeed","imageResize","isVertical","scrollDirection","enableInfiniteScroll"];e.selectedLayout=s.map(function(t){return String(e[t])}).join("|"),e.layoutsVersion=2,e.selectedLayoutV2=r,f.default.isVerbose()&&console.log("new selected layout",e.selectedLayout)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.addLayoutStyles=void 0;var l=i(10),u=r(l),c=i(7),d=r(c),h=i(3),f=r(h),p=i(83),g=i(138),m={galleryType:void 0,groupSize:void 0,showArrows:void 0,cubeImages:void 0,cubeType:void 0,cubeRatio:void 0,isVertical:void 0,gallerySize:void 0,collageAmount:void 0,collageDensity:void 0,groupTypes:void 0,oneRow:void 0,borderRadius:void 0,boxShadow:void 0,imageMargin:void 0,galleryMargin:void 0,floatingImages:void 0,chooseBestGroup:void 0,smartCrop:void 0,hasThumbnails:void 0,enableScroll:void 0,isGrid:void 0,isSlider:void 0,isColumns:void 0,isSlideshow:void 0,cropOnlyFill:void 0,fixedColumns:void 0,enableInfiniteScroll:void 0};t.addLayoutStyles=s},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItemsHelper=void 0;var n=i(10),o=r(n),a=i(9),s=r(a),l=i(0),u=r(l),c=i(1),d=r(c),h=i(51),f=r(h),p=i(82),g=r(p),m=i(3),y=r(m),v=i(7),b=r(v);t.ItemsHelper=function(){function e(){(0,u.default)(this,e)}return(0,d.default)(e,null,[{key:"convertDtoToLayoutItem",value:function(e){if(!!(e.id&&e.width>0&&e.height>0))return e;var t=e.metadata||e.metaData,i=b.default.isObject(t)?t:y.default.parseStringObject(t)||{};return(0,s.default)({id:e.itemId||e.photoId,width:i.width,height:i.height},e)}},{key:"convertToGalleryItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0;e.galleryItems=[];for(var r=0;r<e.columns.length;r++){var n=e.columns[r];n.galleryGroups=[];for(var a=n.groups||n,s=0;s<a.length;s++){for(var l=a[s],u=[],c=0;c<l.items.length;c++){var d=l.items[c];u[c]=new f.default((0,o.default)({scheme:d,dto:d.dto},t)),e.galleryItems[d.idx]=u[c],i++}n.galleryGroups[s]=new g.default({scheme:l,dto:l.dto,items:u})}}return console.log({galleryStructure:e}),e}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(68),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r),o=i(304),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e){var t=e.videoQueue,i=e.utils;return function(e){var r=function(t){e.dispatch({type:n.SET_VIDEO_PLAY_INDEX,payload:t})},o=function(){r(t.current())},s=function(){r(t.next())},l=function(){r(-1)};return function(r){return function(u){var c=u.type,d=u.payload,h=e.getState(),f=h.gallery.videoPlayMode;switch(c){case n.VIDEO_ADDED:t.addItem(d);break;case n.VIDEO_REMOVED:t.removeItem(d)}r(u);var p=f===a.default.autoPlay;if(i.isEditor()&&-1!==d)l();else if(p)switch(c){case n.NAVIGATION_IN:case n.VIDEO_ENDED:s();break;case n.EDITOR_MODE_CHANGED:case n.GALLERY_WINDOW_LAYOUT_CHANGED:t.isCurrentVideoVisible()?o():s();break;case n.VIDEO_ADDED:o()}}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={hover:0,autoPlay:1,click:2}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoQueue=void 0;var n=i(0),o=r(n),a=i(1),s=r(a);t.VideoQueue=function(){function e(){(0,o.default)(this,e),this.que=[],this.dummyVideo={idx:-1,isVisible:function(){return!1}},this.video=this.dummyVideo}return(0,s.default)(e,[{key:"current",value:function(){return this.video.idx}},{key:"isCurrentVideoVisible",value:function(){return this.video.isVisible()}},{key:"next",value:function(){if(0===this.que.length)return null;var e=this.que.indexOf(this.video),t=this.nextVisibleVideo(e+1);return this.video=t,this.video.idx}},{key:"nextVisibleVideo",value:function(e){for(var t=this.que.length,i=void 0,r=0;r<t&&(i=(r+e)%t,!this.que[i].isVisible());r++);return this.que[i].isVisible()?this.que[i]:this.dummyVideo}},{key:"isEmpty",value:function(){return 0===this.que.length}},{key:"addItem",value:function(e){this.isEmpty()&&(this.video=e),this.que.push(e)}},{key:"removeItem",value:function(e){this.que=this.que.filter(function(t){return t.idx!==e}),this.isEmpty()&&(this.video=this.dummyVideo)}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{metadata:{height:1e3,lastModified:1445860855,name:"8b72558253b2502b401bb46e5599f22a",size:1100727,width:1920,sourceName:"private"},orderIndex:0,photoId:"8b72558253b2502b401bb46e5599f22a",url:"8bb438_1b73a6b067b24175bd087e86613bd00c.jpg"},{metadata:{height:5600,lastModified:1445857830,name:"2d3b675ea857dc41158bad3b28300824",size:8128464,width:3737},orderIndex:1,photoId:"2d3b675ea857dc41158bad3b28300824",url:"8bb438_78ff5e32500d48cdaa22a3f446d68216.jpg"},{metadata:{height:3737,lastModified:1445857821,name:"860df034014674abd7a2e73abe0b851b",size:5655675,width:5600},orderIndex:2,photoId:"860df034014674abd7a2e73abe0b851b",url:"8bb438_ff062a651e174cf5926fe5c088be1099.jpg"},{metadata:{height:3737,lastModified:1445857814,name:"a898a24fe0d2c60a348eac9e38cae265",size:11697590,width:5600},orderIndex:3,photoId:"a898a24fe0d2c60a348eac9e38cae265",url:"8bb438_5ec836c505f445dfab711a56e67fc502.jpg"},{metadata:{height:3737,lastModified:1445857800,name:"5dd5a6e757c702b2856a3a2f4bb00154",size:6528300,width:5600},orderIndex:4,photoId:"5dd5a6e757c702b2856a3a2f4bb00154",url:"8bb438_2798f080526a4d3f8cb89d93e305a0b8.jpg"},{metadata:{height:3737,lastModified:1445857785,name:"e8b32772f67865aedb3b12115eaf19a4",size:4931341,width:5600},orderIndex:5,photoId:"e8b32772f67865aedb3b12115eaf19a4",url:"8bb438_9a335dcb8c884086b8ffdf1ea44ca7e9.jpg"},{metadata:{height:3737,lastModified:1445857778,name:"90e376fcd4b801bed0f22cb5bd7d0045",size:11051393,width:5600},orderIndex:6,photoId:"90e376fcd4b801bed0f22cb5bd7d0045",url:"8bb438_6e9b65f5c9e343c6bc3344b2def0df11.jpg"},{metadata:{height:3737,lastModified:1445857763,name:"0db65a80624a2e0b8c71e553b6f4b3f6",size:9294683,width:5600},orderIndex:7,photoId:"0db65a80624a2e0b8c71e553b6f4b3f6",url:"8bb438_f4f7fa31c5364557af0da7c4fd543cc9.jpg"},{metadata:{height:3737,lastModified:1445857751,name:"1f02dcba84a9b73b40d25e59280a9580",size:9048422,width:5600},orderIndex:8,photoId:"1f02dcba84a9b73b40d25e59280a9580",url:"8bb438_0e26eb36903c40558d3e9a3dc088b791.jpg"},{metadata:{height:3737,lastModified:1445857742,name:"70cf2b13f9bde8f8c33768260f25050a",size:6486671,width:5600},orderIndex:9,photoId:"70cf2b13f9bde8f8c33768260f25050a",url:"8bb438_1d81fe98c5cc433a9651fc24e7ce2617.jpg"},{metadata:{height:3737,lastModified:1445857734,name:"8e0bf32b6fade59dcfd7757ead8a0478",size:9556027,width:5600},orderIndex:10,photoId:"8e0bf32b6fade59dcfd7757ead8a0478",url:"8bb438_2ecb6a1a9d5b4e148bd83a1ea3920860.jpg"}],n=[{itemId:"d19570fa-e97f-4b3d-b8ad-4e24b3a9a3ec",url:"0d72ac_31569a98fd8d436f98ae9c827c216443",orderIndex:144779073.0099,metadata:{name:"342278662.mp4",size:8941842,lastModified:143135238e4,width:1920,height:1080,type:"video",posters:[{url:"0d72ac_31569a98fd8d436f98ae9c827c216443f000.jpg",height:1080,width:1920},{url:"0d72ac_31569a98fd8d436f98ae9c827c216443f001.jpg",height:1080,width:1920},{url:"0d72ac_31569a98fd8d436f98ae9c827c216443f002.jpg",height:1080,width:1920},{url:"0d72ac_31569a98fd8d436f98ae9c827c216443f003.jpg",height:1080,width:1920}],duration:14914,qualities:[{formats:["mp4","webm"],height:480,quality:"480p",width:854},{formats:["mp4","webm"],height:720,quality:"720p",width:1280},{formats:["mp4","webm"],height:1080,quality:"1080p",width:1920}]}},{itemId:"5f51db65-4104-447b-b675-94657671a73f",url:"0d72ac_3e5c5b13a90749a6a02c845e8d1fa4dc",orderIndex:144779076.0099,metadata:{name:"343014810.mp4",size:23225503,lastModified:1435064726e3,width:1920,height:1080,type:"video",posters:[{url:"0d72ac_3e5c5b13a90749a6a02c845e8d1fa4dcf000.jpg",height:1080,width:1920},{url:"0d72ac_3e5c5b13a90749a6a02c845e8d1fa4dcf001.jpg",height:1080,width:1920},{url:"0d72ac_3e5c5b13a90749a6a02c845e8d1fa4dcf002.jpg",height:1080,width:1920},{url:"0d72ac_3e5c5b13a90749a6a02c845e8d1fa4dcf003.jpg",height:1080,width:1920}],duration:44878,qualities:[{formats:["mp4","webm"],height:480,quality:"480p",width:854},{formats:["mp4","webm"],height:720,quality:"720p",width:1280},{formats:["mp4","webm"],height:1080,quality:"1080p",width:1920}]}},{itemId:"98c5601c-3486-452b-933c-49cb451d676f",url:"0d72ac_8cebf3ded81a496cb5a1dde4d3ebf0db",orderIndex:144779083.0099,metadata:{name:"Loop_NightRide1 (1).mp4",size:50631228,lastModified:1441172756e3,width:1920,height:1080,type:"video",posters:[{url:"0d72ac_8cebf3ded81a496cb5a1dde4d3ebf0dbf000.jpg",height:1080,width:1920},{url:"0d72ac_8cebf3ded81a496cb5a1dde4d3ebf0dbf001.jpg",height:1080,width:1920},{url:"0d72ac_8cebf3ded81a496cb5a1dde4d3ebf0dbf002.jpg",height:1080,width:1920},{url:"0d72ac_8cebf3ded81a496cb5a1dde4d3ebf0dbf003.jpg",height:1080,width:1920}],duration:24290,qualities:[{formats:["mp4","webm"],height:480,quality:"480p",width:854},{formats:["mp4","webm"],height:720,quality:"720p",width:1280},{formats:["mp4","webm"],height:1080,quality:"1080p",width:1920}]}}];t.defaultImages=r,t.defaultVideos=n}])});
//# sourceMappingURL=main.bundle.min.js.map